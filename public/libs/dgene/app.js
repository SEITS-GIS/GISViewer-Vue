(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(164),i={log:"DGene log:",info:"DGene info:",warn:"DGene warn:",error:"DGene error:",ENTRY_INIT_ERROR:"Initializ error ",ENTRY_Developer_CLOSE:"Developer model has closed",ENTRY_INITIALIZE_Vesion:"DGene Fusion Version : V".concat(r.version),ENTRY_INITIALIZE_ERROR:"DGene Fusion Version error.Will return to the home page after five seconds, contact the administrator to modify.",ENTRY_FILE_INITIALIZE_ERROR:"Initialization file request returned data error.",ENTRY_FILE_REQUEST_ERROR:"Initialization file request returned data error.",ENTRY_SCENE_INITIALIZE_ERROR:"Initialization scene request returned data error.",ENTRY_SCENE_REQUEST_ERROR:"Initialization scene request returned data error.",ENTRY_FUSION_INITIALIZE_ERROR:"Initialization fusion request returned data error.",ENTRY_FUSION_REQUEST_ERROR:"Initialization fusion request returned data error.",SCENE_FUSION_OK:"Fusion module started."}},107:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(31);var r=n(149),i=n(0);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.flvObj=t,this.videoTextureArr=n}var t,n,a;return t=e,(n=[{key:"createFlv",value:function(e,t,n){var o=this.flvObj,a=this.videoTextureArr,s=document.createElement("video");s.setAttribute("crossOrigin","*"),a[e]=new i.yb(s);var u=document.getElementById("videoList"),l=document.createElement("li");return u.appendChild(l),l.appendChild(s),s.id=e,s.style.zIndex=3,s.style.position="fixed",s.style.top="0px",s.style.left="0px",s.style.display="none",s.loop="true",o[e]={},o[e]=r.a.createPlayer({type:t||"mp4",isLive:"mp4"!=t,url:n||"none",enableStashBuffer:!1,withCredentials:!1,cors:!0}),o[e].attachMediaElement(s),o[e].load(),o[e]}},{key:"play",value:function(e){this.flvObj[e].play()}},{key:"destroy",value:function(e){var t=this.flvObj;void 0!==t[e]&&null!=t[e]&&(t[e].unload(),t[e].detachMediaElement(),t[e].destroy(),t[e]=null)}}])&&o(t.prototype,n),a&&o(t,a),e}()},11:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n(31),n(26);var r,i,o,a=n(0);function s(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}Object.assign(s.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),s.FullScreenQuad=(r=new a.R(-1,1,1,-1,0,1),i=new a.T(2,2),o=function(e){this._mesh=new a.J(i,e)},Object.defineProperty(o.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(o.prototype,{render:function(e){e.render(this._mesh,r)}}),o)},142:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(128),n(29),n(129),n(39),n(28),n(20);var r=n(0),i=function(e,t){var n,i,o,a,s;this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new r.ub,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:r.F.LEFT,MIDDLE:r.F.MIDDLE,RIGHT:r.F.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return h.phi},this.getAzimuthalAngle=function(){return h.theta},this.saveState=function(){u.target0.copy(u.target),u.position0.copy(u.object.position),u.zoom0=u.object.zoom},this.reset=function(){u.target.copy(u.target0),u.object.position.copy(u.position0),u.object.zoom=u.zoom0,u.object.updateProjectionMatrix(),u.dispatchEvent(l),u.update(),p=d.NONE},this.update=(n=new r.ub,i=(new r.W).setFromUnitVectors(e.up,new r.ub(0,1,0)),o=i.clone().inverse(),a=new r.ub,s=new r.W,function(){var e=u.object.position;return n.copy(e).sub(u.target),n.applyQuaternion(i),h.setFromVector3(n),u.autoRotate&&p===d.NONE&&M(2*Math.PI/60/60*u.autoRotateSpeed),h.theta+=m.theta,h.phi+=m.phi,h.theta=Math.max(u.minAzimuthAngle,Math.min(u.maxAzimuthAngle,h.theta)),h.phi=Math.max(u.minPolarAngle,Math.min(u.maxPolarAngle,h.phi)),h.makeSafe(),h.radius*=A,h.radius=Math.max(u.minDistance,Math.min(u.maxDistance,h.radius)),u.target.add(y),n.setFromSpherical(h),n.applyQuaternion(o),e.copy(u.target).add(n),u.object.lookAt(u.target),!0===u.enableDamping?(m.theta*=1-u.dampingFactor,m.phi*=1-u.dampingFactor,y.multiplyScalar(1-u.dampingFactor)):(m.set(0,0,0),y.set(0,0,0)),A=1,!!(b||a.distanceToSquared(u.object.position)>f||8*(1-s.dot(u.object.quaternion))>f)&&(u.dispatchEvent(l),a.copy(u.object.position),s.copy(u.object.quaternion),b=!1,!0)}),this.dispose=function(){u.domElement.removeEventListener("contextmenu",ne,!1),u.domElement.removeEventListener("mousedown",V,!1),u.domElement.removeEventListener("wheel",Z,!1),u.domElement.removeEventListener("touchstart",$,!1),u.domElement.removeEventListener("touchend",te,!1),u.domElement.removeEventListener("touchmove",ee,!1),document.removeEventListener("mousemove",K,!1),document.removeEventListener("mouseup",q,!1),window.removeEventListener("keydown",J,!1)};var u=this,l={type:"change"},_={type:"start"},c={type:"end"},d={NONE:0,ROTATE_UP:1,ROTATE_LEFT:2,ROTATE:3,DOLLY:4,DOLLY_ROTATE:7,PAN:8,DOLLY_PAN:12},p=d.NONE,f=1e-6,h=new r.hb,m=new r.hb,A=1,y=new r.ub,b=!1,v=new r.tb,g=new r.tb,E=new r.tb,F=new r.tb,T=new r.tb,x=new r.tb,P=new r.tb,D=new r.tb,C=new r.tb,w=new r.tb,I=new r.tb,O=new r.tb,S=new r.tb,B=new r.tb;function L(){return Math.pow(.95,u.zoomSpeed)}function M(e){m.theta-=e}function R(e){m.phi-=e}var N,U=(N=new r.ub,function(e,t){N.setFromMatrixColumn(t,0),N.multiplyScalar(-e),y.add(N)}),k=function(){var e=new r.ub;return function(t,n){!0===u.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(u.object.up,e)),e.multiplyScalar(t),y.add(e)}}(),j=function(){var e=new r.ub;return function(t,n){var r=u.domElement===document?u.domElement.body:u.domElement;if(u.object.isPerspectiveCamera){var i=u.object.position;e.copy(i).sub(u.target);var o=e.length();o*=Math.tan(u.object.fov/2*Math.PI/180),U(2*t*o/r.clientHeight,u.object.matrix),k(2*n*o/r.clientHeight,u.object.matrix)}else u.object.isOrthographicCamera?(U(t*(u.object.right-u.object.left)/u.object.zoom/r.clientWidth,u.object.matrix),k(n*(u.object.top-u.object.bottom)/u.object.zoom/r.clientHeight,u.object.matrix)):(console.warn("WARNING: MapControls.js encountered an unknown camera type - pan disabled."),u.enablePan=!1)}}();function G(e){u.object.isPerspectiveCamera?A/=e:u.object.isOrthographicCamera?(u.object.zoom=Math.max(u.minZoom,Math.min(u.maxZoom,u.object.zoom*e)),u.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: MapControls.js encountered an unknown camera type - dolly/zoom disabled."),u.enableZoom=!1)}function X(e){u.object.isPerspectiveCamera?A*=e:u.object.isOrthographicCamera?(u.object.zoom=Math.max(u.minZoom,Math.min(u.maxZoom,u.object.zoom/e)),u.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: MapControls.js encountered an unknown camera type - dolly/zoom disabled."),u.enableZoom=!1)}function Q(e){v.set(e.clientX,e.clientY)}function z(e){if(!1!==u.enableRotate&&0!=(p&d.ROTATE)){if(E.set(e.touches[0].pageX,e.touches[0].pageY),F.set(e.touches[1].pageX,e.touches[1].pageY),T.subVectors(E,v),x.subVectors(F,g),P.subVectors(g,v),D.subVectors(F,E),function(){if(!W(P))return!1;if(!W(D))return!1;if(!H(T))return!1;if(!H(x))return!1;return T.dot(x)>0}()){var t=u.domElement===document?u.domElement.body:u.domElement;R(2*Math.PI*T.y/t.clientHeight),p=d.ROTATE_UP}else 0!=(p&d.ROTATE_LEFT)&&M((P.angle()-D.angle())*u.rotateSpeed);v.copy(E),g.copy(F)}}var Y,W=(Y=Math.sin(Math.PI/6),function(e){return Math.abs(Math.sin(e.angle()))<Y}),H=function(){var e=Math.cos(Math.PI/2-Math.PI/6);return function(t){return Math.abs(Math.cos(t.angle()))<e}}();function V(e){if(!1!==u.enabled){switch(e.preventDefault(),e.button){case u.mouseButtons.LEFT:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===u.enableRotate)return;Q(e),p=d.ROTATE}else{if(!1===u.enablePan)return;!function(e){C.set(e.clientX,e.clientY)}(e),p=d.PAN}break;case u.mouseButtons.MIDDLE:if(!1===u.enableZoom)return;!function(e){O.set(e.clientX,e.clientY)}(e),p=d.DOLLY;break;case u.mouseButtons.RIGHT:if(!1===u.enableRotate)return;Q(e),p=d.ROTATE}p!==d.NONE&&(document.addEventListener("mousemove",K,!1),document.addEventListener("mouseup",q,!1),u.dispatchEvent(_))}}function K(e){if(!1!==u.enabled)switch(e.preventDefault(),p){case d.ROTATE:if(!1===u.enableRotate)return;!function(e){E.set(e.clientX,e.clientY),T.subVectors(E,v).multiplyScalar(u.rotateSpeed);var t=u.domElement===document?u.domElement.body:u.domElement;M(2*Math.PI*T.x/t.clientHeight),R(2*Math.PI*T.y/t.clientHeight),v.copy(E),u.update()}(e);break;case d.DOLLY:if(!1===u.enableZoom)return;!function(e){S.set(e.clientX,e.clientY),B.subVectors(S,O),B.y>0?G(L()):B.y<0&&X(L()),O.copy(S),u.update()}(e);break;case d.PAN:if(!1===u.enablePan)return;!function(e){w.set(e.clientX,e.clientY),I.subVectors(w,C).multiplyScalar(u.panSpeed),j(I.x,I.y),C.copy(w),u.update()}(e)}}function q(e){!1!==u.enabled&&(document.removeEventListener("mousemove",K,!1),document.removeEventListener("mouseup",q,!1),u.dispatchEvent(c),p=d.NONE)}function Z(e){!1===u.enabled||!1===u.enableZoom||p!==d.NONE&&p!==d.ROTATE||(e.preventDefault(),e.stopPropagation(),u.dispatchEvent(_),function(e){e.deltaY<0?X(L()):e.deltaY>0&&G(L()),u.update()}(e),u.dispatchEvent(c))}function J(e){!1!==u.enabled&&!1!==u.enableKeys&&!1!==u.enablePan&&function(e){switch(e.keyCode){case u.keys.UP:j(0,u.keyPanSpeed),u.update();break;case u.keys.BOTTOM:j(0,-u.keyPanSpeed),u.update();break;case u.keys.LEFT:j(u.keyPanSpeed,0),u.update();break;case u.keys.RIGHT:j(-u.keyPanSpeed,0),u.update()}}(e)}function $(e){if(!1!==u.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===u.enablePan)return;!function(e){u.enablePan&&C.set(e.touches[0].pageX,e.touches[0].pageY)}(e),p=d.PAN;break;case 2:if(!1===u.enableZoom&&!1===u.enableRotate)return;!function(e){v.set(e.touches[0].pageX,e.touches[0].pageY),g.set(e.touches[1].pageX,e.touches[1].pageY)}(e),function(e){if(u.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);O.set(0,r)}}(e),p=d.DOLLY_ROTATE;break;default:p=d.NONE}p!==d.NONE&&u.dispatchEvent(_)}}function ee(e){if(!1!==u.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===u.enablePan)return;if(p!==d.PAN)return;!function(e){!1!==u.enablePan&&0!=(p&d.PAN)&&(w.set(e.touches[0].pageX,e.touches[0].pageY),I.subVectors(w,C).multiplyScalar(u.panSpeed),j(I.x,I.y),C.copy(w))}(e),u.update();break;case 2:if(!1===u.enableZoom&&!1===u.enableRotate)return;if(0==(p&d.DOLLY_ROTATE))return;z(e),function(e){if(!1!==u.enableZoom&&0!=(p&d.DOLLY)){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);S.set(0,r),B.set(0,Math.pow(S.y/O.y,u.zoomSpeed)),G(B.y),O.copy(S)}}(e),u.update();break;default:p=d.NONE}}function te(e){!1!==u.enabled&&(u.dispatchEvent(c),p=d.NONE)}function ne(e){!1!==u.enabled&&e.preventDefault()}u.domElement.addEventListener("contextmenu",ne,!1),u.domElement.addEventListener("mousedown",V,!1),u.domElement.addEventListener("wheel",Z,!1),u.domElement.addEventListener("touchstart",$,!1),u.domElement.addEventListener("touchend",te,!1),u.domElement.addEventListener("touchmove",ee,!1),window.addEventListener("keydown",J,!1),this.update()};i.prototype=Object.create(r.q.prototype),i.prototype.constructor=i,Object.defineProperties(i.prototype,{center:{get:function(){return console.warn("THREE.MapControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.MapControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.MapControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.MapControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.MapControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.MapControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.MapControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.MapControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.MapControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.MapControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.MapControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.MapControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.MapControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}})},143:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(58),n(59),n(38),n(40),n(41),n(20),n(99),n(101),n(61),n(133),n(134),n(102),n(135);var r=n(0),i=n(144);var o=function(e){this.timeLoaded=0,this.manager=e||r.l,this.materials=null,this.verbosity=0,this.attributeOptions={},this.drawMode=r.ob,this.nativeAttributeMap={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"}};o.prototype={constructor:o,load:function(e,t,n,i){var o=this,a=new r.r(o.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.load(e,(function(e){o.decodeDracoFile(e,t)}),n,i)},setPath:function(e){return this.path=e,this},setVerbosity:function(e){return this.verbosity=e,this},setDrawMode:function(e){return this.drawMode=e,this},setSkipDequantization:function(e,t){var n=!0;return void 0!==t&&(n=t),this.getAttributeOptions(e).skipDequantization=n,this},decodeDracoFile:function(e,t,n,r){var i=this;o.getDecoderModule().then((function(o){i.decodeDracoFileInternal(e,o.decoder,t,n,r)}))},decodeDracoFileInternal:function(e,t,n,r,i){var o=new t.DecoderBuffer;o.Init(new Int8Array(e),e.byteLength);var a=new t.Decoder,s=a.GetEncodedGeometryType(o);if(s==t.TRIANGULAR_MESH)this.verbosity>0&&console.log("Loaded a mesh.");else{if(s!=t.POINT_CLOUD){var u="DRACOLoader: Unknown geometry type.";throw console.error(u),new Error(u)}this.verbosity>0&&console.log("Loaded a point cloud.")}n(this.convertDracoGeometryTo3JS(t,a,s,o,r,i))},addAttributeToGeometry:function(e,t,n,i,o,a,s,u){if(0===a.ptr){var l="DRACOLoader: No attribute "+i;throw console.error(l),new Error(l)}var _,c,d=a.num_components(),p=n.num_points()*d;switch(o){case Float32Array:_=new e.DracoFloat32Array,t.GetAttributeFloatForAllPoints(n,a,_),u[i]=new Float32Array(p),c=r.s;break;case Int8Array:_=new e.DracoInt8Array,t.GetAttributeInt8ForAllPoints(n,a,_),u[i]=new Int8Array(p),c=r.y;break;case Int16Array:_=new e.DracoInt16Array,t.GetAttributeInt16ForAllPoints(n,a,_),u[i]=new Int16Array(p),c=r.w;break;case Int32Array:_=new e.DracoInt32Array,t.GetAttributeInt32ForAllPoints(n,a,_),u[i]=new Int32Array(p),c=r.x;break;case Uint8Array:_=new e.DracoUInt8Array,t.GetAttributeUInt8ForAllPoints(n,a,_),u[i]=new Uint8Array(p),c=r.rb;break;case Uint16Array:_=new e.DracoUInt16Array,t.GetAttributeUInt16ForAllPoints(n,a,_),u[i]=new Uint16Array(p),c=r.pb;break;case Uint32Array:_=new e.DracoUInt32Array,t.GetAttributeUInt32ForAllPoints(n,a,_),u[i]=new Uint32Array(p),c=r.qb;break;default:l="DRACOLoader: Unexpected attribute type.";throw console.error(l),new Error(l)}for(var f=0;f<p;f++)u[i][f]=_.GetValue(f);s.addAttribute(i,new c(u[i],d)),e.destroy(_)},convertDracoGeometryTo3JS:function(e,t,n,i,o,a){var s,u;!0===this.getAttributeOptions("position").skipDequantization&&t.SkipAttributeTransform(e.POSITION);var l=performance.now();if(n===e.TRIANGULAR_MESH?(s=new e.Mesh,u=t.DecodeBufferToMesh(i,s)):(s=new e.PointCloud,u=t.DecodeBufferToPointCloud(i,s)),!u.ok()||0==s.ptr){var _="DRACOLoader: Decoding failed: ";throw _+=u.error_msg(),console.error(_),e.destroy(t),e.destroy(s),new Error(_)}var c,d=performance.now();e.destroy(i),n==e.TRIANGULAR_MESH?(c=s.num_faces(),this.verbosity>0&&console.log("Number of faces loaded: "+c.toString())):c=0;var p=s.num_points(),f=s.num_attributes();this.verbosity>0&&(console.log("Number of points loaded: "+p.toString()),console.log("Number of attributes loaded: "+f.toString()));var h=t.GetAttributeId(s,e.POSITION);if(-1==h){_="DRACOLoader: No position attribute found.";throw console.error(_),e.destroy(t),e.destroy(s),new Error(_)}var m=t.GetAttribute(s,h),A={},y=new r.g;if(o)for(var b in o){var v=a[b],g=o[b],E=t.GetAttributeByUniqueId(s,g);this.addAttributeToGeometry(e,t,s,b,v,E,y,A)}else for(var b in this.nativeAttributeMap){var F=t.GetAttributeId(s,e[this.nativeAttributeMap[b]]);if(-1!==F){this.verbosity>0&&console.log("Loaded "+b+" attribute.");E=t.GetAttribute(s,F);this.addAttributeToGeometry(e,t,s,b,Float32Array,E,y,A)}}if(n==e.TRIANGULAR_MESH)if(this.drawMode===r.nb){var T=new e.DracoInt32Array;t.GetTriangleStripsFromMesh(s,T),A.indices=new Uint32Array(T.size());for(var x=0;x<T.size();++x)A.indices[x]=T.GetValue(x);e.destroy(T)}else{var P=3*c;A.indices=new Uint32Array(P);var D=new e.DracoInt32Array;for(x=0;x<c;++x){t.GetFaceFromMesh(s,x,D);var C=3*x;A.indices[C]=D.GetValue(0),A.indices[C+1]=D.GetValue(1),A.indices[C+2]=D.GetValue(2)}e.destroy(D)}y.drawMode=this.drawMode,n==e.TRIANGULAR_MESH&&y.setIndex(new(A.indices.length>65535?r.qb:r.pb)(A.indices,1));var w=new e.AttributeQuantizationTransform;if(w.InitFromAttribute(m)){y.attributes.position.isQuantized=!0,y.attributes.position.maxRange=w.range(),y.attributes.position.numQuantizationBits=w.quantization_bits(),y.attributes.position.minValues=new Float32Array(3);for(x=0;x<3;++x)y.attributes.position.minValues[x]=w.min_value(x)}return e.destroy(w),e.destroy(t),e.destroy(s),this.decode_time=d-l,this.import_time=performance.now()-d,this.verbosity>0&&(console.log("Decode time: "+this.decode_time),console.log("Import time: "+this.import_time)),y},isVersionSupported:function(e,t){o.getDecoderModule().then((function(n){t(n.decoder.isVersionSupported(e))}))},getAttributeOptions:function(e){return void 0===this.attributeOptions[e]&&(this.attributeOptions[e]={}),this.attributeOptions[e]}},o.decoderPath="./",o.decoderConfig={},o.decoderModulePromise=null,o.setDecoderPath=function(e){o.decoderPath=e},o.setDecoderConfig=function(e){var t=o.decoderConfig.wasmBinary;o.decoderConfig=e||{},o.releaseDecoderModule(),t&&(o.decoderConfig.wasmBinary=t)},o.releaseDecoderModule=function(){o.decoderModulePromise=null},o.getDecoderModule=function(){var e=this,t=(o.decoderPath,o.decoderConfig),n=o.decoderModulePromise;return n||(n=(n=Promise.resolve()).then((function(){return new Promise((function(n){t.onModuleLoaded=function(t){e.timeLoaded=performance.now(),n({decoder:t})},Object(i.a)(t)}))})),o.decoderModulePromise=n,n)},o._loadScript=function(e){var t=document.getElementById("decoder_script");null!==t&&t.parentNode.removeChild(t);var n=document.getElementsByTagName("head")[0],r=document.createElement("script");return r.id="decoder_script",r.type="text/javascript",r.src=e,new Promise((function(e){r.onload=e,n.appendChild(r)}))},o._loadArrayBuffer=function(e){var t=new r.r;return t.setResponseType("arraybuffer"),new Promise((function(n,r){t.load(e,n,void 0,r)}))}},144:function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return o}));n(58),n(59),n(29),n(50),n(136),n(38),n(177),n(180),n(102),n(99),n(101),n(133),n(134),n(135),n(75),n(137),n(103),n(77),n(61),n(40),n(41),n(20),n(60);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=function(t){var o="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,a=void 0!==(t=t||{})?t:{},s=!1,u=!1;function l(e){if("string"!=typeof e)return!1;var t=e.split(".");return!(t.length<2||t.length>3)&&(1==t[0]&&t[1]>=0&&t[1]<=3||!(0!=t[0]||t[1]>10))}a.onRuntimeInitialized=function(){s=!0,u&&"function"==typeof a.onModuleLoaded&&a.onModuleLoaded(a)},a.onModuleParsed=function(){u=!0,s&&"function"==typeof a.onModuleLoaded&&a.onModuleLoaded(a)},a.isVersionSupported=l;var _,c={};for(_ in a)a.hasOwnProperty(_)&&(c[_]=a[_]);var d=[],p=!1,f=!1,h=!1,m=!1;p="object"===("undefined"==typeof window?"undefined":i(window)),f="function"==typeof importScripts,h="object"===(void 0===e?"undefined":i(e))&&"object"===i(e.versions)&&"string"==typeof e.versions.node&&!p&&!f,m=!p&&!h&&!f;var A,y,b,v,g="";function E(e){return a.locateFile?a.locateFile(e,g):g+e}h?(g=r+"/",A=function(e,t){var r;return b||(b=n(181)),v||(v=n(182)),e=v.normalize(e),r=b.readFileSync(e),t?r:r.toString()},y=function(e){var t=A(e,!0);return t.buffer||(t=new Uint8Array(t)),S(t.buffer),t},e.argv.length>1&&e.argv[1].replace(/\\/g,"/"),d=e.argv.slice(2),e.on("uncaughtException",(function(e){if(!(e instanceof fr))throw e})),e.on("unhandledRejection",mr),a.inspect=function(){return"[Emscripten Module object]"}):m?("undefined"!=typeof read&&(A=function(e){return read(e)}),y=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(S("object"===i(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs?d=scriptArgs:void 0!==arguments&&(d=arguments),"function"==typeof quit&&function(e){quit(e)},"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(p||f)&&(f?g=self.location.href:document.currentScript&&(g=document.currentScript.src),o&&(g=o),g=0!==g.indexOf("blob:")?g.substr(0,g.lastIndexOf("/")+1):"",A=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},f&&(y=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var F=a.print||console.log.bind(console),T=a.printErr||console.warn.bind(console);for(_ in c)c.hasOwnProperty(_)&&(a[_]=c[_]);c=null,a.arguments&&(d=a.arguments),a.thisProgram&&a.thisProgram,a.quit&&a.quit;var x={"f64-rem":function(e,t){return e%t},debugger:function(){}};new Array(0);var P,D,C=0,w=function(e){C=e},I=function(){return C};a.wasmBinary&&(P=a.wasmBinary),"object"!==("undefined"==typeof WebAssembly?"undefined":i(WebAssembly))&&T("no native wasm support detected");var O=!1;function S(e,t){e||mr("Assertion failed: "+t)}var B="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function L(e,t,n){for(var r=t+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.subarray&&B)return B.decode(e.subarray(t,i));for(var o="";t<i;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var u=63&e[t++];if((a=224==(240&a)?(15&a)<<12|s<<6|u:(7&a)<<18|s<<12|u<<6|63&e[t++])<65536)o+=String.fromCharCode(a);else{var l=a-65536;o+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else o+=String.fromCharCode((31&a)<<6|s)}else o+=String.fromCharCode(a)}return o}function M(e,t){return e?L(j,e,t):""}function R(e,t,n,r){if(!(r>0))return 0;for(var i=n,o=n+r-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343)s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a);if(s<=127){if(n>=o)break;t[n++]=s}else if(s<=2047){if(n+1>=o)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=o)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=o)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-i}function N(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var U,k,j,G,X=65536;function Q(e,t){return e%t>0&&(e+=t-e%t),e}function z(){a.HEAP8=k=new Int8Array(U),a.HEAP16=new Int16Array(U),a.HEAP32=G=new Int32Array(U),a.HEAPU8=j=new Uint8Array(U),a.HEAPU16=new Uint16Array(U),a.HEAPU32=new Uint32Array(U),a.HEAPF32=new Float32Array(U),a.HEAPF64=new Float64Array(U)}var Y=5261536,W=18624,H=a.TOTAL_MEMORY||16777216;function V(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?a.dynCall_v(n):a.dynCall_vi(n,t.arg):n(void 0===t.arg?null:t.arg)}else t()}}(D=a.wasmMemory?a.wasmMemory:new WebAssembly.Memory({initial:H/X}))&&(U=D.buffer),H=U.byteLength,z(),G[W>>2]=Y;var K=[],q=[],Z=[],J=[],$=!1;function ee(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)ie(a.preRun.shift());V(K)}function te(){$=!0,V(q)}function ne(){V(Z)}function re(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)ae(a.postRun.shift());V(J)}function ie(e){K.unshift(e)}function oe(e){Z.unshift(e)}function ae(e){J.unshift(e)}Math.abs,Math.ceil,Math.floor,Math.min;var se=0,ue=null,le=null;function _e(e){se++,a.monitorRunDependencies&&a.monitorRunDependencies(se)}function ce(e){if(se--,a.monitorRunDependencies&&a.monitorRunDependencies(se),0==se&&(null!==ue&&(clearInterval(ue),ue=null),le)){var t=le;le=null,t()}}a.preloadedImages={},a.preloadedAudios={};var de="data:application/octet-stream;base64,";function pe(e){return"".startsWith?e.startsWith(de):0===e.indexOf(de)}var fe="static/DGene.bat";function he(){try{if(P)return new Uint8Array(P);if(y)return y(fe);throw"both async and sync fetching of the wasm failed"}catch(e){mr(e)}}function me(){return P||!p&&!f||"function"!=typeof fetch?new Promise((function(e,t){e(he())})):fetch(fe,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+fe+"'";return e.arrayBuffer()})).catch((function(){return he()}))}function Ae(e){var t={env:e,global:{NaN:NaN,Infinity:1/0},"global.Math":Math,asm2wasm:x};function n(e,t){var n=e.exports;a.asm=n,ce()}function r(e){n(e.instance)}function i(e){return me().then((function(e){return WebAssembly.instantiate(e,t)})).then(e,(function(e){T("failed to asynchronously prepare wasm: "+e),mr(e)}))}if(_e(),a.instantiateWasm)try{return a.instantiateWasm(t,n)}catch(e){return T("Module.instantiateWasm callback failed with error: "+e),!1}return function(){if(P||"function"!=typeof WebAssembly.instantiateStreaming||pe(fe)||"function"!=typeof fetch)return i(r);fetch(fe,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,t).then(r,(function(e){T("wasm streaming compile failed: "+e),T("falling back to ArrayBuffer instantiation"),i(r)}))}))}(),{}}pe(fe)||(fe=E(fe)),a.asm=function(e,t,n){return t.memory=D,t.table=new WebAssembly.Table({initial:494,maximum:494,element:"anyfunc"}),t.__memory_base=1024,t.__table_base=0,Ae(t)};var ye=18640;function be(e){return e}function ve(e){return e.replace(/\b__Z[\w\d_]+/g,(function(e){return e===e?e:e+" ["+e+"]"}))}function ge(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function Ee(){var e=ge();return a.extraStackTrace&&(e+="\n"+a.extraStackTrace()),ve(e)}function Fe(e){return pr(e)}function Te(){throw O=!0,"Pure virtual function called!"}var xe={};function Pe(e,t,n){throw xe[e]={ptr:e,adjusted:[e],type:t,destructor:n,refcount:0,caught:!1,rethrown:!1},e,"uncaught_exception"in Ve?Ve.uncaught_exceptions++:Ve.uncaught_exceptions=1,e}function De(){return Ve.uncaught_exceptions}function Ce(){}var we={buffers:[null,[],[]],printChar:function(e,t){var n=we.buffers[e];0===t||10===t?((1===e?F:T)(L(n,0)),n.length=0):n.push(t)},varargs:0,get:function(e){return we.varargs+=4,G[we.varargs-4>>2]},getStr:function(){return M(we.get())},get64:function(){var e=we.get();we.get();return e},getZero:function(){we.get()}};function Ie(e,t){we.varargs=t;try{we.getStreamFromFD(),we.get(),we.get(),we.get(),we.get();return 0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||mr(e),-e.errno}}function Oe(){var e=a._fflush;e&&e(0);var t=we.buffers;t[1].length&&we.printChar(1,10),t[2].length&&we.printChar(2,10)}function Se(e,t){we.varargs=t;try{for(var n=we.get(),r=we.get(),i=we.get(),o=0,a=0;a<i;a++){for(var s=G[r+8*a>>2],u=G[r+(8*a+4)>>2],l=0;l<u;l++)we.printChar(n,j[s+l]);o+=u}return o}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||mr(e),-e.errno}}function Be(e,t){we.varargs=t;try{return 0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||mr(e),-e.errno}}function Le(e,t){we.varargs=t;try{we.getStreamFromFD();return 0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||mr(e),-e.errno}}function Me(){a.abort()}function Re(){return k.length}function Ne(){mr("trap!")}function Ue(e,t,n){j.set(j.subarray(t,t+n),e)}function ke(e){return a.___errno_location&&(G[a.___errno_location()>>2]=e),e}function je(e){mr("OOM")}function Ge(e){e=Q(e,65536);var t=U.byteLength;try{return-1!==D.grow((e-t)/65536)&&(U=D.buffer,!0)}catch(e){return!1}}function Xe(e){var t=Re();if(e>2147418112)return!1;for(var n=Math.max(t,16777216);n<e;)n=n<=536870912?Q(2*n,65536):Math.min(Q((3*n+2147483648)/4,65536),2147418112);return!!Ge(n)&&(z(),!0)}function Qe(e,t,n){var r=n>0?n:N(e)+1,i=new Array(r),o=R(e,i,0,i.length);return t&&(i.length=o),i}var ze={},Ye={abort:mr,setTempRet0:w,getTempRet0:I,___cxa_allocate_exception:Fe,___cxa_pure_virtual:Te,___cxa_throw:Pe,___cxa_uncaught_exceptions:De,___gxx_personality_v0:Ce,___setErrNo:ke,___syscall140:Ie,___syscall146:Se,___syscall54:Be,___syscall6:Le,_abort:Me,_emscripten_get_heap_size:Re,_emscripten_memcpy_big:Ue,_emscripten_resize_heap:Xe,_llvm_trap:Ne,abortOnCannotGrowMemory:je,demangle:be,demangleAll:ve,emscripten_realloc_buffer:Ge,flush_NO_FILESYSTEM:Oe,jsStackTrace:ge,stackTrace:Ee,tempDoublePtr:ye,DYNAMICTOP_PTR:W},We=a.asm(ze,Ye,U);a.asm=We;var He,Ve=a.__ZSt18uncaught_exceptionv=function(){return a.asm.__ZSt18uncaught_exceptionv.apply(null,arguments)},Ke=(a.___cxa_can_catch=function(){return a.asm.___cxa_can_catch.apply(null,arguments)},a.___cxa_is_pointer_type=function(){return a.asm.___cxa_is_pointer_type.apply(null,arguments)},a._emscripten_bind_AttributeOctahedronTransform_AttributeOctahedronTransform_0=function(){return a.asm._emscripten_bind_AttributeOctahedronTransform_AttributeOctahedronTransform_0.apply(null,arguments)}),qe=a._emscripten_bind_AttributeOctahedronTransform_InitFromAttribute_1=function(){return a.asm._emscripten_bind_AttributeOctahedronTransform_InitFromAttribute_1.apply(null,arguments)},Ze=a._emscripten_bind_AttributeOctahedronTransform___destroy___0=function(){return a.asm._emscripten_bind_AttributeOctahedronTransform___destroy___0.apply(null,arguments)},Je=a._emscripten_bind_AttributeOctahedronTransform_quantization_bits_0=function(){return a.asm._emscripten_bind_AttributeOctahedronTransform_quantization_bits_0.apply(null,arguments)},$e=a._emscripten_bind_AttributeQuantizationTransform_AttributeQuantizationTransform_0=function(){return a.asm._emscripten_bind_AttributeQuantizationTransform_AttributeQuantizationTransform_0.apply(null,arguments)},et=a._emscripten_bind_AttributeQuantizationTransform_InitFromAttribute_1=function(){return a.asm._emscripten_bind_AttributeQuantizationTransform_InitFromAttribute_1.apply(null,arguments)},tt=a._emscripten_bind_AttributeQuantizationTransform___destroy___0=function(){return a.asm._emscripten_bind_AttributeQuantizationTransform___destroy___0.apply(null,arguments)},nt=a._emscripten_bind_AttributeQuantizationTransform_min_value_1=function(){return a.asm._emscripten_bind_AttributeQuantizationTransform_min_value_1.apply(null,arguments)},rt=a._emscripten_bind_AttributeQuantizationTransform_quantization_bits_0=function(){return a.asm._emscripten_bind_AttributeQuantizationTransform_quantization_bits_0.apply(null,arguments)},it=a._emscripten_bind_AttributeQuantizationTransform_range_0=function(){return a.asm._emscripten_bind_AttributeQuantizationTransform_range_0.apply(null,arguments)},ot=a._emscripten_bind_AttributeTransformData_AttributeTransformData_0=function(){return a.asm._emscripten_bind_AttributeTransformData_AttributeTransformData_0.apply(null,arguments)},at=a._emscripten_bind_AttributeTransformData___destroy___0=function(){return a.asm._emscripten_bind_AttributeTransformData___destroy___0.apply(null,arguments)},st=a._emscripten_bind_AttributeTransformData_transform_type_0=function(){return a.asm._emscripten_bind_AttributeTransformData_transform_type_0.apply(null,arguments)},ut=a._emscripten_bind_DecoderBuffer_DecoderBuffer_0=function(){return a.asm._emscripten_bind_DecoderBuffer_DecoderBuffer_0.apply(null,arguments)},lt=a._emscripten_bind_DecoderBuffer_Init_2=function(){return a.asm._emscripten_bind_DecoderBuffer_Init_2.apply(null,arguments)},_t=a._emscripten_bind_DecoderBuffer___destroy___0=function(){return a.asm._emscripten_bind_DecoderBuffer___destroy___0.apply(null,arguments)},ct=a._emscripten_bind_Decoder_DecodeBufferToMesh_2=function(){return a.asm._emscripten_bind_Decoder_DecodeBufferToMesh_2.apply(null,arguments)},dt=a._emscripten_bind_Decoder_DecodeBufferToPointCloud_2=function(){return a.asm._emscripten_bind_Decoder_DecodeBufferToPointCloud_2.apply(null,arguments)},pt=a._emscripten_bind_Decoder_Decoder_0=function(){return a.asm._emscripten_bind_Decoder_Decoder_0.apply(null,arguments)},ft=a._emscripten_bind_Decoder_GetAttributeByUniqueId_2=function(){return a.asm._emscripten_bind_Decoder_GetAttributeByUniqueId_2.apply(null,arguments)},ht=a._emscripten_bind_Decoder_GetAttributeFloatForAllPoints_3=function(){return a.asm._emscripten_bind_Decoder_GetAttributeFloatForAllPoints_3.apply(null,arguments)},mt=a._emscripten_bind_Decoder_GetAttributeFloat_3=function(){return a.asm._emscripten_bind_Decoder_GetAttributeFloat_3.apply(null,arguments)},At=a._emscripten_bind_Decoder_GetAttributeIdByMetadataEntry_3=function(){return a.asm._emscripten_bind_Decoder_GetAttributeIdByMetadataEntry_3.apply(null,arguments)},yt=a._emscripten_bind_Decoder_GetAttributeIdByName_2=function(){return a.asm._emscripten_bind_Decoder_GetAttributeIdByName_2.apply(null,arguments)},bt=a._emscripten_bind_Decoder_GetAttributeId_2=function(){return a.asm._emscripten_bind_Decoder_GetAttributeId_2.apply(null,arguments)},vt=a._emscripten_bind_Decoder_GetAttributeInt16ForAllPoints_3=function(){return a.asm._emscripten_bind_Decoder_GetAttributeInt16ForAllPoints_3.apply(null,arguments)},gt=a._emscripten_bind_Decoder_GetAttributeInt32ForAllPoints_3=function(){return a.asm._emscripten_bind_Decoder_GetAttributeInt32ForAllPoints_3.apply(null,arguments)},Et=a._emscripten_bind_Decoder_GetAttributeInt8ForAllPoints_3=function(){return a.asm._emscripten_bind_Decoder_GetAttributeInt8ForAllPoints_3.apply(null,arguments)},Ft=a._emscripten_bind_Decoder_GetAttributeIntForAllPoints_3=function(){return a.asm._emscripten_bind_Decoder_GetAttributeIntForAllPoints_3.apply(null,arguments)},Tt=a._emscripten_bind_Decoder_GetAttributeMetadata_2=function(){return a.asm._emscripten_bind_Decoder_GetAttributeMetadata_2.apply(null,arguments)},xt=a._emscripten_bind_Decoder_GetAttributeUInt16ForAllPoints_3=function(){return a.asm._emscripten_bind_Decoder_GetAttributeUInt16ForAllPoints_3.apply(null,arguments)},Pt=a._emscripten_bind_Decoder_GetAttributeUInt32ForAllPoints_3=function(){return a.asm._emscripten_bind_Decoder_GetAttributeUInt32ForAllPoints_3.apply(null,arguments)},Dt=a._emscripten_bind_Decoder_GetAttributeUInt8ForAllPoints_3=function(){return a.asm._emscripten_bind_Decoder_GetAttributeUInt8ForAllPoints_3.apply(null,arguments)},Ct=a._emscripten_bind_Decoder_GetAttribute_2=function(){return a.asm._emscripten_bind_Decoder_GetAttribute_2.apply(null,arguments)},wt=a._emscripten_bind_Decoder_GetEncodedGeometryType_1=function(){return a.asm._emscripten_bind_Decoder_GetEncodedGeometryType_1.apply(null,arguments)},It=a._emscripten_bind_Decoder_GetFaceFromMesh_3=function(){return a.asm._emscripten_bind_Decoder_GetFaceFromMesh_3.apply(null,arguments)},Ot=a._emscripten_bind_Decoder_GetMetadata_1=function(){return a.asm._emscripten_bind_Decoder_GetMetadata_1.apply(null,arguments)},St=a._emscripten_bind_Decoder_GetTriangleStripsFromMesh_2=function(){return a.asm._emscripten_bind_Decoder_GetTriangleStripsFromMesh_2.apply(null,arguments)},Bt=a._emscripten_bind_Decoder_SkipAttributeTransform_1=function(){return a.asm._emscripten_bind_Decoder_SkipAttributeTransform_1.apply(null,arguments)},Lt=a._emscripten_bind_Decoder___destroy___0=function(){return a.asm._emscripten_bind_Decoder___destroy___0.apply(null,arguments)},Mt=a._emscripten_bind_DracoFloat32Array_DracoFloat32Array_0=function(){return a.asm._emscripten_bind_DracoFloat32Array_DracoFloat32Array_0.apply(null,arguments)},Rt=a._emscripten_bind_DracoFloat32Array_GetValue_1=function(){return a.asm._emscripten_bind_DracoFloat32Array_GetValue_1.apply(null,arguments)},Nt=a._emscripten_bind_DracoFloat32Array___destroy___0=function(){return a.asm._emscripten_bind_DracoFloat32Array___destroy___0.apply(null,arguments)},Ut=a._emscripten_bind_DracoFloat32Array_size_0=function(){return a.asm._emscripten_bind_DracoFloat32Array_size_0.apply(null,arguments)},kt=a._emscripten_bind_DracoInt16Array_DracoInt16Array_0=function(){return a.asm._emscripten_bind_DracoInt16Array_DracoInt16Array_0.apply(null,arguments)},jt=a._emscripten_bind_DracoInt16Array_GetValue_1=function(){return a.asm._emscripten_bind_DracoInt16Array_GetValue_1.apply(null,arguments)},Gt=a._emscripten_bind_DracoInt16Array___destroy___0=function(){return a.asm._emscripten_bind_DracoInt16Array___destroy___0.apply(null,arguments)},Xt=a._emscripten_bind_DracoInt16Array_size_0=function(){return a.asm._emscripten_bind_DracoInt16Array_size_0.apply(null,arguments)},Qt=a._emscripten_bind_DracoInt32Array_DracoInt32Array_0=function(){return a.asm._emscripten_bind_DracoInt32Array_DracoInt32Array_0.apply(null,arguments)},zt=a._emscripten_bind_DracoInt32Array_GetValue_1=function(){return a.asm._emscripten_bind_DracoInt32Array_GetValue_1.apply(null,arguments)},Yt=a._emscripten_bind_DracoInt32Array___destroy___0=function(){return a.asm._emscripten_bind_DracoInt32Array___destroy___0.apply(null,arguments)},Wt=a._emscripten_bind_DracoInt32Array_size_0=function(){return a.asm._emscripten_bind_DracoInt32Array_size_0.apply(null,arguments)},Ht=a._emscripten_bind_DracoInt8Array_DracoInt8Array_0=function(){return a.asm._emscripten_bind_DracoInt8Array_DracoInt8Array_0.apply(null,arguments)},Vt=a._emscripten_bind_DracoInt8Array_GetValue_1=function(){return a.asm._emscripten_bind_DracoInt8Array_GetValue_1.apply(null,arguments)},Kt=a._emscripten_bind_DracoInt8Array___destroy___0=function(){return a.asm._emscripten_bind_DracoInt8Array___destroy___0.apply(null,arguments)},qt=a._emscripten_bind_DracoInt8Array_size_0=function(){return a.asm._emscripten_bind_DracoInt8Array_size_0.apply(null,arguments)},Zt=a._emscripten_bind_DracoUInt16Array_DracoUInt16Array_0=function(){return a.asm._emscripten_bind_DracoUInt16Array_DracoUInt16Array_0.apply(null,arguments)},Jt=a._emscripten_bind_DracoUInt16Array_GetValue_1=function(){return a.asm._emscripten_bind_DracoUInt16Array_GetValue_1.apply(null,arguments)},$t=a._emscripten_bind_DracoUInt16Array___destroy___0=function(){return a.asm._emscripten_bind_DracoUInt16Array___destroy___0.apply(null,arguments)},en=a._emscripten_bind_DracoUInt16Array_size_0=function(){return a.asm._emscripten_bind_DracoUInt16Array_size_0.apply(null,arguments)},tn=a._emscripten_bind_DracoUInt32Array_DracoUInt32Array_0=function(){return a.asm._emscripten_bind_DracoUInt32Array_DracoUInt32Array_0.apply(null,arguments)},nn=a._emscripten_bind_DracoUInt32Array_GetValue_1=function(){return a.asm._emscripten_bind_DracoUInt32Array_GetValue_1.apply(null,arguments)},rn=a._emscripten_bind_DracoUInt32Array___destroy___0=function(){return a.asm._emscripten_bind_DracoUInt32Array___destroy___0.apply(null,arguments)},on=a._emscripten_bind_DracoUInt32Array_size_0=function(){return a.asm._emscripten_bind_DracoUInt32Array_size_0.apply(null,arguments)},an=a._emscripten_bind_DracoUInt8Array_DracoUInt8Array_0=function(){return a.asm._emscripten_bind_DracoUInt8Array_DracoUInt8Array_0.apply(null,arguments)},sn=a._emscripten_bind_DracoUInt8Array_GetValue_1=function(){return a.asm._emscripten_bind_DracoUInt8Array_GetValue_1.apply(null,arguments)},un=a._emscripten_bind_DracoUInt8Array___destroy___0=function(){return a.asm._emscripten_bind_DracoUInt8Array___destroy___0.apply(null,arguments)},ln=a._emscripten_bind_DracoUInt8Array_size_0=function(){return a.asm._emscripten_bind_DracoUInt8Array_size_0.apply(null,arguments)},_n=a._emscripten_bind_GeometryAttribute_GeometryAttribute_0=function(){return a.asm._emscripten_bind_GeometryAttribute_GeometryAttribute_0.apply(null,arguments)},cn=a._emscripten_bind_GeometryAttribute___destroy___0=function(){return a.asm._emscripten_bind_GeometryAttribute___destroy___0.apply(null,arguments)},dn=a._emscripten_bind_Mesh_Mesh_0=function(){return a.asm._emscripten_bind_Mesh_Mesh_0.apply(null,arguments)},pn=a._emscripten_bind_Mesh___destroy___0=function(){return a.asm._emscripten_bind_Mesh___destroy___0.apply(null,arguments)},fn=a._emscripten_bind_Mesh_num_attributes_0=function(){return a.asm._emscripten_bind_Mesh_num_attributes_0.apply(null,arguments)},hn=a._emscripten_bind_Mesh_num_faces_0=function(){return a.asm._emscripten_bind_Mesh_num_faces_0.apply(null,arguments)},mn=a._emscripten_bind_Mesh_num_points_0=function(){return a.asm._emscripten_bind_Mesh_num_points_0.apply(null,arguments)},An=a._emscripten_bind_MetadataQuerier_GetDoubleEntry_2=function(){return a.asm._emscripten_bind_MetadataQuerier_GetDoubleEntry_2.apply(null,arguments)},yn=a._emscripten_bind_MetadataQuerier_GetEntryName_2=function(){return a.asm._emscripten_bind_MetadataQuerier_GetEntryName_2.apply(null,arguments)},bn=a._emscripten_bind_MetadataQuerier_GetIntEntryArray_3=function(){return a.asm._emscripten_bind_MetadataQuerier_GetIntEntryArray_3.apply(null,arguments)},vn=a._emscripten_bind_MetadataQuerier_GetIntEntry_2=function(){return a.asm._emscripten_bind_MetadataQuerier_GetIntEntry_2.apply(null,arguments)},gn=a._emscripten_bind_MetadataQuerier_GetStringEntry_2=function(){return a.asm._emscripten_bind_MetadataQuerier_GetStringEntry_2.apply(null,arguments)},En=a._emscripten_bind_MetadataQuerier_HasEntry_2=function(){return a.asm._emscripten_bind_MetadataQuerier_HasEntry_2.apply(null,arguments)},Fn=a._emscripten_bind_MetadataQuerier_MetadataQuerier_0=function(){return a.asm._emscripten_bind_MetadataQuerier_MetadataQuerier_0.apply(null,arguments)},Tn=a._emscripten_bind_MetadataQuerier_NumEntries_1=function(){return a.asm._emscripten_bind_MetadataQuerier_NumEntries_1.apply(null,arguments)},xn=a._emscripten_bind_MetadataQuerier___destroy___0=function(){return a.asm._emscripten_bind_MetadataQuerier___destroy___0.apply(null,arguments)},Pn=a._emscripten_bind_Metadata_Metadata_0=function(){return a.asm._emscripten_bind_Metadata_Metadata_0.apply(null,arguments)},Dn=a._emscripten_bind_Metadata___destroy___0=function(){return a.asm._emscripten_bind_Metadata___destroy___0.apply(null,arguments)},Cn=a._emscripten_bind_PointAttribute_GetAttributeTransformData_0=function(){return a.asm._emscripten_bind_PointAttribute_GetAttributeTransformData_0.apply(null,arguments)},wn=a._emscripten_bind_PointAttribute_PointAttribute_0=function(){return a.asm._emscripten_bind_PointAttribute_PointAttribute_0.apply(null,arguments)},In=a._emscripten_bind_PointAttribute___destroy___0=function(){return a.asm._emscripten_bind_PointAttribute___destroy___0.apply(null,arguments)},On=a._emscripten_bind_PointAttribute_attribute_type_0=function(){return a.asm._emscripten_bind_PointAttribute_attribute_type_0.apply(null,arguments)},Sn=a._emscripten_bind_PointAttribute_byte_offset_0=function(){return a.asm._emscripten_bind_PointAttribute_byte_offset_0.apply(null,arguments)},Bn=a._emscripten_bind_PointAttribute_byte_stride_0=function(){return a.asm._emscripten_bind_PointAttribute_byte_stride_0.apply(null,arguments)},Ln=a._emscripten_bind_PointAttribute_data_type_0=function(){return a.asm._emscripten_bind_PointAttribute_data_type_0.apply(null,arguments)},Mn=a._emscripten_bind_PointAttribute_normalized_0=function(){return a.asm._emscripten_bind_PointAttribute_normalized_0.apply(null,arguments)},Rn=a._emscripten_bind_PointAttribute_num_components_0=function(){return a.asm._emscripten_bind_PointAttribute_num_components_0.apply(null,arguments)},Nn=a._emscripten_bind_PointAttribute_size_0=function(){return a.asm._emscripten_bind_PointAttribute_size_0.apply(null,arguments)},Un=a._emscripten_bind_PointAttribute_unique_id_0=function(){return a.asm._emscripten_bind_PointAttribute_unique_id_0.apply(null,arguments)},kn=a._emscripten_bind_PointCloud_PointCloud_0=function(){return a.asm._emscripten_bind_PointCloud_PointCloud_0.apply(null,arguments)},jn=a._emscripten_bind_PointCloud___destroy___0=function(){return a.asm._emscripten_bind_PointCloud___destroy___0.apply(null,arguments)},Gn=a._emscripten_bind_PointCloud_num_attributes_0=function(){return a.asm._emscripten_bind_PointCloud_num_attributes_0.apply(null,arguments)},Xn=a._emscripten_bind_PointCloud_num_points_0=function(){return a.asm._emscripten_bind_PointCloud_num_points_0.apply(null,arguments)},Qn=a._emscripten_bind_Status___destroy___0=function(){return a.asm._emscripten_bind_Status___destroy___0.apply(null,arguments)},zn=a._emscripten_bind_Status_code_0=function(){return a.asm._emscripten_bind_Status_code_0.apply(null,arguments)},Yn=a._emscripten_bind_Status_error_msg_0=function(){return a.asm._emscripten_bind_Status_error_msg_0.apply(null,arguments)},Wn=a._emscripten_bind_Status_ok_0=function(){return a.asm._emscripten_bind_Status_ok_0.apply(null,arguments)},Hn=a._emscripten_bind_VoidPtr___destroy___0=function(){return a.asm._emscripten_bind_VoidPtr___destroy___0.apply(null,arguments)},Vn=a._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_INVALID_TRANSFORM=function(){return a.asm._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_INVALID_TRANSFORM.apply(null,arguments)},Kn=a._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_NO_TRANSFORM=function(){return a.asm._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_NO_TRANSFORM.apply(null,arguments)},qn=a._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_OCTAHEDRON_TRANSFORM=function(){return a.asm._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_OCTAHEDRON_TRANSFORM.apply(null,arguments)},Zn=a._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_QUANTIZATION_TRANSFORM=function(){return a.asm._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_QUANTIZATION_TRANSFORM.apply(null,arguments)},Jn=a._emscripten_enum_draco_EncodedGeometryType_INVALID_GEOMETRY_TYPE=function(){return a.asm._emscripten_enum_draco_EncodedGeometryType_INVALID_GEOMETRY_TYPE.apply(null,arguments)},$n=a._emscripten_enum_draco_EncodedGeometryType_POINT_CLOUD=function(){return a.asm._emscripten_enum_draco_EncodedGeometryType_POINT_CLOUD.apply(null,arguments)},er=a._emscripten_enum_draco_EncodedGeometryType_TRIANGULAR_MESH=function(){return a.asm._emscripten_enum_draco_EncodedGeometryType_TRIANGULAR_MESH.apply(null,arguments)},tr=a._emscripten_enum_draco_GeometryAttribute_Type_COLOR=function(){return a.asm._emscripten_enum_draco_GeometryAttribute_Type_COLOR.apply(null,arguments)},nr=a._emscripten_enum_draco_GeometryAttribute_Type_GENERIC=function(){return a.asm._emscripten_enum_draco_GeometryAttribute_Type_GENERIC.apply(null,arguments)},rr=a._emscripten_enum_draco_GeometryAttribute_Type_INVALID=function(){return a.asm._emscripten_enum_draco_GeometryAttribute_Type_INVALID.apply(null,arguments)},ir=a._emscripten_enum_draco_GeometryAttribute_Type_NORMAL=function(){return a.asm._emscripten_enum_draco_GeometryAttribute_Type_NORMAL.apply(null,arguments)},or=a._emscripten_enum_draco_GeometryAttribute_Type_POSITION=function(){return a.asm._emscripten_enum_draco_GeometryAttribute_Type_POSITION.apply(null,arguments)},ar=a._emscripten_enum_draco_GeometryAttribute_Type_TEX_COORD=function(){return a.asm._emscripten_enum_draco_GeometryAttribute_Type_TEX_COORD.apply(null,arguments)},sr=a._emscripten_enum_draco_StatusCode_DRACO_ERROR=function(){return a.asm._emscripten_enum_draco_StatusCode_DRACO_ERROR.apply(null,arguments)},ur=a._emscripten_enum_draco_StatusCode_INVALID_PARAMETER=function(){return a.asm._emscripten_enum_draco_StatusCode_INVALID_PARAMETER.apply(null,arguments)},lr=a._emscripten_enum_draco_StatusCode_IO_ERROR=function(){return a.asm._emscripten_enum_draco_StatusCode_IO_ERROR.apply(null,arguments)},_r=a._emscripten_enum_draco_StatusCode_OK=function(){return a.asm._emscripten_enum_draco_StatusCode_OK.apply(null,arguments)},cr=a._emscripten_enum_draco_StatusCode_UNKNOWN_VERSION=function(){return a.asm._emscripten_enum_draco_StatusCode_UNKNOWN_VERSION.apply(null,arguments)},dr=a._emscripten_enum_draco_StatusCode_UNSUPPORTED_VERSION=function(){return a.asm._emscripten_enum_draco_StatusCode_UNSUPPORTED_VERSION.apply(null,arguments)},pr=(a._emscripten_replace_memory=function(){return a.asm._emscripten_replace_memory.apply(null,arguments)},a._free=function(){return a.asm._free.apply(null,arguments)},a._malloc=function(){return a.asm._malloc.apply(null,arguments)});a._memcpy=function(){return a.asm._memcpy.apply(null,arguments)},a._memmove=function(){return a.asm._memmove.apply(null,arguments)},a._memset=function(){return a.asm._memset.apply(null,arguments)},a._sbrk=function(){return a.asm._sbrk.apply(null,arguments)},a.establishStackSpace=function(){return a.asm.establishStackSpace.apply(null,arguments)},a.stackAlloc=function(){return a.asm.stackAlloc.apply(null,arguments)},a.stackRestore=function(){return a.asm.stackRestore.apply(null,arguments)},a.stackSave=function(){return a.asm.stackSave.apply(null,arguments)},a.dynCall_ii=function(){return a.asm.dynCall_ii.apply(null,arguments)},a.dynCall_iidiiii=function(){return a.asm.dynCall_iidiiii.apply(null,arguments)},a.dynCall_iii=function(){return a.asm.dynCall_iii.apply(null,arguments)},a.dynCall_iiii=function(){return a.asm.dynCall_iiii.apply(null,arguments)},a.dynCall_iiiiiii=function(){return a.asm.dynCall_iiiiiii.apply(null,arguments)},a.dynCall_jiji=function(){return a.asm.dynCall_jiji.apply(null,arguments)},a.dynCall_v=function(){return a.asm.dynCall_v.apply(null,arguments)},a.dynCall_vi=function(){return a.asm.dynCall_vi.apply(null,arguments)},a.dynCall_vii=function(){return a.asm.dynCall_vii.apply(null,arguments)},a.dynCall_viii=function(){return a.asm.dynCall_viii.apply(null,arguments)},a.dynCall_viiii=function(){return a.asm.dynCall_viiii.apply(null,arguments)},a.dynCall_viiiii=function(){return a.asm.dynCall_viiiii.apply(null,arguments)},a.dynCall_viiiiii=function(){return a.asm.dynCall_viiiiii.apply(null,arguments)};function fr(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function hr(e){function t(){He||(He=!0,O||(te(),ne(),a.onRuntimeInitialized&&a.onRuntimeInitialized(),re()))}e=e||d,se>0||(ee(),se>0||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),t()}),1)):t()))}function mr(e){throw a.onAbort&&a.onAbort(e),F(e+=""),T(e),O=!0,1,"abort("+e+"). Build with -s ASSERTIONS=1 for more info."}if(a.asm=We,a.then=function(e){if(He)e(a);else{var t=a.onRuntimeInitialized;a.onRuntimeInitialized=function(){t&&t(),e(a)}}return a},le=function e(){He||hr(),He||(le=e)},a.run=hr,a.abort=mr,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();function Ar(){}function yr(e){return(e||Ar).__cache__}function br(e,t){var n=yr(t),r=n[e];return r||((r=Object.create((t||Ar).prototype)).ptr=e,n[e]=r)}function vr(e,t){return br(e.ptr,t)}function gr(e){if(!e.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";e.__destroy__(),delete yr(e.__class__)[e.ptr]}function Er(e,t){return e.ptr===t.ptr}function Fr(e){return e.ptr}function Tr(e){return e.__class__}a.noExitRuntime=!0,hr(),Ar.prototype=Object.create(Ar.prototype),Ar.prototype.constructor=Ar,Ar.prototype.__class__=Ar,Ar.__cache__={},a.WrapperObject=Ar,a.getCache=yr,a.wrapPointer=br,a.castObject=vr,a.NULL=br(0),a.destroy=gr,a.compare=Er,a.getPointer=Fr,a.getClass=Tr;var xr={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(xr.needed){for(var e=0;e<xr.temps.length;e++)a._free(xr.temps[e]);xr.temps.length=0,a._free(xr.buffer),xr.buffer=0,xr.size+=xr.needed,xr.needed=0}xr.buffer||(xr.size+=128,xr.buffer=a._malloc(xr.size),S(xr.buffer)),xr.pos=0},alloc:function(e,t){S(xr.buffer);var n,r=t.BYTES_PER_ELEMENT,i=e.length*r;return i=i+7&-8,xr.pos+i>=xr.size?(S(i>0),xr.needed+=i,n=a._malloc(i),xr.temps.push(n)):(n=xr.buffer+xr.pos,xr.pos+=i),n},copy:function(e,t,n){var r=n;switch(t.BYTES_PER_ELEMENT){case 2:r>>=1;break;case 4:r>>=2;break;case 8:r>>=3}for(var i=0;i<e.length;i++)t[r+i]=e[i]}};function Pr(e){if("string"==typeof e){var t=Qe(e),n=xr.alloc(t,k);return xr.copy(t,k,n),n}return e}function Dr(e){if("object"===i(e)){var t=xr.alloc(e,k);return xr.copy(e,k,t),t}return e}function Cr(){throw"cannot construct a Status, no constructor in IDL"}function wr(){this.ptr=Zt(),yr(wr)[this.ptr]=this}function Ir(){this.ptr=kn(),yr(Ir)[this.ptr]=this}function Or(){this.ptr=an(),yr(Or)[this.ptr]=this}function Sr(){this.ptr=tn(),yr(Sr)[this.ptr]=this}function Br(){this.ptr=Ke(),yr(Br)[this.ptr]=this}function Lr(){this.ptr=wn(),yr(Lr)[this.ptr]=this}function Mr(){this.ptr=ot(),yr(Mr)[this.ptr]=this}function Rr(){this.ptr=$e(),yr(Rr)[this.ptr]=this}function Nr(){this.ptr=Ht(),yr(Nr)[this.ptr]=this}function Ur(){this.ptr=Fn(),yr(Ur)[this.ptr]=this}function kr(){this.ptr=kt(),yr(kr)[this.ptr]=this}function jr(){this.ptr=Mt(),yr(jr)[this.ptr]=this}function Gr(){this.ptr=_n(),yr(Gr)[this.ptr]=this}function Xr(){this.ptr=ut(),yr(Xr)[this.ptr]=this}function Qr(){this.ptr=pt(),yr(Qr)[this.ptr]=this}function zr(){this.ptr=dn(),yr(zr)[this.ptr]=this}function Yr(){throw"cannot construct a VoidPtr, no constructor in IDL"}function Wr(){this.ptr=Qt(),yr(Wr)[this.ptr]=this}function Hr(){this.ptr=Pn(),yr(Hr)[this.ptr]=this}return Cr.prototype=Object.create(Ar.prototype),Cr.prototype.constructor=Cr,Cr.prototype.__class__=Cr,Cr.__cache__={},a.Status=Cr,Cr.prototype.code=Cr.prototype.code=function(){var e=this.ptr;return zn(e)},Cr.prototype.ok=Cr.prototype.ok=function(){var e=this.ptr;return!!Wn(e)},Cr.prototype.error_msg=Cr.prototype.error_msg=function(){var e=this.ptr;return M(Yn(e))},Cr.prototype.__destroy__=Cr.prototype.__destroy__=function(){var e=this.ptr;Qn(e)},wr.prototype=Object.create(Ar.prototype),wr.prototype.constructor=wr,wr.prototype.__class__=wr,wr.__cache__={},a.DracoUInt16Array=wr,wr.prototype.GetValue=wr.prototype.GetValue=function(e){var t=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),Jt(t,e)},wr.prototype.size=wr.prototype.size=function(){var e=this.ptr;return en(e)},wr.prototype.__destroy__=wr.prototype.__destroy__=function(){var e=this.ptr;$t(e)},Ir.prototype=Object.create(Ar.prototype),Ir.prototype.constructor=Ir,Ir.prototype.__class__=Ir,Ir.__cache__={},a.PointCloud=Ir,Ir.prototype.num_attributes=Ir.prototype.num_attributes=function(){var e=this.ptr;return Gn(e)},Ir.prototype.num_points=Ir.prototype.num_points=function(){var e=this.ptr;return Xn(e)},Ir.prototype.__destroy__=Ir.prototype.__destroy__=function(){var e=this.ptr;jn(e)},Or.prototype=Object.create(Ar.prototype),Or.prototype.constructor=Or,Or.prototype.__class__=Or,Or.__cache__={},a.DracoUInt8Array=Or,Or.prototype.GetValue=Or.prototype.GetValue=function(e){var t=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),sn(t,e)},Or.prototype.size=Or.prototype.size=function(){var e=this.ptr;return ln(e)},Or.prototype.__destroy__=Or.prototype.__destroy__=function(){var e=this.ptr;un(e)},Sr.prototype=Object.create(Ar.prototype),Sr.prototype.constructor=Sr,Sr.prototype.__class__=Sr,Sr.__cache__={},a.DracoUInt32Array=Sr,Sr.prototype.GetValue=Sr.prototype.GetValue=function(e){var t=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),nn(t,e)},Sr.prototype.size=Sr.prototype.size=function(){var e=this.ptr;return on(e)},Sr.prototype.__destroy__=Sr.prototype.__destroy__=function(){var e=this.ptr;rn(e)},Br.prototype=Object.create(Ar.prototype),Br.prototype.constructor=Br,Br.prototype.__class__=Br,Br.__cache__={},a.AttributeOctahedronTransform=Br,Br.prototype.InitFromAttribute=Br.prototype.InitFromAttribute=function(e){var t=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),!!qe(t,e)},Br.prototype.quantization_bits=Br.prototype.quantization_bits=function(){var e=this.ptr;return Je(e)},Br.prototype.__destroy__=Br.prototype.__destroy__=function(){var e=this.ptr;Ze(e)},Lr.prototype=Object.create(Ar.prototype),Lr.prototype.constructor=Lr,Lr.prototype.__class__=Lr,Lr.__cache__={},a.PointAttribute=Lr,Lr.prototype.size=Lr.prototype.size=function(){var e=this.ptr;return Nn(e)},Lr.prototype.GetAttributeTransformData=Lr.prototype.GetAttributeTransformData=function(){var e=this.ptr;return br(Cn(e),Mr)},Lr.prototype.attribute_type=Lr.prototype.attribute_type=function(){var e=this.ptr;return On(e)},Lr.prototype.data_type=Lr.prototype.data_type=function(){var e=this.ptr;return Ln(e)},Lr.prototype.num_components=Lr.prototype.num_components=function(){var e=this.ptr;return Rn(e)},Lr.prototype.normalized=Lr.prototype.normalized=function(){var e=this.ptr;return!!Mn(e)},Lr.prototype.byte_stride=Lr.prototype.byte_stride=function(){var e=this.ptr;return Bn(e)},Lr.prototype.byte_offset=Lr.prototype.byte_offset=function(){var e=this.ptr;return Sn(e)},Lr.prototype.unique_id=Lr.prototype.unique_id=function(){var e=this.ptr;return Un(e)},Lr.prototype.__destroy__=Lr.prototype.__destroy__=function(){var e=this.ptr;In(e)},Mr.prototype=Object.create(Ar.prototype),Mr.prototype.constructor=Mr,Mr.prototype.__class__=Mr,Mr.__cache__={},a.AttributeTransformData=Mr,Mr.prototype.transform_type=Mr.prototype.transform_type=function(){var e=this.ptr;return st(e)},Mr.prototype.__destroy__=Mr.prototype.__destroy__=function(){var e=this.ptr;at(e)},Rr.prototype=Object.create(Ar.prototype),Rr.prototype.constructor=Rr,Rr.prototype.__class__=Rr,Rr.__cache__={},a.AttributeQuantizationTransform=Rr,Rr.prototype.InitFromAttribute=Rr.prototype.InitFromAttribute=function(e){var t=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),!!et(t,e)},Rr.prototype.quantization_bits=Rr.prototype.quantization_bits=function(){var e=this.ptr;return rt(e)},Rr.prototype.min_value=Rr.prototype.min_value=function(e){var t=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),nt(t,e)},Rr.prototype.range=Rr.prototype.range=function(){var e=this.ptr;return it(e)},Rr.prototype.__destroy__=Rr.prototype.__destroy__=function(){var e=this.ptr;tt(e)},Nr.prototype=Object.create(Ar.prototype),Nr.prototype.constructor=Nr,Nr.prototype.__class__=Nr,Nr.__cache__={},a.DracoInt8Array=Nr,Nr.prototype.GetValue=Nr.prototype.GetValue=function(e){var t=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),Vt(t,e)},Nr.prototype.size=Nr.prototype.size=function(){var e=this.ptr;return qt(e)},Nr.prototype.__destroy__=Nr.prototype.__destroy__=function(){var e=this.ptr;Kt(e)},Ur.prototype=Object.create(Ar.prototype),Ur.prototype.constructor=Ur,Ur.prototype.__class__=Ur,Ur.__cache__={},a.MetadataQuerier=Ur,Ur.prototype.HasEntry=Ur.prototype.HasEntry=function(e,t){var n=this.ptr;return xr.prepare(),e&&"object"===i(e)&&(e=e.ptr),t=t&&"object"===i(t)?t.ptr:Pr(t),!!En(n,e,t)},Ur.prototype.GetIntEntry=Ur.prototype.GetIntEntry=function(e,t){var n=this.ptr;return xr.prepare(),e&&"object"===i(e)&&(e=e.ptr),t=t&&"object"===i(t)?t.ptr:Pr(t),vn(n,e,t)},Ur.prototype.GetIntEntryArray=Ur.prototype.GetIntEntryArray=function(e,t,n){var r=this.ptr;xr.prepare(),e&&"object"===i(e)&&(e=e.ptr),t=t&&"object"===i(t)?t.ptr:Pr(t),n&&"object"===i(n)&&(n=n.ptr),bn(r,e,t,n)},Ur.prototype.GetDoubleEntry=Ur.prototype.GetDoubleEntry=function(e,t){var n=this.ptr;return xr.prepare(),e&&"object"===i(e)&&(e=e.ptr),t=t&&"object"===i(t)?t.ptr:Pr(t),An(n,e,t)},Ur.prototype.GetStringEntry=Ur.prototype.GetStringEntry=function(e,t){var n=this.ptr;return xr.prepare(),e&&"object"===i(e)&&(e=e.ptr),t=t&&"object"===i(t)?t.ptr:Pr(t),M(gn(n,e,t))},Ur.prototype.NumEntries=Ur.prototype.NumEntries=function(e){var t=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),Tn(t,e)},Ur.prototype.GetEntryName=Ur.prototype.GetEntryName=function(e,t){var n=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),t&&"object"===i(t)&&(t=t.ptr),M(yn(n,e,t))},Ur.prototype.__destroy__=Ur.prototype.__destroy__=function(){var e=this.ptr;xn(e)},kr.prototype=Object.create(Ar.prototype),kr.prototype.constructor=kr,kr.prototype.__class__=kr,kr.__cache__={},a.DracoInt16Array=kr,kr.prototype.GetValue=kr.prototype.GetValue=function(e){var t=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),jt(t,e)},kr.prototype.size=kr.prototype.size=function(){var e=this.ptr;return Xt(e)},kr.prototype.__destroy__=kr.prototype.__destroy__=function(){var e=this.ptr;Gt(e)},jr.prototype=Object.create(Ar.prototype),jr.prototype.constructor=jr,jr.prototype.__class__=jr,jr.__cache__={},a.DracoFloat32Array=jr,jr.prototype.GetValue=jr.prototype.GetValue=function(e){var t=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),Rt(t,e)},jr.prototype.size=jr.prototype.size=function(){var e=this.ptr;return Ut(e)},jr.prototype.__destroy__=jr.prototype.__destroy__=function(){var e=this.ptr;Nt(e)},Gr.prototype=Object.create(Ar.prototype),Gr.prototype.constructor=Gr,Gr.prototype.__class__=Gr,Gr.__cache__={},a.GeometryAttribute=Gr,Gr.prototype.__destroy__=Gr.prototype.__destroy__=function(){var e=this.ptr;cn(e)},Xr.prototype=Object.create(Ar.prototype),Xr.prototype.constructor=Xr,Xr.prototype.__class__=Xr,Xr.__cache__={},a.DecoderBuffer=Xr,Xr.prototype.Init=Xr.prototype.Init=function(e,t){var n=this.ptr;xr.prepare(),"object"==i(e)&&(e=Dr(e)),t&&"object"===i(t)&&(t=t.ptr),lt(n,e,t)},Xr.prototype.__destroy__=Xr.prototype.__destroy__=function(){var e=this.ptr;_t(e)},Qr.prototype=Object.create(Ar.prototype),Qr.prototype.constructor=Qr,Qr.prototype.__class__=Qr,Qr.__cache__={},a.Decoder=Qr,Qr.prototype.GetEncodedGeometryType=Qr.prototype.GetEncodedGeometryType=function(e){var t=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),wt(t,e)},Qr.prototype.DecodeBufferToPointCloud=Qr.prototype.DecodeBufferToPointCloud=function(e,t){var n=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),t&&"object"===i(t)&&(t=t.ptr),br(dt(n,e,t),Cr)},Qr.prototype.DecodeBufferToMesh=Qr.prototype.DecodeBufferToMesh=function(e,t){var n=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),t&&"object"===i(t)&&(t=t.ptr),br(ct(n,e,t),Cr)},Qr.prototype.GetAttributeId=Qr.prototype.GetAttributeId=function(e,t){var n=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),t&&"object"===i(t)&&(t=t.ptr),bt(n,e,t)},Qr.prototype.GetAttributeIdByName=Qr.prototype.GetAttributeIdByName=function(e,t){var n=this.ptr;return xr.prepare(),e&&"object"===i(e)&&(e=e.ptr),t=t&&"object"===i(t)?t.ptr:Pr(t),yt(n,e,t)},Qr.prototype.GetAttributeIdByMetadataEntry=Qr.prototype.GetAttributeIdByMetadataEntry=function(e,t,n){var r=this.ptr;return xr.prepare(),e&&"object"===i(e)&&(e=e.ptr),t=t&&"object"===i(t)?t.ptr:Pr(t),n=n&&"object"===i(n)?n.ptr:Pr(n),At(r,e,t,n)},Qr.prototype.GetAttribute=Qr.prototype.GetAttribute=function(e,t){var n=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),t&&"object"===i(t)&&(t=t.ptr),br(Ct(n,e,t),Lr)},Qr.prototype.GetAttributeByUniqueId=Qr.prototype.GetAttributeByUniqueId=function(e,t){var n=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),t&&"object"===i(t)&&(t=t.ptr),br(ft(n,e,t),Lr)},Qr.prototype.GetMetadata=Qr.prototype.GetMetadata=function(e){var t=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),br(Ot(t,e),Hr)},Qr.prototype.GetAttributeMetadata=Qr.prototype.GetAttributeMetadata=function(e,t){var n=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),t&&"object"===i(t)&&(t=t.ptr),br(Tt(n,e,t),Hr)},Qr.prototype.GetFaceFromMesh=Qr.prototype.GetFaceFromMesh=function(e,t,n){var r=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),t&&"object"===i(t)&&(t=t.ptr),n&&"object"===i(n)&&(n=n.ptr),!!It(r,e,t,n)},Qr.prototype.GetTriangleStripsFromMesh=Qr.prototype.GetTriangleStripsFromMesh=function(e,t){var n=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),t&&"object"===i(t)&&(t=t.ptr),St(n,e,t)},Qr.prototype.GetAttributeFloat=Qr.prototype.GetAttributeFloat=function(e,t,n){var r=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),t&&"object"===i(t)&&(t=t.ptr),n&&"object"===i(n)&&(n=n.ptr),!!mt(r,e,t,n)},Qr.prototype.GetAttributeFloatForAllPoints=Qr.prototype.GetAttributeFloatForAllPoints=function(e,t,n){var r=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),t&&"object"===i(t)&&(t=t.ptr),n&&"object"===i(n)&&(n=n.ptr),!!ht(r,e,t,n)},Qr.prototype.GetAttributeIntForAllPoints=Qr.prototype.GetAttributeIntForAllPoints=function(e,t,n){var r=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),t&&"object"===i(t)&&(t=t.ptr),n&&"object"===i(n)&&(n=n.ptr),!!Ft(r,e,t,n)},Qr.prototype.GetAttributeInt8ForAllPoints=Qr.prototype.GetAttributeInt8ForAllPoints=function(e,t,n){var r=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),t&&"object"===i(t)&&(t=t.ptr),n&&"object"===i(n)&&(n=n.ptr),!!Et(r,e,t,n)},Qr.prototype.GetAttributeUInt8ForAllPoints=Qr.prototype.GetAttributeUInt8ForAllPoints=function(e,t,n){var r=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),t&&"object"===i(t)&&(t=t.ptr),n&&"object"===i(n)&&(n=n.ptr),!!Dt(r,e,t,n)},Qr.prototype.GetAttributeInt16ForAllPoints=Qr.prototype.GetAttributeInt16ForAllPoints=function(e,t,n){var r=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),t&&"object"===i(t)&&(t=t.ptr),n&&"object"===i(n)&&(n=n.ptr),!!vt(r,e,t,n)},Qr.prototype.GetAttributeUInt16ForAllPoints=Qr.prototype.GetAttributeUInt16ForAllPoints=function(e,t,n){var r=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),t&&"object"===i(t)&&(t=t.ptr),n&&"object"===i(n)&&(n=n.ptr),!!xt(r,e,t,n)},Qr.prototype.GetAttributeInt32ForAllPoints=Qr.prototype.GetAttributeInt32ForAllPoints=function(e,t,n){var r=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),t&&"object"===i(t)&&(t=t.ptr),n&&"object"===i(n)&&(n=n.ptr),!!gt(r,e,t,n)},Qr.prototype.GetAttributeUInt32ForAllPoints=Qr.prototype.GetAttributeUInt32ForAllPoints=function(e,t,n){var r=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),t&&"object"===i(t)&&(t=t.ptr),n&&"object"===i(n)&&(n=n.ptr),!!Pt(r,e,t,n)},Qr.prototype.SkipAttributeTransform=Qr.prototype.SkipAttributeTransform=function(e){var t=this.ptr;e&&"object"===i(e)&&(e=e.ptr),Bt(t,e)},Qr.prototype.__destroy__=Qr.prototype.__destroy__=function(){var e=this.ptr;Lt(e)},zr.prototype=Object.create(Ar.prototype),zr.prototype.constructor=zr,zr.prototype.__class__=zr,zr.__cache__={},a.Mesh=zr,zr.prototype.num_faces=zr.prototype.num_faces=function(){var e=this.ptr;return hn(e)},zr.prototype.num_attributes=zr.prototype.num_attributes=function(){var e=this.ptr;return fn(e)},zr.prototype.num_points=zr.prototype.num_points=function(){var e=this.ptr;return mn(e)},zr.prototype.__destroy__=zr.prototype.__destroy__=function(){var e=this.ptr;pn(e)},Yr.prototype=Object.create(Ar.prototype),Yr.prototype.constructor=Yr,Yr.prototype.__class__=Yr,Yr.__cache__={},a.VoidPtr=Yr,Yr.prototype.__destroy__=Yr.prototype.__destroy__=function(){var e=this.ptr;Hn(e)},Wr.prototype=Object.create(Ar.prototype),Wr.prototype.constructor=Wr,Wr.prototype.__class__=Wr,Wr.__cache__={},a.DracoInt32Array=Wr,Wr.prototype.GetValue=Wr.prototype.GetValue=function(e){var t=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),zt(t,e)},Wr.prototype.size=Wr.prototype.size=function(){var e=this.ptr;return Wt(e)},Wr.prototype.__destroy__=Wr.prototype.__destroy__=function(){var e=this.ptr;Yt(e)},Hr.prototype=Object.create(Ar.prototype),Hr.prototype.constructor=Hr,Hr.prototype.__class__=Hr,Hr.__cache__={},a.Metadata=Hr,Hr.prototype.__destroy__=Hr.prototype.__destroy__=function(){var e=this.ptr;Dn(e)},function(){function e(){a.OK=_r(),a.DRACO_ERROR=sr(),a.IO_ERROR=lr(),a.INVALID_PARAMETER=ur(),a.UNSUPPORTED_VERSION=dr(),a.UNKNOWN_VERSION=cr(),a.INVALID_GEOMETRY_TYPE=Jn(),a.POINT_CLOUD=$n(),a.TRIANGULAR_MESH=er(),a.ATTRIBUTE_INVALID_TRANSFORM=Vn(),a.ATTRIBUTE_NO_TRANSFORM=Kn(),a.ATTRIBUTE_QUANTIZATION_TRANSFORM=Zn(),a.ATTRIBUTE_OCTAHEDRON_TRANSFORM=qn(),a.INVALID=rr(),a.POSITION=or(),a.NORMAL=ir(),a.COLOR=tr(),a.TEX_COORD=ar(),a.GENERIC=nr()}$?e():oe(e)}(),"function"==typeof a.onModuleParsed&&a.onModuleParsed(),t}}).call(this,n(76),"/")},145:function(e,t,n){"use strict";n.d(t,"a",(function(){return _e}));n(50),n(128),n(183),n(77),n(103),n(60),n(184),n(29),n(31),n(58),n(59),n(93),n(89),n(75),n(39),n(28),n(104),n(74),n(40),n(41),n(20);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var n=e.__state.conversionName.toString(),r=Math.round(e.r),i=Math.round(e.g),o=Math.round(e.b),a=e.a,s=Math.round(e.h),u=e.s.toFixed(1),l=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var _=e.hex.toString(16);_.length<6;)_="0"+_;return"#"+_}return"CSS_RGB"===n?"rgb("+r+","+i+","+o+")":"CSS_RGBA"===n?"rgba("+r+","+i+","+o+","+a+")":"HEX"===n?"0x"+e.hex.toString(16):"RGB_ARRAY"===n?"["+r+","+i+","+o+"]":"RGBA_ARRAY"===n?"["+r+","+i+","+o+","+a+"]":"RGB_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+"}":"RGBA_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+",a:"+a+"}":"HSV_OBJ"===n?"{h:"+s+",s:"+u+",v:"+l+"}":"HSVA_OBJ"===n?"{h:"+s+",s:"+u+",v:"+l+",a:"+a+"}":"unknown format"}var o=[].forEach,a=[].slice,s={BREAK:{},extend:function(e){return this.each(a.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(t[n])||(e[n]=t[n])}.bind(this))}),this),e},defaults:function(e){return this.each(a.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))}),this),e},compose:function(){var e=a.call(arguments);return function(){for(var t=a.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,n){if(e)if(o&&e.forEach&&e.forEach===o)e.forEach(t,n);else if(e.length===e.length+0){var r,i=void 0;for(i=0,r=e.length;i<r;i++)if(i in e&&t.call(n,e[i],i)===this.BREAK)return}else for(var a in e)if(t.call(n,e[a],a)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var r=void 0;return function(){var i=this,o=arguments;function a(){r=null,n||e.apply(i,o)}var s=n||!r;clearTimeout(r),r=setTimeout(a,t),s&&e.apply(i,o)}},toArray:function(e){return e.toArray?e.toArray():a.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return isNaN(e)})),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return"[object Function]"==={}.toString.call(e)}},u=[{litmus:s.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:i},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:i},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:i},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:i}}},{litmus:s.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:s.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:s.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(s.isNumber(e.r)&&s.isNumber(e.g)&&s.isNumber(e.b)&&s.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(s.isNumber(e.r)&&s.isNumber(e.g)&&s.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(s.isNumber(e.h)&&s.isNumber(e.s)&&s.isNumber(e.v)&&s.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(s.isNumber(e.h)&&s.isNumber(e.s)&&s.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],l=void 0,_=void 0,c=function(){_=!1;var e=arguments.length>1?s.toArray(arguments):arguments[0];return s.each(u,(function(t){if(t.litmus(e))return s.each(t.conversions,(function(t,n){if(l=t.read(e),!1===_&&!1!==l)return _=l,l.conversionName=n,l.conversion=t,s.BREAK})),s.BREAK})),_},d=void 0,p={hsv_to_rgb:function(e,t,n){var r=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),o=n*(1-t),a=n*(1-i*t),s=n*(1-(1-i)*t),u=[[n,s,o],[a,n,o],[o,n,s],[o,a,n],[s,o,n],[n,o,a]][r];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(e,t,n){var r=Math.min(e,t,n),i=Math.max(e,t,n),o=i-r,a=void 0;return 0===i?{h:NaN,s:0,v:0}:(a=e===i?(t-n)/o:t===i?2+(n-e)/o:4+(e-t)/o,(a/=6)<0&&(a+=1),{h:360*a,s:o/i,v:i/255})},rgb_to_hex:function(e,t,n){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,t),r=this.hex_with_component(r,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,n){return n<<(d=8*t)|e&~(255<<d)}},f="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)},h=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),A=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},y=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},b=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t},v=function(){function e(){if(h(this,e),this.__state=c.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return m(e,[{key:"toString",value:function(){return i(this)}},{key:"toHexString",value:function(){return i(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();function g(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space||v.recalculateRGB(this,t,n),this.__state[t]},set:function(e){"RGB"!==this.__state.space&&(v.recalculateRGB(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function E(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space||v.recalculateHSV(this),this.__state[t]},set:function(e){"HSV"!==this.__state.space&&(v.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}v.recalculateRGB=function(e,t,n){if("HEX"===e.__state.space)e.__state[t]=p.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");s.extend(e.__state,p.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},v.recalculateHSV=function(e){var t=p.rgb_to_hsv(e.r,e.g,e.b);s.extend(e.__state,{s:t.s,v:t.v}),s.isNaN(t.h)?s.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},v.COMPONENTS=["r","g","b","h","s","v","hex","a"],g(v.prototype,"r",2),g(v.prototype,"g",1),g(v.prototype,"b",0),E(v.prototype,"h"),E(v.prototype,"s"),E(v.prototype,"v"),Object.defineProperty(v.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(v.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=p.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var F=function(){function e(t,n){h(this,e),this.initialValue=t[n],this.domElement=document.createElement("div"),this.object=t,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return m(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),T={};s.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(e,t){s.each(e,(function(e){T[e]=t}))}));var x=/(\d+(\.\d+)?)px/;function P(e){if("0"===e||s.isUndefined(e))return 0;var t=e.match(x);return s.isNull(t)?0:parseFloat(t[1])}var D={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){var r=n,i=t;s.isUndefined(i)&&(i=!0),s.isUndefined(r)&&(r=!0),e.style.position="absolute",i&&(e.style.left=0,e.style.right=0),r&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,r){var i=n||{},o=T[t];if(!o)throw new Error("Event type "+t+" not supported.");var a=document.createEvent(o);switch(o){case"MouseEvents":var u=i.x||i.clientX||0,l=i.y||i.clientY||0;a.initMouseEvent(t,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,u,l,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var _=a.initKeyboardEvent||a.initKeyEvent;s.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),_(t,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:a.initEvent(t,i.bubbles||!1,i.cancelable||!0)}s.defaults(a,r),e.dispatchEvent(a)},bind:function(e,t,n,r){var i=r||!1;return e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,n),D},unbind:function(e,t,n,r){var i=r||!1;return e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent&&e.detachEvent("on"+t,n),D},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return D},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),r=n.indexOf(t);-1!==r&&(n.splice(r,1),e.className=n.join(" "))}else e.className=void 0;return D},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return P(t["border-left-width"])+P(t["border-right-width"])+P(t["padding-left"])+P(t["padding-right"])+P(t.width)},getHeight:function(e){var t=getComputedStyle(e);return P(t["border-top-width"])+P(t["border-bottom-width"])+P(t["padding-top"])+P(t["padding-bottom"])+P(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do{n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent}while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},C=function(e){function t(e,n){h(this,t);var r=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=r;return r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox"),D.bind(r.__checkbox,"change",(function(){i.setValue(!i.__prev)}),!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return y(t,e),m(t,[{key:"setValue",value:function(e){var n=A(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),A(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(F),w=function(e){function t(e,n,r){h(this,t);var i=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=r,a=i;if(i.__select=document.createElement("select"),s.isArray(o)){var u={};s.each(o,(function(e){u[e]=e})),o=u}return s.each(o,(function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),a.__select.appendChild(n)})),i.updateDisplay(),D.bind(i.__select,"change",(function(){var e=this.options[this.selectedIndex].value;a.setValue(e)})),i.domElement.appendChild(i.__select),i}return y(t,e),m(t,[{key:"setValue",value:function(e){var n=A(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return D.isActive(this.__select)?this:(this.__select.value=this.getValue(),A(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(F),I=function(e){function t(e,n){h(this,t);var r=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=r;function o(){i.setValue(i.__input.value)}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),D.bind(r.__input,"keyup",o),D.bind(r.__input,"change",o),D.bind(r.__input,"blur",(function(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())})),D.bind(r.__input,"keydown",(function(e){13===e.keyCode&&this.blur()})),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return y(t,e),m(t,[{key:"updateDisplay",value:function(){return D.isActive(this.__input)||(this.__input.value=this.getValue()),A(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(F);function O(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var S=function(e){function t(e,n,r){h(this,t);var i=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=r||{};return i.__min=o.min,i.__max=o.max,i.__step=o.step,s.isUndefined(i.__step)?0===i.initialValue?i.__impliedStep=1:i.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(i.initialValue))/Math.LN10))/10:i.__impliedStep=i.__step,i.__precision=O(i.__impliedStep),i}return y(t,e),m(t,[{key:"setValue",value:function(e){var n=e;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),A(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=O(e),this}}]),t}(F);var B=function(e){function t(e,n,r){h(this,t);var i=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));i.__truncationSuspended=!1;var o=i,a=void 0;function u(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}function l(e){var t=a-e.clientY;o.setValue(o.getValue()+t*o.__impliedStep),a=e.clientY}function _(){D.unbind(window,"mousemove",l),D.unbind(window,"mouseup",_),u()}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),D.bind(i.__input,"change",(function(){var e=parseFloat(o.__input.value);s.isNaN(e)||o.setValue(e)})),D.bind(i.__input,"blur",(function(){u()})),D.bind(i.__input,"mousedown",(function(e){D.bind(window,"mousemove",l),D.bind(window,"mouseup",_),a=e.clientY})),D.bind(i.__input,"keydown",(function(e){13===e.keyCode&&(o.__truncationSuspended=!0,this.blur(),o.__truncationSuspended=!1,u())})),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return y(t,e),m(t,[{key:"updateDisplay",value:function(){var e,n,r;return this.__input.value=this.__truncationSuspended?this.getValue():(e=this.getValue(),n=this.__precision,r=Math.pow(10,n),Math.round(e*r)/r),A(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(S);function L(e,t,n,r,i){return r+(e-t)/(n-t)*(i-r)}var M=function(e){function t(e,n,r,i,o){h(this,t);var a=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{min:r,max:i,step:o})),s=a;function u(e){e.preventDefault();var t=s.__background.getBoundingClientRect();return s.setValue(L(e.clientX,t.left,t.right,s.__min,s.__max)),!1}function l(){D.unbind(window,"mousemove",u),D.unbind(window,"mouseup",l),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function _(e){var t=e.touches[0].clientX,n=s.__background.getBoundingClientRect();s.setValue(L(t,n.left,n.right,s.__min,s.__max))}function c(){D.unbind(window,"touchmove",_),D.unbind(window,"touchend",c),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return a.__background=document.createElement("div"),a.__foreground=document.createElement("div"),D.bind(a.__background,"mousedown",(function(e){document.activeElement.blur(),D.bind(window,"mousemove",u),D.bind(window,"mouseup",l),u(e)})),D.bind(a.__background,"touchstart",(function(e){if(1!==e.touches.length)return;D.bind(window,"touchmove",_),D.bind(window,"touchend",c),_(e)})),D.addClass(a.__background,"slider"),D.addClass(a.__foreground,"slider-fg"),a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return y(t,e),m(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",A(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(S),R=function(e){function t(e,n,r){h(this,t);var i=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=i;return i.__button=document.createElement("div"),i.__button.innerHTML=void 0===r?"Fire":r,D.bind(i.__button,"click",(function(e){return e.preventDefault(),o.fire(),!1})),D.addClass(i.__button,"button"),i.domElement.appendChild(i.__button),i}return y(t,e),m(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(F),N=function(e){function t(e,n){h(this,t);var r=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));r.__color=new v(r.getValue()),r.__temp=new v(0);var i=r;r.domElement=document.createElement("div"),D.makeSelectable(r.domElement,!1),r.__selector=document.createElement("div"),r.__selector.className="selector",r.__saturation_field=document.createElement("div"),r.__saturation_field.className="saturation-field",r.__field_knob=document.createElement("div"),r.__field_knob.className="field-knob",r.__field_knob_border="2px solid ",r.__hue_knob=document.createElement("div"),r.__hue_knob.className="hue-knob",r.__hue_field=document.createElement("div"),r.__hue_field.className="hue-field",r.__input=document.createElement("input"),r.__input.type="text",r.__input_textShadow="0 1px 1px ",D.bind(r.__input,"keydown",(function(e){13===e.keyCode&&p.call(this)})),D.bind(r.__input,"blur",p),D.bind(r.__selector,"mousedown",(function(){D.addClass(this,"drag").bind(window,"mouseup",(function(){D.removeClass(i.__selector,"drag")}))})),D.bind(r.__selector,"touchstart",(function(){D.addClass(this,"drag").bind(window,"touchend",(function(){D.removeClass(i.__selector,"drag")}))}));var o,a=document.createElement("div");function u(e){m(e),D.bind(window,"mousemove",m),D.bind(window,"touchmove",m),D.bind(window,"mouseup",_),D.bind(window,"touchend",_)}function l(e){A(e),D.bind(window,"mousemove",A),D.bind(window,"touchmove",A),D.bind(window,"mouseup",d),D.bind(window,"touchend",d)}function _(){D.unbind(window,"mousemove",m),D.unbind(window,"touchmove",m),D.unbind(window,"mouseup",_),D.unbind(window,"touchend",_),f()}function d(){D.unbind(window,"mousemove",A),D.unbind(window,"touchmove",A),D.unbind(window,"mouseup",d),D.unbind(window,"touchend",d),f()}function p(){var e=c(this.value);!1!==e?(i.__color.__state=e,i.setValue(i.__color.toOriginal())):this.value=i.__color.toString()}function f(){i.__onFinishChange&&i.__onFinishChange.call(i,i.__color.toOriginal())}function m(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=i.__saturation_field.getBoundingClientRect(),n=e.touches&&e.touches[0]||e,r=n.clientX,o=n.clientY,a=(r-t.left)/(t.right-t.left),s=1-(o-t.top)/(t.bottom-t.top);return s>1?s=1:s<0&&(s=0),a>1?a=1:a<0&&(a=0),i.__color.v=s,i.__color.s=a,i.setValue(i.__color.toOriginal()),!1}function A(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=i.__hue_field.getBoundingClientRect(),n=1-((e.touches&&e.touches[0]||e).clientY-t.top)/(t.bottom-t.top);return n>1?n=1:n<0&&(n=0),i.__color.h=360*n,i.setValue(i.__color.toOriginal()),!1}return s.extend(r.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),s.extend(r.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:r.__field_knob_border+(r.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),s.extend(r.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),s.extend(r.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),s.extend(a.style,{width:"100%",height:"100%",background:"none"}),k(a,"top","rgba(0,0,0,0)","#000"),s.extend(r.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(o=r.__hue_field).style.background="",o.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",o.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",s.extend(r.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:r.__input_textShadow+"rgba(0,0,0,0.7)"}),D.bind(r.__saturation_field,"mousedown",u),D.bind(r.__saturation_field,"touchstart",u),D.bind(r.__field_knob,"mousedown",u),D.bind(r.__field_knob,"touchstart",u),D.bind(r.__hue_field,"mousedown",l),D.bind(r.__hue_field,"touchstart",l),r.__saturation_field.appendChild(a),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay(),r}return y(t,e),m(t,[{key:"updateDisplay",value:function(){var e=c(this.getValue());if(!1!==e){var t=!1;s.each(v.COMPONENTS,(function(n){if(!s.isUndefined(e[n])&&!s.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}}),this),t&&s.extend(this.__color.__state,e)}s.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,r=255-n;s.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,k(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),s.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+r+","+r+","+r+",.7)"})}}]),t}(F),U=["-moz-","-o-","-webkit-","-ms-",""];function k(e,t,n,r){e.style.background="",s.each(U,(function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+n+" 0%, "+r+" 100%); "}))}var j=function(e,t){var n=t||document,r=document.createElement("style");r.type="text/css",r.innerHTML=e;var i=n.getElementsByTagName("head")[0];try{i.appendChild(r)}catch(e){}},G='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',X=function(e,t){var n=e[t];return s.isArray(arguments[2])||s.isObject(arguments[2])?new w(e,t,arguments[2]):s.isNumber(n)?s.isNumber(arguments[2])&&s.isNumber(arguments[3])?s.isNumber(arguments[4])?new M(e,t,arguments[2],arguments[3],arguments[4]):new M(e,t,arguments[2],arguments[3]):s.isNumber(arguments[4])?new B(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new B(e,t,{min:arguments[2],max:arguments[3]}):s.isString(n)?new I(e,t):s.isFunction(n)?new R(e,t,""):s.isBoolean(n)?new C(e,t):null};var Q=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},z=function(){function e(){h(this,e),this.backgroundElement=document.createElement("div"),s.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),D.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),s.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;D.bind(this.backgroundElement,"click",(function(){t.hide()}))}return m(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),s.defer((function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var e=this,t=function t(){e.domElement.style.display="none",e.backgroundElement.style.display="none",D.unbind(e.domElement,"webkitTransitionEnd",t),D.unbind(e.domElement,"transitionend",t),D.unbind(e.domElement,"oTransitionEnd",t)};D.bind(this.domElement,"webkitTransitionEnd",t),D.bind(this.domElement,"transitionend",t),D.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-D.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-D.getHeight(this.domElement)/2+"px"}}]),e}();j(function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var Y=function(){try{return!!window.localStorage}catch(e){return!1}}(),W=void 0,H=!0,V=void 0,K=!1,q=[],Z=function e(t){var n=this,r=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),D.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],r=s.defaults(r,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),r=s.defaults(r,{resizable:r.autoPlace,hideable:r.autoPlace}),s.isUndefined(r.load)?r.load={preset:"Default"}:r.preset&&(r.load.preset=r.preset),s.isUndefined(r.parent)&&r.hideable&&q.push(this),r.resizable=s.isUndefined(r.parent)&&r.resizable,r.autoPlace&&s.isUndefined(r.scrollable)&&(r.scrollable=!0);var i,o=Y&&"true"===localStorage.getItem(re(this,"isLocal")),a=void 0,u=void 0;if(Object.defineProperties(this,{parent:{get:function(){return r.parent}},scrollable:{get:function(){return r.scrollable}},autoPlace:{get:function(){return r.autoPlace}},closeOnTop:{get:function(){return r.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:r.load.preset},set:function(e){n.parent?n.getRoot().preset=e:r.load.preset=e,function(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}(this),n.revert()}},width:{get:function(){return r.width},set:function(e){r.width=e,ue(n,e)}},name:{get:function(){return r.name},set:function(e){r.name=e,u&&(u.innerHTML=r.name)}},closed:{get:function(){return r.closed},set:function(t){r.closed=t,r.closed?D.addClass(n.__ul,e.CLASS_CLOSED):D.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return r.load}},useLocalStorage:{get:function(){return o},set:function(e){Y&&(o=e,e?D.bind(window,"unload",a):D.unbind(window,"unload",a),localStorage.setItem(re(n,"isLocal"),e))}}}),s.isUndefined(r.parent)){if(this.closed=r.closed||!1,D.addClass(this.domElement,e.CLASS_MAIN),D.makeSelectable(this.domElement,!1),Y&&o){n.useLocalStorage=!0;var l=localStorage.getItem(re(this,"gui"));l&&(r.load=JSON.parse(l))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,D.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),r.closeOnTop?(D.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(D.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),D.bind(this.__closeButton,"click",(function(){n.closed=!n.closed}))}else{void 0===r.closed&&(r.closed=!0);var _=document.createTextNode(r.name);D.addClass(_,"controller-name"),u=J(n,_);D.addClass(this.__ul,e.CLASS_CLOSED),D.addClass(u,"title"),D.bind(u,"click",(function(e){return e.preventDefault(),n.closed=!n.closed,!1})),r.closed||(this.closed=!1)}r.autoPlace&&(s.isUndefined(r.parent)&&(H&&(V=document.createElement("div"),D.addClass(V,"dg"),D.addClass(V,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(V),H=!1),V.appendChild(this.domElement),D.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||ue(n,r.width)),this.__resizeHandler=function(){n.onResizeDebounced()},D.bind(window,"resize",this.__resizeHandler),D.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),D.bind(this.__ul,"transitionend",this.__resizeHandler),D.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),r.resizable&&se(this),a=function(){Y&&"true"===localStorage.getItem(re(n,"isLocal"))&&localStorage.setItem(re(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=a,r.parent||((i=n.getRoot()).width+=1,s.defer((function(){i.width-=1})))};function J(e,t,n){var r=document.createElement("li");return t&&r.appendChild(t),n?e.__ul.insertBefore(r,n):e.__ul.appendChild(r),e.onResize(),r}function $(e){D.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&D.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function ee(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function te(e,t){var n=e.getRoot(),r=n.__rememberedObjects.indexOf(t.object);if(-1!==r){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[t.property]=t,n.load&&n.load.remembered){var o=n.load.remembered,a=void 0;if(o[e.preset])a=o[e.preset];else{if(!o.Default)return;a=o.Default}if(a[r]&&void 0!==a[r][t.property]){var s=a[r][t.property];t.initialValue=s,t.setValue(s)}}}}function ne(e,t,n,r){if(void 0===t[n])throw new Error('Object "'+t+'" has no property "'+n+'"');var i=void 0;if(r.color)i=new N(t,n);else{var o=[t,n].concat(r.factoryArgs);i=X.apply(e,o)}r.before instanceof F&&(r.before=r.before.__li),te(e,i),D.addClass(i.domElement,"c");var a=document.createElement("span");D.addClass(a,"property-name"),a.innerHTML=i.property;var u=document.createElement("div");u.appendChild(a),u.appendChild(i.domElement);var l=J(e,u,r.before);return D.addClass(l,Z.CLASS_CONTROLLER_ROW),i instanceof N?D.addClass(l,"color"):D.addClass(l,f(i.getValue())),function(e,t,n){if(n.__li=t,n.__gui=e,s.extend(n,{options:function(t){if(arguments.length>1){var r=n.__li.nextElementSibling;return n.remove(),ne(e,n.object,n.property,{before:r,factoryArgs:[s.toArray(arguments)]})}if(s.isArray(t)||s.isObject(t)){var i=n.__li.nextElementSibling;return n.remove(),ne(e,n.object,n.property,{before:i,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof M){var r=new B(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});s.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(e){var t=n[e],i=r[e];n[e]=r[e]=function(){var e=[].slice.call(arguments);return i.apply(r,e),t.apply(n,e)}})),D.addClass(t,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof B){var i=function(t){if(s.isNumber(n.__min)&&s.isNumber(n.__max)){var r=n.__li.firstElementChild.firstElementChild.innerHTML,i=n.__gui.__listening.indexOf(n)>-1;n.remove();var o=ne(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return o.name(r),i&&o.listen(),o}return t};n.min=s.compose(i,n.min),n.max=s.compose(i,n.max)}else n instanceof C?(D.bind(t,"click",(function(){D.fakeEvent(n.__checkbox,"click")})),D.bind(n.__checkbox,"click",(function(e){e.stopPropagation()}))):n instanceof R?(D.bind(t,"click",(function(){D.fakeEvent(n.__button,"click")})),D.bind(t,"mouseover",(function(){D.addClass(n.__button,"hover")})),D.bind(t,"mouseout",(function(){D.removeClass(n.__button,"hover")}))):n instanceof N&&(D.addClass(t,"color"),n.updateDisplay=s.compose((function(e){return t.style.borderLeftColor=n.__color.toString(),e}),n.updateDisplay),n.updateDisplay());n.setValue=s.compose((function(t){return e.getRoot().__preset_select&&n.isModified()&&ee(e.getRoot(),!0),t}),n.setValue)}(e,l,i),e.__controllers.push(i),i}function re(e,t){return document.location.href+"."+t}function ie(e,t,n){var r=document.createElement("option");r.innerHTML=t,r.value=t,e.__preset_select.appendChild(r),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function oe(e,t){t.style.display=e.useLocalStorage?"block":"none"}function ae(e){var t=e.__save_row=document.createElement("li");D.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),D.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",D.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",D.addClass(r,"button"),D.addClass(r,"save");var i=document.createElement("span");i.innerHTML="New",D.addClass(i,"button"),D.addClass(i,"save-as");var o=document.createElement("span");o.innerHTML="Revert",D.addClass(o,"button"),D.addClass(o,"revert");var a=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?s.each(e.load.remembered,(function(t,n){ie(e,n,n===e.preset)})):ie(e,"Default",!1),D.bind(a,"change",(function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value})),t.appendChild(a),t.appendChild(n),t.appendChild(r),t.appendChild(i),t.appendChild(o),Y){var u=document.getElementById("dg-local-explain"),l=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(re(0,"isLocal"))&&l.setAttribute("checked","checked"),oe(e,u),D.bind(l,"change",(function(){e.useLocalStorage=!e.useLocalStorage,oe(e,u)}))}var _=document.getElementById("dg-new-constructor");D.bind(_,"keydown",(function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||W.hide()})),D.bind(n,"click",(function(){_.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),W.show(),_.focus(),_.select()})),D.bind(r,"click",(function(){e.save()})),D.bind(i,"click",(function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)})),D.bind(o,"click",(function(){e.revert()}))}function se(e){var t=void 0;function n(n){return n.preventDefault(),e.width+=t-n.clientX,e.onResize(),t=n.clientX,!1}function r(){D.removeClass(e.__closeButton,Z.CLASS_DRAG),D.unbind(window,"mousemove",n),D.unbind(window,"mouseup",r)}function i(i){return i.preventDefault(),t=i.clientX,D.addClass(e.__closeButton,Z.CLASS_DRAG),D.bind(window,"mousemove",n),D.bind(window,"mouseup",r),!1}e.__resize_handle=document.createElement("div"),s.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),D.bind(e.__resize_handle,"mousedown",i),D.bind(e.__closeButton,"mousedown",i),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function ue(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function le(e,t){var n={};return s.each(e.__rememberedObjects,(function(r,i){var o={},a=e.__rememberedObjectIndecesToControllers[i];s.each(a,(function(e,n){o[n]=t?e.initialValue:e.getValue()})),n[i]=o})),n}Z.toggleHide=function(){K=!K,s.each(q,(function(e){e.domElement.style.display=K?"none":""}))},Z.CLASS_AUTO_PLACE="a",Z.CLASS_AUTO_PLACE_CONTAINER="ac",Z.CLASS_MAIN="main",Z.CLASS_CONTROLLER_ROW="cr",Z.CLASS_TOO_TALL="taller-than-window",Z.CLASS_CLOSED="closed",Z.CLASS_CLOSE_BUTTON="close-button",Z.CLASS_CLOSE_TOP="close-top",Z.CLASS_CLOSE_BOTTOM="close-bottom",Z.CLASS_DRAG="drag",Z.DEFAULT_WIDTH=245,Z.TEXT_CLOSED="Close Controls",Z.TEXT_OPEN="Open Controls",Z._keydownHandler=function(e){"text"===document.activeElement.type||72!==e.which&&72!==e.keyCode||Z.toggleHide()},D.bind(window,"keydown",Z._keydownHandler,!1),s.extend(Z.prototype,{add:function(e,t){return ne(this,e,t,{factoryArgs:[].slice.call(arguments,2)})},addColor:function(e,t){return ne(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;s.defer((function(){t.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&V.removeChild(this.domElement);var e=this;s.each(this.__folders,(function(t){e.removeFolder(t)})),D.unbind(window,"keydown",Z._keydownHandler,!1),$(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new Z(t);this.__folders[e]=n;var r=J(this,n.domElement);return D.addClass(r,"folder"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],$(e);var t=this;s.each(e.__folders,(function(t){e.removeFolder(t)})),s.defer((function(){t.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=D.getOffset(e.__ul).top,n=0;s.each(e.__ul.childNodes,(function(t){e.autoPlace&&t===e.__save_row||(n+=D.getHeight(t))})),window.innerHeight-t-20<n?(D.addClass(e.domElement,Z.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(D.removeClass(e.domElement,Z.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&s.defer((function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"})),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:s.debounce((function(){this.onResize()}),50),remember:function(){if(s.isUndefined(W)&&((W=new z).domElement.innerHTML=G),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;s.each([].slice.call(arguments),(function(t){0===e.__rememberedObjects.length&&ae(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)})),this.autoPlace&&ue(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=le(this)),e.folders={},s.each(this.__folders,(function(t,n){e.folders[n]=t.getSaveObject()})),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=le(this),ee(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=le(this,!0)),this.load.remembered[e]=le(this),this.preset=e,ie(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){s.each(this.__controllers,(function(t){this.getRoot().load.remembered?te(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())}),this),s.each(this.__folders,(function(e){e.revert(e)})),e||ee(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&function e(t){0!==t.length&&Q.call(window,(function(){e(t)}));s.each(t,(function(e){e.updateDisplay()}))}(this.__listening)},updateDisplay:function(){s.each(this.__controllers,(function(e){e.updateDisplay()})),s.each(this.__folders,(function(e){e.updateDisplay()}))}});var _e=Z},146:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(29),n(26);var r=n(11),i=function(e,t,n,i,o){r.a.call(this),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=void 0!==o?o:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1};i.prototype=Object.assign(Object.create(r.a.prototype),{constructor:i,render:function(e,t,n){var r,i,o=e.autoClear;e.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial,this.clearColor&&(r=e.getClearColor().getHex(),i=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(r,i),this.scene.overrideMaterial=null,e.autoClear=o}})},147:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(29),n(26),n(77),n(50);var r=n(0),i=n(11),o=n(53),a=function(e,t,n,a){this.renderScene=t,this.renderCamera=n,this.selectedObjects=void 0!==a?a:[],this.visibleEdgeColor=new r.j(1,1,1),this.hiddenEdgeColor=new r.j(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,i.a.call(this),this.resolution=void 0!==e?new r.tb(e.x,e.y):new r.tb(256,256);var s={minFilter:r.C,magFilter:r.C,format:r.Z},u=Math.round(this.resolution.x/this.downSampleRatio),l=Math.round(this.resolution.y/this.downSampleRatio);this.maskBufferMaterial=new r.K({color:16777215}),this.maskBufferMaterial.side=r.n,this.renderTargetMaskBuffer=new r.zb(this.resolution.x,this.resolution.y,s),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new r.L,this.depthMaterial.side=r.n,this.depthMaterial.depthPacking=r.Y,this.depthMaterial.blending=r.O,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=r.n,this.prepareMaskMaterial.fragmentShader=function(e,t){var n=t.isPerspectiveCamera?"perspective":"orthographic";return e.replace(/DEPTH_TO_VIEW_Z/g,n+"DepthToViewZ")}(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new r.zb(this.resolution.x,this.resolution.y,s),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new r.zb(u,l,s),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new r.zb(u,l,s),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new r.zb(Math.round(u/2),Math.round(l/2),s),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new r.zb(u,l,s),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new r.zb(Math.round(u/2),Math.round(l/2),s),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1;this.separableBlurMaterial1=this.getSeperableBlurMaterial(4),this.separableBlurMaterial1.uniforms.texSize.value=new r.tb(u,l),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(4),this.separableBlurMaterial2.uniforms.texSize.value=new r.tb(Math.round(u/2),Math.round(l/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=4,this.overlayMaterial=this.getOverlayMaterial(),void 0===o.a&&console.error("OutlinePass relies on CopyShader");var _=o.a;this.copyUniforms=r.sb.clone(_.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new r.db({uniforms:this.copyUniforms,vertexShader:_.vertexShader,fragmentShader:_.fragmentShader,blending:r.O,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new r.j,this.oldClearAlpha=1,this.fsQuad=new i.a.FullScreenQuad(null),this.tempPulseColor1=new r.j,this.tempPulseColor2=new r.j,this.textureMatrix=new r.I};a.prototype=Object.assign(Object.create(i.a.prototype),{constructor:a,dispose:function(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose()},setSize:function(e,t){this.renderTargetMaskBuffer.setSize(e,t);var n=Math.round(e/this.downSampleRatio),i=Math.round(t/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(n,i),this.renderTargetBlurBuffer1.setSize(n,i),this.renderTargetEdgeBuffer1.setSize(n,i),this.separableBlurMaterial1.uniforms.texSize.value=new r.tb(n,i),n=Math.round(n/2),i=Math.round(i/2),this.renderTargetBlurBuffer2.setSize(n,i),this.renderTargetEdgeBuffer2.setSize(n,i),this.separableBlurMaterial2.uniforms.texSize.value=new r.tb(n,i)},changeVisibilityOfSelectedObjects:function(e){function t(t){t.isMesh&&(e?(t.visible=t.userData.oldVisible,delete t.userData.oldVisible):(t.userData.oldVisible=t.visible,t.visible=e))}for(var n=0;n<this.selectedObjects.length;n++){this.selectedObjects[n].traverse(t)}},changeVisibilityOfNonSelectedObjects:function(e){var t=[];function n(e){e.isMesh&&t.push(e)}for(var r=0;r<this.selectedObjects.length;r++){this.selectedObjects[r].traverse(n)}this.renderScene.traverse((function(n){if(n.isMesh||n.isLine||n.isSprite){for(var r=!1,i=0;i<t.length;i++){if(t[i].id===n.id){r=!0;break}}if(!r){var o=n.visible;e&&!n.bVisible||(n.visible=e),n.bVisible=o}}}))},updateTextureMatrix:function(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)},render:function(e,t,n,i,o){if(this.selectedObjects.length>0){this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha();var s=e.autoClear;e.autoClear=!1,o&&e.context.disable(e.context.STENCIL_TEST),e.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);var u=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,e.setRenderTarget(this.renderTargetDepthBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value=new r.tb(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,e.setRenderTarget(this.renderTargetMaskBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this.renderScene.background=u,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,e.setRenderTarget(this.renderTargetMaskDownSampleBuffer),e.clear(),this.fsQuad.render(e),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){var l=.625+.75*Math.cos(.01*performance.now()/this.pulsePeriod)/2;this.tempPulseColor1.multiplyScalar(l),this.tempPulseColor2.multiplyScalar(l)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value=new r.tb(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=a.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,e.setRenderTarget(this.renderTargetBlurBuffer1),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=a.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=a.BlurDirectionX,e.setRenderTarget(this.renderTargetBlurBuffer2),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=a.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer2),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,o&&e.context.enable(e.context.STENCIL_TEST),e.setRenderTarget(n),this.fsQuad.render(e),e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=s}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=n.texture,e.setRenderTarget(null),this.fsQuad.render(e))},getPrepareMaskMaterial:function(){return new r.db({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new r.tb(.5,.5)},textureMatrix:{value:new r.I}},vertexShader:["varying vec4 projTexCoord;","varying vec4 vPosition;","uniform mat4 textureMatrix;","void main() {","\tvPosition = modelViewMatrix * vec4( position, 1.0 );","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tprojTexCoord = textureMatrix * worldPosition;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <packing>","varying vec4 vPosition;","varying vec4 projTexCoord;","uniform sampler2D depthTexture;","uniform vec2 cameraNearFar;","void main() {","\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));","\tfloat viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );","\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;","\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);","}"].join("\n")})},getEdgeDetectionMaterial:function(){return new r.db({uniforms:{maskTexture:{value:null},texSize:{value:new r.tb(.5,.5)},visibleEdgeColor:{value:new r.ub(1,1,1)},hiddenEdgeColor:{value:new r.ub(1,1,1)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D maskTexture;\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec3 visibleEdgeColor;\t\t\t\tuniform vec3 hiddenEdgeColor;\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\t\t\t\t}"})},getSeperableBlurMaterial:function(e){return new r.db({defines:{MAX_RADIUS:e},uniforms:{colorTexture:{value:null},texSize:{value:new r.tb(.5,.5)},direction:{value:new r.tb(.5,.5)},kernelRadius:{value:1}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\t\t\t\tvarying vec2 vUv;\t\t\t\tuniform sampler2D colorTexture;\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\tuniform float kernelRadius;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, kernelRadius);\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\t\t\t\t\tvec2 uvOffset = delta;\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\t\t\t\t\t\tfloat w = gaussianPdf(uvOffset.x, kernelRadius);\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\t\t\t\t\t\tweightSum += (2.0 * w);\t\t\t\t\t\tuvOffset += delta;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\t\t\t\t}"})},getOverlayMaterial:function(){return new r.db({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D maskTexture;\t\t\t\tuniform sampler2D edgeTexture1;\t\t\t\tuniform sampler2D edgeTexture2;\t\t\t\tuniform sampler2D patternTexture;\t\t\t\tuniform float edgeStrength;\t\t\t\tuniform float edgeGlow;\t\t\t\tuniform bool usePatternTexture;\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\t\t\t\t\tif(usePatternTexture)\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\t\t\t\t\tgl_FragColor = finalColor;\t\t\t\t}",blending:r.a,depthTest:!1,depthWrite:!1,transparent:!0})}}),a.BlurDirectionX=new r.tb(1,0),a.BlurDirectionY=new r.tb(0,1)},148:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={uniforms:{tDiffuse:{value:null},resolution:{value:new(n(0).tb)(1/1024,1/512)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["precision highp float;","","uniform sampler2D tDiffuse;","","uniform vec2 resolution;","","varying vec2 vUv;","","// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)","","//----------------------------------------------------------------------------------","// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag","// SDK Version: v3.00","// Email:       gameworks@nvidia.com","// Site:        http://developer.nvidia.com/","//","// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.","//","// Redistribution and use in source and binary forms, with or without","// modification, are permitted provided that the following conditions","// are met:","//  * Redistributions of source code must retain the above copyright","//    notice, this list of conditions and the following disclaimer.","//  * Redistributions in binary form must reproduce the above copyright","//    notice, this list of conditions and the following disclaimer in the","//    documentation and/or other materials provided with the distribution.","//  * Neither the name of NVIDIA CORPORATION nor the names of its","//    contributors may be used to endorse or promote products derived","//    from this software without specific prior written permission.","//","// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY","// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE","// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR","// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR","// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,","// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,","// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR","// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY","// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT","// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE","// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.","//","//----------------------------------------------------------------------------------","","#define FXAA_PC 1","#define FXAA_GLSL_100 1","#define FXAA_QUALITY_PRESET 12","","#define FXAA_GREEN_AS_LUMA 1","","/*--------------------------------------------------------------------------*/","#ifndef FXAA_PC_CONSOLE","    //","    // The console algorithm for PC is included","    // for developers targeting really low spec machines.","    // Likely better to just run FXAA_PC, and use a really low preset.","    //","    #define FXAA_PC_CONSOLE 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_120","    #define FXAA_GLSL_120 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_130","    #define FXAA_GLSL_130 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_3","    #define FXAA_HLSL_3 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_4","    #define FXAA_HLSL_4 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_5","    #define FXAA_HLSL_5 0","#endif","/*==========================================================================*/","#ifndef FXAA_GREEN_AS_LUMA","    //","    // For those using non-linear color,","    // and either not able to get luma in alpha, or not wanting to,","    // this enables FXAA to run using green as a proxy for luma.","    // So with this enabled, no need to pack luma in alpha.","    //","    // This will turn off AA on anything which lacks some amount of green.","    // Pure red and blue or combination of only R and B, will get no AA.","    //","    // Might want to lower the settings for both,","    //    fxaaConsoleEdgeThresholdMin","    //    fxaaQualityEdgeThresholdMin","    // In order to insure AA does not get turned off on colors","    // which contain a minor amount of green.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_GREEN_AS_LUMA 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_EARLY_EXIT","    //","    // Controls algorithm's early exit path.","    // On PS3 turning this ON adds 2 cycles to the shader.","    // On 360 turning this OFF adds 10ths of a millisecond to the shader.","    // Turning this off on console will result in a more blurry image.","    // So this defaults to on.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_EARLY_EXIT 1","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_DISCARD","    //","    // Only valid for PC OpenGL currently.","    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.","    //","    // 1 = Use discard on pixels which don't need AA.","    //     For APIs which enable concurrent TEX+ROP from same surface.","    // 0 = Return unchanged color on pixels which don't need AA.","    //","    #define FXAA_DISCARD 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_FAST_PIXEL_OFFSET","    //","    // Used for GLSL 120 only.","    //","    // 1 = GL API supports fast pixel offsets","    // 0 = do not use fast pixel offsets","    //","    #ifdef GL_EXT_gpu_shader4","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifndef FXAA_FAST_PIXEL_OFFSET","        #define FXAA_FAST_PIXEL_OFFSET 0","    #endif","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GATHER4_ALPHA","    //","    // 1 = API supports gather4 on alpha channel.","    // 0 = API does not support gather4 on alpha channel.","    //","    #if (FXAA_HLSL_5 == 1)","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifndef FXAA_GATHER4_ALPHA","        #define FXAA_GATHER4_ALPHA 0","    #endif","#endif","","","/*============================================================================","                        FXAA QUALITY - TUNING KNOBS","------------------------------------------------------------------------------","NOTE the other tuning knobs are now in the shader function inputs!","============================================================================*/","#ifndef FXAA_QUALITY_PRESET","    //","    // Choose the quality preset.","    // This needs to be compiled into the shader as it effects code.","    // Best option to include multiple presets is to","    // in each shader define the preset, then include this file.","    //","    // OPTIONS","    // -----------------------------------------------------------------------","    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)","    // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)","    // 39       - no dither, very expensive","    //","    // NOTES","    // -----------------------------------------------------------------------","    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)","    // 13 = about same speed as FXAA 3.9 and better than 12","    // 23 = closest to FXAA 3.9 visually and performance wise","    //  _ = the lowest digit is directly related to performance","    // _  = the highest digit is directly related to style","    //","    #define FXAA_QUALITY_PRESET 12","#endif","","","/*============================================================================","","                           FXAA QUALITY - PRESETS","","============================================================================*/","","/*============================================================================","                     FXAA QUALITY - MEDIUM DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 10)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 3.0","    #define FXAA_QUALITY_P2 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 11)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 3.0","    #define FXAA_QUALITY_P3 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 12)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 4.0","    #define FXAA_QUALITY_P4 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 13)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 4.0","    #define FXAA_QUALITY_P5 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 14)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 4.0","    #define FXAA_QUALITY_P6 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 15)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 12.0","#endif","","/*============================================================================","                     FXAA QUALITY - LOW DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 20)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 2.0","    #define FXAA_QUALITY_P2 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 21)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 22)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 23)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 24)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 3.0","    #define FXAA_QUALITY_P6 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 25)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 26)","    #define FXAA_QUALITY_PS 9","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 4.0","    #define FXAA_QUALITY_P8 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 27)","    #define FXAA_QUALITY_PS 10","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 4.0","    #define FXAA_QUALITY_P9 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 28)","    #define FXAA_QUALITY_PS 11","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 4.0","    #define FXAA_QUALITY_P10 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 29)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","/*============================================================================","                     FXAA QUALITY - EXTREME QUALITY","============================================================================*/","#if (FXAA_QUALITY_PRESET == 39)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.0","    #define FXAA_QUALITY_P2 1.0","    #define FXAA_QUALITY_P3 1.0","    #define FXAA_QUALITY_P4 1.0","    #define FXAA_QUALITY_P5 1.5","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","","","/*============================================================================","","                                API PORTING","","============================================================================*/","#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)","    #define FxaaBool bool","    #define FxaaDiscard discard","    #define FxaaFloat float","    #define FxaaFloat2 vec2","    #define FxaaFloat3 vec3","    #define FxaaFloat4 vec4","    #define FxaaHalf float","    #define FxaaHalf2 vec2","    #define FxaaHalf3 vec3","    #define FxaaHalf4 vec4","    #define FxaaInt2 ivec2","    #define FxaaSat(x) clamp(x, 0.0, 1.0)","    #define FxaaTex sampler2D","#else","    #define FxaaBool bool","    #define FxaaDiscard clip(-1)","    #define FxaaFloat float","    #define FxaaFloat2 float2","    #define FxaaFloat3 float3","    #define FxaaFloat4 float4","    #define FxaaHalf half","    #define FxaaHalf2 half2","    #define FxaaHalf3 half3","    #define FxaaHalf4 half4","    #define FxaaSat(x) saturate(x)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_100 == 1)","  #define FxaaTexTop(t, p) texture2D(t, p, 0.0)","  #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_120 == 1)","    // Requires,","    //  #version 120","    // And at least,","    //  #extension GL_EXT_gpu_shader4 : enable","    //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)","    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)","    #if (FXAA_FAST_PIXEL_OFFSET == 1)","        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)","    #else","        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)","    #endif","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_130 == 1)",'    // Requires "#version 130" or better',"    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)","    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_3 == 1)","    #define FxaaInt2 float2","    #define FxaaTex sampler2D","    #define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))","    #define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_4 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_5 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","    #define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)","    #define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)","    #define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)","    #define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)","#endif","","","/*============================================================================","                   GREEN AS LUMA OPTION SUPPORT FUNCTION","============================================================================*/","#if (FXAA_GREEN_AS_LUMA == 0)","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }","#else","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }","#endif","","","","","/*============================================================================","","                             FXAA3 QUALITY - PC","","============================================================================*/","#if (FXAA_PC == 1)","/*--------------------------------------------------------------------------*/","FxaaFloat4 FxaaPixelShader(","    //","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy} = center of pixel","    FxaaFloat2 pos,","    //","    // Used only for FXAA Console, and not used on the 360 version.","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy_} = upper left of pixel","    // {_zw} = lower right of pixel","    FxaaFloat4 fxaaConsolePosPos,","    //","    // Input color texture.","    // {rgb_} = color in linear or perceptual color space","    // if (FXAA_GREEN_AS_LUMA == 0)","    //     {__a} = luma in perceptual color space (not linear)","    FxaaTex tex,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 2nd sampler.","    // This sampler needs to have an exponent bias of -1.","    FxaaTex fxaaConsole360TexExpBiasNegOne,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 3nd sampler.","    // This sampler needs to have an exponent bias of -2.","    FxaaTex fxaaConsole360TexExpBiasNegTwo,","    //","    // Only used on FXAA Quality.","    // This must be from a constant/uniform.","    // {x_} = 1.0/screenWidthInPixels","    // {_y} = 1.0/screenHeightInPixels","    FxaaFloat2 fxaaQualityRcpFrame,","    //","    // Only used on FXAA Console.","    // This must be from a constant/uniform.","    // This effects sub-pixel AA quality and inversely sharpness.","    //   Where N ranges between,","    //     N = 0.50 (default)","    //     N = 0.33 (sharper)","    // {x__} = -N/screenWidthInPixels","    // {_y_} = -N/screenHeightInPixels","    // {_z_} =  N/screenWidthInPixels","    // {__w} =  N/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt,","    //","    // Only used on FXAA Console.","    // Not used on 360, but used on PS3 and PC.","    // This must be from a constant/uniform.","    // {x__} = -2.0/screenWidthInPixels","    // {_y_} = -2.0/screenHeightInPixels","    // {_z_} =  2.0/screenWidthInPixels","    // {__w} =  2.0/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt2,","    //","    // Only used on FXAA Console.","    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.","    // This must be from a constant/uniform.","    // {x__} =  8.0/screenWidthInPixels","    // {_y_} =  8.0/screenHeightInPixels","    // {_z_} = -4.0/screenWidthInPixels","    // {__w} = -4.0/screenHeightInPixels","    FxaaFloat4 fxaaConsole360RcpFrameOpt2,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_SUBPIX define.","    // It is here now to allow easier tuning.","    // Choose the amount of sub-pixel aliasing removal.","    // This can effect sharpness.","    //   1.00 - upper limit (softer)","    //   0.75 - default amount of filtering","    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)","    //   0.25 - almost off","    //   0.00 - completely off","    FxaaFloat fxaaQualitySubpix,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // The minimum amount of local contrast required to apply algorithm.","    //   0.333 - too little (faster)","    //   0.250 - low quality","    //   0.166 - default","    //   0.125 - high quality","    //   0.063 - overkill (slower)","    FxaaFloat fxaaQualityEdgeThreshold,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    //   0.0833 - upper limit (default, the start of visible unfiltered edges)","    //   0.0625 - high quality (faster)","    //   0.0312 - visible limit (slower)","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaQualityEdgeThresholdMin,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only three safe values here: 2 and 4 and 8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // For all other platforms can be a non-power of two.","    //   8.0 is sharper (default!!!)","    //   4.0 is softer","    //   2.0 is really soft (good only for vector graphics inputs)","    FxaaFloat fxaaConsoleEdgeSharpness,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only two safe values here: 1/4 and 1/8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // The console setting has a different mapping than the quality setting.","    // Other platforms can use other values.","    //   0.125 leaves less aliasing, but is softer (default!!!)","    //   0.25 leaves more aliasing, and is sharper","    FxaaFloat fxaaConsoleEdgeThreshold,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    // The console setting has a different mapping than the quality setting.","    // This only applies when FXAA_EARLY_EXIT is 1.","    // This does not apply to PS3,","    // PS3 was simplified to avoid more shader instructions.","    //   0.06 - faster but more aliasing in darks","    //   0.05 - default","    //   0.04 - slower and less aliasing in darks","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaConsoleEdgeThresholdMin,","    //","    // Extra constants for 360 FXAA Console only.","    // Use zeros or anything else for other platforms.","    // These must be in physical constant registers and NOT immediates.","    // Immediates will result in compiler un-optimizing.","    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)","    FxaaFloat4 fxaaConsole360ConstDir",") {","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posM;","    posM.x = pos.x;","    posM.y = pos.y;","    #if (FXAA_GATHER4_ALPHA == 1)","        #if (FXAA_DISCARD == 0)","            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","            #if (FXAA_GREEN_AS_LUMA == 0)","                #define lumaM rgbyM.w","            #else","                #define lumaM rgbyM.y","            #endif","        #endif","        #if (FXAA_GREEN_AS_LUMA == 0)","            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));","        #else","            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));","        #endif","        #if (FXAA_DISCARD == 1)","            #define lumaM luma4A.w","        #endif","        #define lumaE luma4A.z","        #define lumaS luma4A.x","        #define lumaSE luma4A.y","        #define lumaNW luma4B.w","        #define lumaN luma4B.z","        #define lumaW luma4B.x","    #else","        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","        #if (FXAA_GREEN_AS_LUMA == 0)","            #define lumaM rgbyM.w","        #else","            #define lumaM rgbyM.y","        #endif","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));","        #endif","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat maxSM = max(lumaS, lumaM);","    FxaaFloat minSM = min(lumaS, lumaM);","    FxaaFloat maxESM = max(lumaE, maxSM);","    FxaaFloat minESM = min(lumaE, minSM);","    FxaaFloat maxWN = max(lumaN, lumaW);","    FxaaFloat minWN = min(lumaN, lumaW);","    FxaaFloat rangeMax = max(maxWN, maxESM);","    FxaaFloat rangeMin = min(minWN, minESM);","    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;","    FxaaFloat range = rangeMax - rangeMin;","    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);","    FxaaBool earlyExit = range < rangeMaxClamped;","/*--------------------------------------------------------------------------*/","    if(earlyExit)","        #if (FXAA_DISCARD == 1)","            FxaaDiscard;","        #else","            return rgbyM;","        #endif","/*--------------------------------------------------------------------------*/","    #if (FXAA_GATHER4_ALPHA == 0)","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","        #endif","    #else","        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));","        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNS = lumaN + lumaS;","    FxaaFloat lumaWE = lumaW + lumaE;","    FxaaFloat subpixRcpRange = 1.0/range;","    FxaaFloat subpixNSWE = lumaNS + lumaWE;","    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;","    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNESE = lumaNE + lumaSE;","    FxaaFloat lumaNWNE = lumaNW + lumaNE;","    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;","    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNWSW = lumaNW + lumaSW;","    FxaaFloat lumaSWSE = lumaSW + lumaSE;","    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);","    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);","    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;","    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;","    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;","    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;","/*--------------------------------------------------------------------------*/","    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;","    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;","    FxaaBool horzSpan = edgeHorz >= edgeVert;","    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;","/*--------------------------------------------------------------------------*/","    if(!horzSpan) lumaN = lumaW;","    if(!horzSpan) lumaS = lumaE;","    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;","    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;","/*--------------------------------------------------------------------------*/","    FxaaFloat gradientN = lumaN - lumaM;","    FxaaFloat gradientS = lumaS - lumaM;","    FxaaFloat lumaNN = lumaN + lumaM;","    FxaaFloat lumaSS = lumaS + lumaM;","    FxaaBool pairN = abs(gradientN) >= abs(gradientS);","    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));","    if(pairN) lengthSign = -lengthSign;","    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posB;","    posB.x = posM.x;","    posB.y = posM.y;","    FxaaFloat2 offNP;","    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;","    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;","    if(!horzSpan) posB.x += lengthSign * 0.5;","    if( horzSpan) posB.y += lengthSign * 0.5;","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posN;","    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;","    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;","    FxaaFloat2 posP;","    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;","    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;","    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;","    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));","    FxaaFloat subpixE = subpixC * subpixC;","    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));","/*--------------------------------------------------------------------------*/","    if(!pairN) lumaNN = lumaSS;","    FxaaFloat gradientScaled = gradient * 1.0/4.0;","    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;","    FxaaFloat subpixF = subpixD * subpixE;","    FxaaBool lumaMLTZero = lumaMM < 0.0;","/*--------------------------------------------------------------------------*/","    lumaEndN -= lumaNN * 0.5;","    lumaEndP -= lumaNN * 0.5;","    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;","    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;","    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;","    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;","    FxaaBool doneNP = (!doneN) || (!doneP);","    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;","    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;","/*--------------------------------------------------------------------------*/","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 3)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 4)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 5)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 6)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;","/*--------------------------------------------------------------------------*/","                        #if (FXAA_QUALITY_PS > 7)","                        if(doneNP) {","                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                            doneN = abs(lumaEndN) >= gradientScaled;","                            doneP = abs(lumaEndP) >= gradientScaled;","                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;","                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;","                            doneNP = (!doneN) || (!doneP);","                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;","                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;","/*--------------------------------------------------------------------------*/","    #if (FXAA_QUALITY_PS > 8)","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 9)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 10)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 11)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 12)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","    #endif","/*--------------------------------------------------------------------------*/","                        }","                        #endif","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","/*--------------------------------------------------------------------------*/","    FxaaFloat dstN = posM.x - posN.x;","    FxaaFloat dstP = posP.x - posM.x;","    if(!horzSpan) dstN = posM.y - posN.y;","    if(!horzSpan) dstP = posP.y - posM.y;","/*--------------------------------------------------------------------------*/","    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;","    FxaaFloat spanLength = (dstP + dstN);","    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;","    FxaaFloat spanLengthRcp = 1.0/spanLength;","/*--------------------------------------------------------------------------*/","    FxaaBool directionN = dstN < dstP;","    FxaaFloat dst = min(dstN, dstP);","    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;","    FxaaFloat subpixG = subpixF * subpixF;","    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;","    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;","/*--------------------------------------------------------------------------*/","    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;","    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);","    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;","    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;","    #if (FXAA_DISCARD == 1)","        return FxaaTexTop(tex, posM);","    #else","        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);","    #endif","}","/*==========================================================================*/","#endif","","void main() {","  gl_FragColor = FxaaPixelShader(","    vUv,","    vec4(0.0),","    tDiffuse,","    tDiffuse,","    tDiffuse,","    resolution,","    vec4(0.0),","    vec4(0.0),","    vec4(0.0),","    0.75,","    0.166,","    0.0833,","    0.0,","    0.0,","    0.0,","    vec4(0.0)","  );","","  // TODO avoid querying texture twice for same texel","  gl_FragColor.a = texture2D(tDiffuse, vUv).a;","}"].join("\n")}},150:function(e,t,n){"use strict";n.d(t,"a",(function(){return Y}));n(58),n(59),n(140),n(212),n(77),n(213),n(104),n(93),n(102),n(40),n(41),n(126),n(89),n(75),n(214),n(136),n(103),n(216),n(50),n(61),n(137),n(60),n(74),n(39),n(28),n(20),n(70),n(218);var r=n(0),i=(n(123),n(99),n(101),{}),o=i;function a(e,t){var n,r=e.split("."),i=o;!(r[0]in i)&&i.execScript&&i.execScript("var "+r[0]);for(;r.length&&(n=r.shift());)r.length||void 0===t?i=i[n]?i[n]:i[n]={}:i[n]=t}var s="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function u(e){var t,n,r,i,o,a,u,l,_,c,d=e.length,p=0,f=Number.POSITIVE_INFINITY;for(l=0;l<d;++l)e[l]>p&&(p=e[l]),e[l]<f&&(f=e[l]);for(t=1<<p,n=new(s?Uint32Array:Array)(t),r=1,i=0,o=2;r<=p;){for(l=0;l<d;++l)if(e[l]===r){for(a=0,u=i,_=0;_<r;++_)a=a<<1|1&u,u>>=1;for(c=r<<16|l,_=a;_<t;_+=o)n[_]=c;++i}++r,i<<=1,o<<=1}return[n,p,f]}function l(e,t){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=s?new Uint8Array(e):e,this.m=!1,this.i=c,this.r=!1,!t&&(t={})||(t.index&&(this.a=t.index),t.bufferSize&&(this.h=t.bufferSize),t.bufferType&&(this.i=t.bufferType),t.resize&&(this.r=t.resize)),this.i){case _:this.b=32768,this.c=new(s?Uint8Array:Array)(32768+this.h+258);break;case c:this.b=0,this.c=new(s?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var _=0,c=1,d={t:_,s:c};l.prototype.k=function(){for(;!this.m;){var e=O(this,3);switch(1&e&&(this.m=!0),e>>>=1){case 0:var t=this.input,n=this.a,r=this.c,i=this.b,o=t.length,a=void 0,l=r.length,d=void 0;if(this.d=this.f=0,n+1>=o)throw Error("invalid uncompressed block header: LEN");if(a=t[n++]|t[n++]<<8,n+1>=o)throw Error("invalid uncompressed block header: NLEN");if(a===~(t[n++]|t[n++]<<8))throw Error("invalid uncompressed block header: length verify");if(n+a>t.length)throw Error("input buffer is broken");switch(this.i){case _:for(;i+a>r.length;){if(a-=d=l-i,s)r.set(t.subarray(n,n+d),i),i+=d,n+=d;else for(;d--;)r[i++]=t[n++];this.b=i,r=this.e(),i=this.b}break;case c:for(;i+a>r.length;)r=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(s)r.set(t.subarray(n,n+a),i),i+=a,n+=a;else for(;a--;)r[i++]=t[n++];this.a=n,this.b=i,this.c=r;break;case 1:this.j(C,I);break;case 2:var p,f,h,A,y=O(this,5)+257,b=O(this,5)+1,v=O(this,4)+4,g=new(s?Uint8Array:Array)(m.length),E=void 0,F=void 0,T=void 0,x=void 0,P=void 0;for(P=0;P<v;++P)g[m[P]]=O(this,3);if(!s)for(P=v,v=g.length;P<v;++P)g[m[P]]=0;for(p=u(g),E=new(s?Uint8Array:Array)(y+b),P=0,A=y+b;P<A;)switch(F=S(this,p)){case 16:for(x=3+O(this,2);x--;)E[P++]=T;break;case 17:for(x=3+O(this,3);x--;)E[P++]=0;T=0;break;case 18:for(x=11+O(this,7);x--;)E[P++]=0;T=0;break;default:T=E[P++]=F}f=u(s?E.subarray(0,y):E.slice(0,y)),h=u(s?E.subarray(y):E.slice(y)),this.j(f,h);break;default:throw Error("unknown BTYPE: "+e)}}return this.n()};var p,f,h=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],m=s?new Uint16Array(h):h,A=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],y=s?new Uint16Array(A):A,b=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],v=s?new Uint8Array(b):b,g=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],E=s?new Uint16Array(g):g,F=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],T=s?new Uint8Array(F):F,x=new(s?Uint8Array:Array)(288);for(p=0,f=x.length;p<f;++p)x[p]=143>=p?8:255>=p?9:279>=p?7:8;var P,D,C=u(x),w=new(s?Uint8Array:Array)(30);for(P=0,D=w.length;P<D;++P)w[P]=5;var I=u(w);function O(e,t){for(var n,r=e.f,i=e.d,o=e.input,a=e.a,s=o.length;i<t;){if(a>=s)throw Error("input buffer is broken");r|=o[a++]<<i,i+=8}return n=r&(1<<t)-1,e.f=r>>>t,e.d=i-t,e.a=a,n}function S(e,t){for(var n,r,i=e.f,o=e.d,a=e.input,s=e.a,u=a.length,l=t[0],_=t[1];o<_&&!(s>=u);)i|=a[s++]<<o,o+=8;if((r=(n=l[i&(1<<_)-1])>>>16)>o)throw Error("invalid code length: "+r);return e.f=i>>r,e.d=o-r,e.a=s,65535&n}function B(e,t){var n,r;switch(this.input=e,this.a=0,!t&&(t={})||(t.index&&(this.a=t.index),t.verify&&(this.A=t.verify)),n=e[this.a++],r=e[this.a++],15&n){case L:this.method=L;break;default:throw Error("unsupported compression method")}if(0!=((n<<8)+r)%31)throw Error("invalid fcheck flag:"+((n<<8)+r)%31);if(32&r)throw Error("fdict flag is not supported");this.q=new l(e,{index:this.a,bufferSize:t.bufferSize,bufferType:t.bufferType,resize:t.resize})}l.prototype.j=function(e,t){var n=this.c,r=this.b;this.o=e;for(var i,o,a,s,u=n.length-258;256!==(i=S(this,e));)if(256>i)r>=u&&(this.b=r,n=this.e(),r=this.b),n[r++]=i;else for(s=y[o=i-257],0<v[o]&&(s+=O(this,v[o])),i=S(this,t),a=E[i],0<T[i]&&(a+=O(this,T[i])),r>=u&&(this.b=r,n=this.e(),r=this.b);s--;)n[r]=n[r++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=r},l.prototype.w=function(e,t){var n=this.c,r=this.b;this.o=e;for(var i,o,a,s,u=n.length;256!==(i=S(this,e));)if(256>i)r>=u&&(u=(n=this.e()).length),n[r++]=i;else for(s=y[o=i-257],0<v[o]&&(s+=O(this,v[o])),i=S(this,t),a=E[i],0<T[i]&&(a+=O(this,T[i])),r+s>u&&(u=(n=this.e()).length);s--;)n[r]=n[r++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=r},l.prototype.e=function(){var e,t,n=new(s?Uint8Array:Array)(this.b-32768),r=this.b-32768,i=this.c;if(s)n.set(i.subarray(32768,n.length));else for(e=0,t=n.length;e<t;++e)n[e]=i[e+32768];if(this.g.push(n),this.l+=n.length,s)i.set(i.subarray(r,r+32768));else for(e=0;32768>e;++e)i[e]=i[r+e];return this.b=32768,i},l.prototype.z=function(e){var t,n,r,i=this.input.length/this.a+1|0,o=this.input,a=this.c;return e&&("number"==typeof e.p&&(i=e.p),"number"==typeof e.u&&(i+=e.u)),2>i?n=(r=(o.length-this.a)/this.o[2]/2*258|0)<a.length?a.length+r:a.length<<1:n=a.length*i,s?(t=new Uint8Array(n)).set(a):t=a,this.c=t},l.prototype.n=function(){var e,t,n,r,i,o=0,a=this.c,u=this.g,l=new(s?Uint8Array:Array)(this.l+(this.b-32768));if(0===u.length)return s?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(t=0,n=u.length;t<n;++t)for(r=0,i=(e=u[t]).length;r<i;++r)l[o++]=e[r];for(t=32768,n=this.b;t<n;++t)l[o++]=a[t];return this.g=[],this.buffer=l},l.prototype.v=function(){var e,t=this.b;return s?this.r?(e=new Uint8Array(t)).set(this.c.subarray(0,t)):e=this.c.subarray(0,t):(this.c.length>t&&(this.c.length=t),e=this.c),this.buffer=e},B.prototype.k=function(){var e,t,n=this.input;if(e=this.q.k(),this.a=this.q.a,this.A){t=(n[this.a++]<<24|n[this.a++]<<16|n[this.a++]<<8|n[this.a++])>>>0;var r=e;if("string"==typeof r){var i,o,a=r.split("");for(i=0,o=a.length;i<o;i++)a[i]=(255&a[i].charCodeAt(0))>>>0;r=a}for(var s,u=1,l=0,_=r.length,c=0;0<_;){_-=s=1024<_?1024:_;do{l+=u+=r[c++]}while(--s);u%=65521,l%=65521}if(t!==(l<<16|u)>>>0)throw Error("invalid adler-32 checksum")}return e};var L=8;a("Zlib.Inflate",B),a("Zlib.Inflate.prototype.decompress",B.prototype.k);var M,R,N,U,k={ADAPTIVE:d.s,BLOCK:d.t};if(Object.keys)M=Object.keys(k);else for(R in M=[],N=0,k)M[N++]=R;for(N=0,U=M.length;N<U;++N)a("Zlib.Inflate.BufferType."+(R=M[N]),k[R]);var j=i.Zlib,G=(n(120),function(e){this.manager=void 0!==e?e:r.l});G.prototype={constructor:G,load:function(e,t,n,i){var o=this,a=new r.lb,s=new r.r(this.manager);return s.setResponseType("arraybuffer"),s.setPath(this.path),s.load(e,(function(e){a.image=o.parse(e),a.needsUpdate=!0,void 0!==t&&t(a)}),n,i),a},parse:function(e){var t=0,n=1,r=2,i=3,o=9,a=10,s=11,u=48,l=4,_=0,c=1,d=2,p=3;e.length<19&&console.error("THREE.TGALoader: Not enough data to contain header.");var f=new Uint8Array(e),h=0,m={id_length:f[h++],colormap_type:f[h++],image_type:f[h++],colormap_index:f[h++]|f[h++]<<8,colormap_length:f[h++]|f[h++]<<8,colormap_size:f[h++],origin:[f[h++]|f[h++]<<8,f[h++]|f[h++]<<8],width:f[h++]|f[h++]<<8,height:f[h++]|f[h++]<<8,pixel_size:f[h++],flags:f[h++]};!function(e){switch(e.image_type){case n:case o:(e.colormap_length>256||24!==e.colormap_size||1!==e.colormap_type)&&console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case r:case i:case a:case s:e.colormap_type&&console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case t:console.error("THREE.TGALoader: No data.");default:console.error('THREE.TGALoader: Invalid type "%s".',e.image_type)}(e.width<=0||e.height<=0)&&console.error("THREE.TGALoader: Invalid image size."),8!==e.pixel_size&&16!==e.pixel_size&&24!==e.pixel_size&&32!==e.pixel_size&&console.error('THREE.TGALoader: Invalid pixel size "%s".',e.pixel_size)}(m),m.id_length+h>e.length&&console.error("THREE.TGALoader: No data."),h+=m.id_length;var A=!1,y=!1,b=!1;switch(m.image_type){case o:A=!0,y=!0;break;case n:y=!0;break;case a:A=!0;break;case r:break;case s:A=!0,b=!0;break;case i:b=!0}var v="undefined"!=typeof OffscreenCanvas,g=v?new OffscreenCanvas(m.width,m.height):document.createElement("canvas");g.width=m.width,g.height=m.height;var E=g.getContext("2d"),F=E.createImageData(m.width,m.height),T=function(e,t,n,r,i){var o,a,s,u;if(a=n.pixel_size>>3,s=n.width*n.height*a,t&&(u=i.subarray(r,r+=n.colormap_length*(n.colormap_size>>3))),e){var l,_,c;o=new Uint8Array(s);for(var d=0,p=new Uint8Array(a);d<s;)if(_=1+(127&(l=i[r++])),128&l){for(c=0;c<a;++c)p[c]=i[r++];for(c=0;c<_;++c)o.set(p,d+c*a);d+=a*_}else{for(_*=a,c=0;c<_;++c)o[d+c]=i[r++];d+=_}}else o=i.subarray(r,r+=t?n.width*n.height:s);return{pixel_data:o,palettes:u}}(A,y,m,h,f);!function(e,t,n,r,i){var o,a,s,f,h,A;switch((m.flags&u)>>l){default:case d:o=0,s=1,h=t,a=0,f=1,A=n;break;case _:o=0,s=1,h=t,a=n-1,f=-1,A=-1;break;case p:o=t-1,s=-1,h=-1,a=0,f=1,A=n;break;case c:o=t-1,s=-1,h=-1,a=n-1,f=-1,A=-1}if(b)switch(m.pixel_size){case 8:!function(e,t,n,r,i,o,a,s){var u,l,_,c=0,d=m.width;for(_=t;_!==r;_+=n)for(l=i;l!==a;l+=o,c++)u=s[c],e[4*(l+d*_)+0]=u,e[4*(l+d*_)+1]=u,e[4*(l+d*_)+2]=u,e[4*(l+d*_)+3]=255}(e,a,f,A,o,s,h,r);break;case 16:!function(e,t,n,r,i,o,a,s){var u,l,_=0,c=m.width;for(l=t;l!==r;l+=n)for(u=i;u!==a;u+=o,_+=2)e[4*(u+c*l)+0]=s[_+0],e[4*(u+c*l)+1]=s[_+0],e[4*(u+c*l)+2]=s[_+0],e[4*(u+c*l)+3]=s[_+1]}(e,a,f,A,o,s,h,r);break;default:console.error("THREE.TGALoader: Format not supported.")}else switch(m.pixel_size){case 8:!function(e,t,n,r,i,o,a,s,u){var l,_,c,d=u,p=0,f=m.width;for(c=t;c!==r;c+=n)for(_=i;_!==a;_+=o,p++)l=s[p],e[4*(_+f*c)+3]=255,e[4*(_+f*c)+2]=d[3*l+0],e[4*(_+f*c)+1]=d[3*l+1],e[4*(_+f*c)+0]=d[3*l+2]}(e,a,f,A,o,s,h,r,i);break;case 16:!function(e,t,n,r,i,o,a,s){var u,l,_,c=0,d=m.width;for(_=t;_!==r;_+=n)for(l=i;l!==a;l+=o,c+=2)u=s[c+0]+(s[c+1]<<8),e[4*(l+d*_)+0]=(31744&u)>>7,e[4*(l+d*_)+1]=(992&u)>>2,e[4*(l+d*_)+2]=(31&u)>>3,e[4*(l+d*_)+3]=32768&u?0:255}(e,a,f,A,o,s,h,r);break;case 24:!function(e,t,n,r,i,o,a,s){var u,l,_=0,c=m.width;for(l=t;l!==r;l+=n)for(u=i;u!==a;u+=o,_+=3)e[4*(u+c*l)+3]=255,e[4*(u+c*l)+2]=s[_+0],e[4*(u+c*l)+1]=s[_+1],e[4*(u+c*l)+0]=s[_+2]}(e,a,f,A,o,s,h,r);break;case 32:!function(e,t,n,r,i,o,a,s){var u,l,_=0,c=m.width;for(l=t;l!==r;l+=n)for(u=i;u!==a;u+=o,_+=4)e[4*(u+c*l)+2]=s[_+0],e[4*(u+c*l)+1]=s[_+1],e[4*(u+c*l)+0]=s[_+2],e[4*(u+c*l)+3]=s[_+3]}(e,a,f,A,o,s,h,r);break;default:console.error("THREE.TGALoader: Format not supported.")}}(F.data,m.width,m.height,T.pixel_data,T.palettes);return E.putImageData(F,0,0),v?g.transferToImageBitmap():g},setPath:function(e){return this.path=e,this}};n(29),n(129);var X={findSpan:function(e,t,n){var r=n.length-e-1;if(t>=n[r])return r-1;if(t<=n[e])return e;for(var i=e,o=r,a=Math.floor((i+o)/2);t<n[a]||t>=n[a+1];)t<n[a]?o=a:i=a,a=Math.floor((i+o)/2);return a},calcBasisFunctions:function(e,t,n,r){var i=[],o=[],a=[];i[0]=1;for(var s=1;s<=n;++s){o[s]=t-r[e+1-s],a[s]=r[e+s]-t;for(var u=0,l=0;l<s;++l){var _=a[l+1],c=o[s-l],d=i[l]/(_+c);i[l]=u+_*d,u=c*d}i[s]=u}return i},calcBSplinePoint:function(e,t,n,i){for(var o=this.findSpan(e,i,t),a=this.calcBasisFunctions(o,i,e,t),s=new r.vb(0,0,0,0),u=0;u<=e;++u){var l=n[o-e+u],_=a[u],c=l.w*_;s.x+=l.x*c,s.y+=l.y*c,s.z+=l.z*c,s.w+=l.w*_}return s},calcBasisFunctionDerivatives:function(e,t,n,r,i){for(var o=[],a=0;a<=n;++a)o[a]=0;var s=[];for(a=0;a<=r;++a)s[a]=o.slice(0);var u=[];for(a=0;a<=n;++a)u[a]=o.slice(0);u[0][0]=1;for(var l=o.slice(0),_=o.slice(0),c=1;c<=n;++c){l[c]=t-i[e+1-c],_[c]=i[e+c]-t;for(var d=0,p=0;p<c;++p){var f=_[p+1],h=l[c-p];u[c][p]=f+h;var m=u[p][c-1]/u[c][p];u[p][c]=d+f*m,d=h*m}u[c][c]=d}for(c=0;c<=n;++c)s[0][c]=u[c][n];for(p=0;p<=n;++p){var A=0,y=1,b=[];for(a=0;a<=n;++a)b[a]=o.slice(0);b[0][0]=1;for(var v=1;v<=r;++v){var g=0,E=p-v,F=n-v;p>=v&&(b[y][0]=b[A][0]/u[F+1][E],g=b[y][0]*u[E][F]);var T=p-1<=F?v-1:n-p;for(c=E>=-1?1:-E;c<=T;++c)b[y][c]=(b[A][c]-b[A][c-1])/u[F+1][E+c],g+=b[y][c]*u[E+c][F];p<=F&&(b[y][v]=-b[A][v-1]/u[F+1][p],g+=b[y][v]*u[p][F]),s[v][p]=g;c=A;A=y,y=c}}for(p=n,v=1;v<=r;++v){for(c=0;c<=n;++c)s[v][c]*=p;p*=n-v}return s},calcBSplineDerivatives:function(e,t,n,i,o){for(var a=o<e?o:e,s=[],u=this.findSpan(e,i,t),l=this.calcBasisFunctionDerivatives(u,i,e,a,t),_=[],c=0;c<n.length;++c){var d=(f=n[c].clone()).w;f.x*=d,f.y*=d,f.z*=d,_[c]=f}for(var p=0;p<=a;++p){for(var f=_[u-e].clone().multiplyScalar(l[p][0]),h=1;h<=e;++h)f.add(_[u-e+h].clone().multiplyScalar(l[p][h]));s[p]=f}for(p=a+1;p<=o+1;++p)s[p]=new r.vb(0,0,0);return s},calcKoverI:function(e,t){for(var n=1,r=2;r<=e;++r)n*=r;var i=1;for(r=2;r<=t;++r)i*=r;for(r=2;r<=e-t;++r)i*=r;return n/i},calcRationalCurveDerivatives:function(e){for(var t=e.length,n=[],i=[],o=0;o<t;++o){var a=e[o];n[o]=new r.ub(a.x,a.y,a.z),i[o]=a.w}for(var s=[],u=0;u<t;++u){var l=n[u].clone();for(o=1;o<=u;++o)l.sub(s[u-o].clone().multiplyScalar(this.calcKoverI(u,o)*i[o]));s[u]=l.divideScalar(i[0])}return s},calcNURBSDerivatives:function(e,t,n,r,i){var o=this.calcBSplineDerivatives(e,t,n,r,i);return this.calcRationalCurveDerivatives(o)},calcSurfacePoint:function(e,t,n,i,o,a,s,u){for(var l=this.findSpan(e,a,n),_=this.findSpan(t,s,i),c=this.calcBasisFunctions(l,a,e,n),d=this.calcBasisFunctions(_,s,t,i),p=[],f=0;f<=t;++f){p[f]=new r.vb(0,0,0,0);for(var h=0;h<=e;++h){var m=o[l-e+h][_-t+f].clone(),A=m.w;m.x*=A,m.y*=A,m.z*=A,p[f].add(m.multiplyScalar(c[h]))}}var y=new r.vb(0,0,0,0);for(f=0;f<=t;++f)y.add(p[f].multiplyScalar(d[f]));y.divideScalar(y.w),u.set(y.x,y.y,y.z)}},Q=function(e,t,n,i,o){r.k.call(this),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=i||0,this.endKnot=o||this.knots.length-1;for(var a=0;a<n.length;++a){var s=n[a];this.controlPoints[a]=new r.vb(s.x,s.y,s.z,s.w)}};function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(Q.prototype=Object.create(r.k.prototype)).constructor=Q,Q.prototype.getPoint=function(e){var t=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),n=X.calcBSplinePoint(this.degree,this.knots,this.controlPoints,t);return 1!=n.w&&n.divideScalar(n.w),new r.ub(n.x,n.y,n.z)},Q.prototype.getTangent=function(e){var t=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),n=X.calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,t,1)[1].clone();return n.normalize(),n};var Y=function(){var e,t,n;function i(e){this.manager=void 0!==e?e:r.l}function o(e){this.textureLoader=e}function a(){}function s(){}function u(){}function l(){}function _(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t}function c(){}function d(e){var t=e.match(/FBXVersion: (\d+)/);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function p(e){return e/46186158e3}i.prototype={constructor:i,crossOrigin:"anonymous",load:function(e,t,n,i){var o=this,a=void 0===o.path?r.E.extractUrlBase(e):o.path,s=new r.r(this.manager);s.setPath(o.path),s.setResponseType("arraybuffer"),s.load(e,(function(n){try{t(o.parse(n,a))}catch(t){setTimeout((function(){i&&i(t),o.manager.itemError(e)}),0)}}),n,i)},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(t,n){if(s="Kaydara FBX Binary  \0",(a=t).byteLength>=s.length&&s===g(a,0,s.length))e=(new l).parse(t);else{var i=g(t);if(!function(e){var t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],n=0;for(var r=0;r<t.length;++r){if((o=void 0,o=e[(i=1)-1],e=e.slice(n+i),n++,o)===t[r])return!1}var i,o;return!0}(i))throw new Error("THREE.FBXLoader: Unknown format.");if(d(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+d(i));e=(new u).parse(i)}var a,s;return new o(new r.mb(this.manager).setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin)).parse(e)}},o.prototype={constructor:o,parse:function(){t=this.parseConnections();var e=this.parseImages(),r=this.parseTextures(e),i=this.parseMaterials(r),o=this.parseDeformers(),s=(new a).parse(o);return this.parseScene(o,s,i),n},parseConnections:function(){var t=new Map;"Connections"in e&&e.Connections.connections.forEach((function(e){var n=e[0],r=e[1],i=e[2];t.has(n)||t.set(n,{parents:[],children:[]});var o={ID:r,relationship:i};t.get(n).parents.push(o),t.has(r)||t.set(r,{parents:[],children:[]});var a={ID:n,relationship:i};t.get(r).children.push(a)}));return t},parseImages:function(){var t={},n={};if("Video"in e.Objects){var r=e.Objects.Video;for(var i in r){var o=r[i];if(t[l=parseInt(i)]=o.RelativeFilename||o.Filename,"Content"in o){var a=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,s="string"==typeof o.Content&&""!==o.Content;if(a||s){var u=this.parseImage(r[i]);n[o.RelativeFilename||o.Filename]=u}}}}for(var l in t){var _=t[l];void 0!==n[_]?t[l]=n[_]:t[l]=t[l].split("\\").pop()}return t},parseImage:function(e){var t,n=e.Content,i=e.RelativeFilename||e.Filename,o=i.slice(i.lastIndexOf(".")+1).toLowerCase();switch(o){case"bmp":t="image/bmp";break;case"jpg":case"jpeg":t="image/jpeg";break;case"png":t="image/png";break;case"tif":t="image/tiff";break;case"tga":if(null===r.D.Handlers.get(".tga")){var a=new G;a.setPath(this.textureLoader.path),r.D.Handlers.add(/\.tga$/i,a)}t="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+o+'" is not supported.')}if("string"==typeof n)return"data:"+t+";base64,"+n;var s=new Uint8Array(n);return window.URL.createObjectURL(new Blob([s],{type:t}))},parseTextures:function(t){var n=new Map;if("Texture"in e.Objects){var r=e.Objects.Texture;for(var i in r){var o=this.parseTexture(r[i],t);n.set(parseInt(i),o)}}return n},parseTexture:function(e,t){var n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;var i=e.WrapModeU,o=e.WrapModeV,a=void 0!==i?i.value:0,s=void 0!==o?o.value:0;if(n.wrapS=0===a?r.bb:r.h,n.wrapT=0===s?r.bb:r.h,"Scaling"in e){var u=e.Scaling.value;n.repeat.x=u[0],n.repeat.y=u[1]}return n},loadTexture:function(e,n){var i,o,a=this.textureLoader.path,s=t.get(e.id).children;void 0!==s&&s.length>0&&void 0!==n[s[0].ID]&&(0!==(i=n[s[0].ID]).indexOf("blob:")&&0!==i.indexOf("data:")||this.textureLoader.setPath(void 0));var u=e.FileName.slice(-3).toLowerCase();if("tga"===u){var l=r.D.Handlers.get(".tga");null===l?(console.warn("FBXLoader: TGALoader not found, creating empty placeholder texture for",i),o=new r.lb):o=l.load(i)}else"psd"===u?(console.warn("FBXLoader: PSD textures are not supported, creating empty placeholder texture for",i),o=new r.lb):o=this.textureLoader.load(i);return this.textureLoader.setPath(a),o},parseMaterials:function(t){var n=new Map;if("Material"in e.Objects){var r=e.Objects.Material;for(var i in r){var o=this.parseMaterial(r[i],t);null!==o&&n.set(parseInt(i),o)}}return n},parseMaterial:function(e,n){var i=e.id,o=e.attrName,a=e.ShadingModel;if("object"===z(a)&&(a=a.value),!t.has(i))return null;var s,u=this.parseParameters(e,n,i);switch(a.toLowerCase()){case"phong":s=new r.N;break;case"lambert":s=new r.M;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',a),s=new r.N}return s.setValues(u),s.name=o,s},parseParameters:function(e,n,i){var o={};e.BumpFactor&&(o.bumpScale=e.BumpFactor.value),e.Diffuse?o.color=(new r.j).fromArray(e.Diffuse.value):e.DiffuseColor&&"Color"===e.DiffuseColor.type&&(o.color=(new r.j).fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(o.displacementScale=e.DisplacementFactor.value),e.Emissive?o.emissive=(new r.j).fromArray(e.Emissive.value):e.EmissiveColor&&"Color"===e.EmissiveColor.type&&(o.emissive=(new r.j).fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(o.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(o.opacity=parseFloat(e.Opacity.value)),o.opacity<1&&(o.transparent=!0),e.ReflectionFactor&&(o.reflectivity=e.ReflectionFactor.value),e.Shininess&&(o.shininess=e.Shininess.value),e.Specular?o.specular=(new r.j).fromArray(e.Specular.value):e.SpecularColor&&"Color"===e.SpecularColor.type&&(o.specular=(new r.j).fromArray(e.SpecularColor.value));var a=this;return t.get(i).children.forEach((function(e){var t=e.relationship;switch(t){case"Bump":o.bumpMap=a.getTexture(n,e.ID);break;case"Maya|TEX_ao_map":o.aoMap=a.getTexture(n,e.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":o.map=a.getTexture(n,e.ID);break;case"DisplacementColor":o.displacementMap=a.getTexture(n,e.ID);break;case"EmissiveColor":o.emissiveMap=a.getTexture(n,e.ID);break;case"NormalMap":case"Maya|TEX_normal_map":o.normalMap=a.getTexture(n,e.ID);break;case"ReflectionColor":o.envMap=a.getTexture(n,e.ID),o.envMap.mapping=r.o;break;case"SpecularColor":o.specularMap=a.getTexture(n,e.ID);break;case"TransparentColor":o.alphaMap=a.getTexture(n,e.ID),o.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",t)}})),o},getTexture:function(n,r){return"LayeredTexture"in e.Objects&&r in e.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),r=t.get(r).children[0].ID),n.get(r)},parseDeformers:function(){var n={},r={};if("Deformer"in e.Objects){var i=e.Objects.Deformer;for(var o in i){var a=i[o],s=t.get(parseInt(o));if("Skin"===a.attrType){var u=this.parseSkeleton(s,i);u.ID=o,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),u.geometryID=s.parents[0].ID,n[o]=u}else if("BlendShape"===a.attrType){var l={id:o};l.rawTargets=this.parseMorphTargets(s,i),l.id=o,s.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),r[o]=l}}}return{skeletons:n,morphTargets:r}},parseSkeleton:function(e,t){var n=[];return e.children.forEach((function(e){var i=t[e.ID];if("Cluster"===i.attrType){var o={ID:e.ID,indices:[],weights:[],transformLink:(new r.I).fromArray(i.TransformLink.a)};"Indexes"in i&&(o.indices=i.Indexes.a,o.weights=i.Weights.a),n.push(o)}})),{rawBones:n,bones:[]}},parseMorphTargets:function(e,n){for(var r=[],i=0;i<e.children.length;i++){var o=e.children[i],a=n[o.ID],s={name:a.attrName,initialWeight:a.DeformPercent,id:a.id,fullWeights:a.FullWeights.a};if("BlendShapeChannel"!==a.attrType)return;s.geoID=t.get(parseInt(o.ID)).children.filter((function(e){return void 0===e.relationship}))[0].ID,r.push(s)}return r},parseScene:function(i,o,a){n=new r.v;var u=this.parseModels(i.skeletons,o,a),l=e.Objects.Model,_=this;u.forEach((function(e){var r=l[e.ID];_.setLookAtProperties(e,r),t.get(e.ID).parents.forEach((function(t){var n=u.get(t.ID);void 0!==n&&n.add(e)})),null===e.parent&&n.add(e)})),this.bindSkeleton(i.skeletons,o,u),this.createAmbientLight(),this.setupMorphMaterials(),n.traverse((function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrixWorld=e.parent.matrix);var t=y(e.userData.transformData);e.applyMatrix(t)}}));var c=(new s).parse();1===n.children.length&&n.children[0].isGroup&&(n.children[0].animations=c,n=n.children[0]),n.animations=c},parseModels:function(n,i,o){var a=new Map,s=e.Objects.Model;for(var u in s){var l=parseInt(u),_=s[u],c=t.get(l),d=this.buildSkeleton(c,n,l,_.attrName);if(!d){switch(_.attrType){case"Camera":d=this.createCamera(c);break;case"Light":d=this.createLight(c);break;case"Mesh":d=this.createMesh(c,i,o);break;case"NurbsCurve":d=this.createCurve(c,i);break;case"LimbNode":case"Root":d=new r.e;break;case"Null":default:d=new r.v}d.name=r.V.sanitizeNodeName(_.attrName),d.ID=l}this.getTransformData(d,_),a.set(l,d)}return a},buildSkeleton:function(e,t,n,i){var o=null;return e.parents.forEach((function(e){for(var a in t){var s=t[a];s.rawBones.forEach((function(t,a){if(t.ID===e.ID){var u=o;(o=new r.e).matrixWorld.copy(t.transformLink),o.name=r.V.sanitizeNodeName(i),o.ID=n,s.bones[a]=o,null!==u&&o.add(u)}}))}})),o},createCamera:function(t){var n,i;if(t.children.forEach((function(t){var n=e.Objects.NodeAttribute[t.ID];void 0!==n&&(i=n)})),void 0===i)n=new r.Q;else{var o=0;void 0!==i.CameraProjectionType&&1===i.CameraProjectionType.value&&(o=1);var a=1;void 0!==i.NearPlane&&(a=i.NearPlane.value/1e3);var s=1e3;void 0!==i.FarPlane&&(s=i.FarPlane.value/1e3);var u=window.innerWidth,l=window.innerHeight;void 0!==i.AspectWidth&&void 0!==i.AspectHeight&&(u=i.AspectWidth.value,l=i.AspectHeight.value);var _=u/l,c=45;void 0!==i.FieldOfView&&(c=i.FieldOfView.value);var d=i.FocalLength?i.FocalLength.value:null;switch(o){case 0:n=new r.S(c,_,a,s),null!==d&&n.setFocalLength(d);break;case 1:n=new r.R(-u/2,u/2,l/2,-l/2,a,s);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+o+"."),n=new r.Q}}return n},createLight:function(t){var n,i;if(t.children.forEach((function(t){var n=e.Objects.NodeAttribute[t.ID];void 0!==n&&(i=n)})),void 0===i)n=new r.Q;else{var o;o=void 0===i.LightType?0:i.LightType.value;var a=16777215;void 0!==i.Color&&(a=(new r.j).fromArray(i.Color.value));var s=void 0===i.Intensity?1:i.Intensity.value/100;void 0!==i.CastLightOnObject&&0===i.CastLightOnObject.value&&(s=0);var u=0;void 0!==i.FarAttenuationEnd&&(u=void 0!==i.EnableFarAttenuation&&0===i.EnableFarAttenuation.value?0:i.FarAttenuationEnd.value);switch(o){case 0:n=new r.U(a,s,u,1);break;case 1:n=new r.m(a,s);break;case 2:var l=Math.PI/3;void 0!==i.InnerAngle&&(l=r.G.degToRad(i.InnerAngle.value));var _=0;void 0!==i.OuterAngle&&(_=r.G.degToRad(i.OuterAngle.value),_=Math.max(_,1)),n=new r.ib(a,s,u,l,_,1);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),n=new r.U(a,s)}void 0!==i.CastShadows&&1===i.CastShadows.value&&(n.castShadow=!0)}return n},createMesh:function(e,t,n){var i,o=null,a=null,s=[];return e.children.forEach((function(e){t.has(e.ID)&&(o=t.get(e.ID)),n.has(e.ID)&&s.push(n.get(e.ID))})),s.length>1?a=s:s.length>0?a=s[0]:(a=new r.N({color:13421772}),s.push(a)),"color"in o.attributes&&s.forEach((function(e){e.vertexColors=r.xb})),o.FBX_Deformer?(s.forEach((function(e){e.skinning=!0})),(i=new r.fb(o,a)).normalizeSkinWeights()):i=new r.J(o,a),i},createCurve:function(e,t){var n=e.children.reduce((function(e,n){return t.has(n.ID)&&(e=t.get(n.ID)),e}),null),i=new r.A({color:3342591,linewidth:1});return new r.z(n,i)},getTransformData:function(e,t){var n={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),n.eulerOrder="RotationOrder"in t?b(t.RotationOrder.value):"ZYX","Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),e.userData.transformData=n},setLookAtProperties:function(i,o){"LookAtProperty"in o&&t.get(i.ID).children.forEach((function(t){if("LookAtProperty"===t.relationship){var o=e.Objects.Model[t.ID];if("Lcl_Translation"in o){var a=o.Lcl_Translation.value;void 0!==i.target?(i.target.position.fromArray(a),n.add(i.target)):i.lookAt((new r.ub).fromArray(a))}}}))},bindSkeleton:function(e,n,i){var o=this.parsePoseNodes();for(var a in e){var s=e[a];t.get(parseInt(s.ID)).parents.forEach((function(e){if(n.has(e.ID)){var a=e.ID;t.get(a).parents.forEach((function(e){i.has(e.ID)&&i.get(e.ID).bind(new r.eb(s.bones),o[e.ID])}))}}))}},parsePoseNodes:function(){var t={};if("Pose"in e.Objects){var n=e.Objects.Pose;for(var i in n)if("BindPose"===n[i].attrType){var o=n[i].PoseNode;Array.isArray(o)?o.forEach((function(e){t[e.Node]=(new r.I).fromArray(e.Matrix.a)})):t[o.Node]=(new r.I).fromArray(o.Matrix.a)}}return t},createAmbientLight:function(){if("GlobalSettings"in e&&"AmbientColor"in e.GlobalSettings){var t=e.GlobalSettings.AmbientColor.value,i=t[0],o=t[1],a=t[2];if(0!==i||0!==o||0!==a){var s=new r.j(i,o,a);n.add(new r.b(s,1))}}},setupMorphMaterials:function(){var e=this;n.traverse((function(t){t.isMesh&&t.geometry.morphAttributes.position&&t.geometry.morphAttributes.position.length&&(Array.isArray(t.material)?t.material.forEach((function(n,r){e.setupMorphMaterial(t,n,r)})):e.setupMorphMaterial(t,t.material))}))},setupMorphMaterial:function(e,t,r){var i=e.uuid,o=t.uuid,a=!1;if(n.traverse((function(e){e.isMesh&&(Array.isArray(e.material)?e.material.forEach((function(t){t.uuid===o&&e.uuid!==i&&(a=!0)})):e.material.uuid===o&&e.uuid!==i&&(a=!0))})),!0===a){var s=t.clone();s.morphTargets=!0,void 0===r?e.material=s:e.material[r]=s}else t.morphTargets=!0}},a.prototype={constructor:a,parse:function(n){var r=new Map;if("Geometry"in e.Objects){var i=e.Objects.Geometry;for(var o in i){var a=t.get(parseInt(o)),s=this.parseGeometry(a,i[o],n);r.set(parseInt(o),s)}}return r},parseGeometry:function(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}},parseMeshGeometry:function(t,n,r){var i=r.skeletons,o=r.morphTargets,a=t.parents.map((function(t){return e.Objects.Model[t.ID]}));if(0!==a.length){var s=t.children.reduce((function(e,t){return void 0!==i[t.ID]&&(e=i[t.ID]),e}),null),u=t.children.reduce((function(e,t){return void 0!==o[t.ID]&&(e=o[t.ID]),e}),null),l=a[0],_={};"RotationOrder"in l&&(_.eulerOrder=b(l.RotationOrder.value)),"InheritType"in l&&(_.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(_.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(_.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(_.scale=l.GeometricScaling.value);var c=y(_);return this.genGeometry(n,s,u,c)}},genGeometry:function(e,t,n,i){var o=new r.g;e.attrName&&(o.name=e.attrName);var a=this.parseGeoNode(e,t),s=this.genBuffers(a),u=new r.s(s.vertex,3);if(i.applyToBufferAttribute(u),o.addAttribute("position",u),s.colors.length>0&&o.addAttribute("color",new r.s(s.colors,3)),t&&(o.addAttribute("skinIndex",new r.pb(s.weightsIndices,4)),o.addAttribute("skinWeight",new r.s(s.vertexWeights,4)),o.FBX_Deformer=t),s.normal.length>0){var l=new r.s(s.normal,3);(new r.H).getNormalMatrix(i).applyToBufferAttribute(l),o.addAttribute("normal",l)}if(s.uvs.forEach((function(e,t){var n="uv"+(t+1).toString();0===t&&(n="uv"),o.addAttribute(n,new r.s(s.uvs[t],2))})),a.material&&"AllSame"!==a.material.mappingType){var _=s.materialIndex[0],c=0;if(s.materialIndex.forEach((function(e,t){e!==_&&(o.addGroup(c,t-c,_),_=e,c=t)})),o.groups.length>0){var d=o.groups[o.groups.length-1],p=d.start+d.count;p!==s.materialIndex.length&&o.addGroup(p,s.materialIndex.length-p,_)}0===o.groups.length&&o.addGroup(0,s.materialIndex.length,s.materialIndex[0])}return this.addMorphTargets(o,e,n,i),o},parseGeoNode:function(e,t){var n={};if(n.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],n.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];for(var r=0;e.LayerElementUV[r];)n.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return n.weightTable={},null!==t&&(n.skeleton=t,t.rawBones.forEach((function(e,t){e.indices.forEach((function(r,i){void 0===n.weightTable[r]&&(n.weightTable[r]=[]),n.weightTable[r].push({id:t,weight:e.weights[i]})}))}))),n},genBuffers:function(e){var t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},n=0,r=0,i=!1,o=[],a=[],s=[],u=[],l=[],_=[],c=this;return e.vertexIndices.forEach((function(d,p){var f=!1;d<0&&(d^=-1,f=!0);var m=[],A=[];if(o.push(3*d,3*d+1,3*d+2),e.color){var y=h(p,n,d,e.color);s.push(y[0],y[1],y[2])}if(e.skeleton){if(void 0!==e.weightTable[d]&&e.weightTable[d].forEach((function(e){A.push(e.weight),m.push(e.id)})),A.length>4){i||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),i=!0);var b=[0,0,0,0],v=[0,0,0,0];A.forEach((function(e,t){var n=e,r=m[t];v.forEach((function(e,t,i){if(n>e){i[t]=n,n=e;var o=b[t];b[t]=r,r=o}}))})),m=b,A=v}for(;A.length<4;)A.push(0),m.push(0);for(var g=0;g<4;++g)l.push(A[g]),_.push(m[g])}if(e.normal){y=h(p,n,d,e.normal);a.push(y[0],y[1],y[2])}if(e.material&&"AllSame"!==e.material.mappingType)var E=h(p,n,d,e.material)[0];e.uv&&e.uv.forEach((function(e,t){var r=h(p,n,d,e);void 0===u[t]&&(u[t]=[]),u[t].push(r[0]),u[t].push(r[1])})),r++,f&&(c.genFace(t,e,o,E,a,s,u,l,_,r),n++,r=0,o=[],a=[],s=[],u=[],l=[],_=[])})),t},genFace:function(e,t,n,r,i,o,a,s,u,l){for(var _=2;_<l;_++)e.vertex.push(t.vertexPositions[n[0]]),e.vertex.push(t.vertexPositions[n[1]]),e.vertex.push(t.vertexPositions[n[2]]),e.vertex.push(t.vertexPositions[n[3*(_-1)]]),e.vertex.push(t.vertexPositions[n[3*(_-1)+1]]),e.vertex.push(t.vertexPositions[n[3*(_-1)+2]]),e.vertex.push(t.vertexPositions[n[3*_]]),e.vertex.push(t.vertexPositions[n[3*_+1]]),e.vertex.push(t.vertexPositions[n[3*_+2]]),t.skeleton&&(e.vertexWeights.push(s[0]),e.vertexWeights.push(s[1]),e.vertexWeights.push(s[2]),e.vertexWeights.push(s[3]),e.vertexWeights.push(s[4*(_-1)]),e.vertexWeights.push(s[4*(_-1)+1]),e.vertexWeights.push(s[4*(_-1)+2]),e.vertexWeights.push(s[4*(_-1)+3]),e.vertexWeights.push(s[4*_]),e.vertexWeights.push(s[4*_+1]),e.vertexWeights.push(s[4*_+2]),e.vertexWeights.push(s[4*_+3]),e.weightsIndices.push(u[0]),e.weightsIndices.push(u[1]),e.weightsIndices.push(u[2]),e.weightsIndices.push(u[3]),e.weightsIndices.push(u[4*(_-1)]),e.weightsIndices.push(u[4*(_-1)+1]),e.weightsIndices.push(u[4*(_-1)+2]),e.weightsIndices.push(u[4*(_-1)+3]),e.weightsIndices.push(u[4*_]),e.weightsIndices.push(u[4*_+1]),e.weightsIndices.push(u[4*_+2]),e.weightsIndices.push(u[4*_+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[3*(_-1)]),e.colors.push(o[3*(_-1)+1]),e.colors.push(o[3*(_-1)+2]),e.colors.push(o[3*_]),e.colors.push(o[3*_+1]),e.colors.push(o[3*_+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(i[0]),e.normal.push(i[1]),e.normal.push(i[2]),e.normal.push(i[3*(_-1)]),e.normal.push(i[3*(_-1)+1]),e.normal.push(i[3*(_-1)+2]),e.normal.push(i[3*_]),e.normal.push(i[3*_+1]),e.normal.push(i[3*_+2])),t.uv&&t.uv.forEach((function(t,n){void 0===e.uvs[n]&&(e.uvs[n]=[]),e.uvs[n].push(a[n][0]),e.uvs[n].push(a[n][1]),e.uvs[n].push(a[n][2*(_-1)]),e.uvs[n].push(a[n][2*(_-1)+1]),e.uvs[n].push(a[n][2*_]),e.uvs[n].push(a[n][2*_+1])}))},addMorphTargets:function(t,n,r,i){if(null!==r){t.morphAttributes.position=[];var o=this;r.rawTargets.forEach((function(r){var a=e.Objects.Geometry[r.geoID];void 0!==a&&o.genMorphGeometry(t,n,a,i,r.name)}))}},genMorphGeometry:function(e,t,n,i,o){var a=new r.g;n.attrName&&(a.name=n.attrName);for(var s=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],u=void 0!==t.Vertices?t.Vertices.a.slice():[],l=void 0!==n.Vertices?n.Vertices.a:[],_=void 0!==n.Indexes?n.Indexes.a:[],c=0;c<_.length;c++){var d=3*_[c];u[d]+=l[3*c],u[d+1]+=l[3*c+1],u[d+2]+=l[3*c+2]}var p={vertexIndices:s,vertexPositions:u},f=this.genBuffers(p),h=new r.s(f.vertex,3);h.name=o||n.attrName,i.applyToBufferAttribute(h),e.morphAttributes.position.push(h)},parseNormals:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Normals.a,i=[];return"IndexToDirect"===n&&("NormalIndex"in e?i=e.NormalIndex.a:"NormalsIndex"in e&&(i=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:i,mappingType:t,referenceType:n}},parseUVs:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.UV.a,i=[];return"IndexToDirect"===n&&(i=e.UVIndex.a),{dataSize:2,buffer:r,indices:i,mappingType:t,referenceType:n}},parseVertexColors:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Colors.a,i=[];return"IndexToDirect"===n&&(i=e.ColorIndex.a),{dataSize:4,buffer:r,indices:i,mappingType:t,referenceType:n}},parseMaterialIndices:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};for(var r=e.Materials.a,i=[],o=0;o<r.length;++o)i.push(o);return{dataSize:1,buffer:r,indices:i,mappingType:t,referenceType:n}},parseNurbsGeometry:function(e){if(void 0===Q)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new r.g;var t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new r.g;for(var n,i,o=t-1,a=e.KnotVector.a,s=[],u=e.Points.a,l=0,_=u.length;l<_;l+=4)s.push((new r.vb).fromArray(u,l));if("Closed"===e.Form)s.push(s[0]);else if("Periodic"===e.Form){n=o,i=a.length-1-n;for(l=0;l<o;++l)s.push(s[l])}var c=new Q(o,a,s,n,i).getPoints(7*s.length),d=new Float32Array(3*c.length);c.forEach((function(e,t){e.toArray(d,3*t)}));var p=new r.g;return p.addAttribute("position",new r.f(d,3)),p}},s.prototype={constructor:s,parse:function(){var e=[],t=this.parseClips();if(void 0!==t)for(var n in t){var r=t[n],i=this.addClip(r);e.push(i)}return e},parseClips:function(){if(void 0!==e.Objects.AnimationCurve){var t=this.parseAnimationCurveNodes();this.parseAnimationCurves(t);var n=this.parseAnimationLayers(t);return this.parseAnimStacks(n)}},parseAnimationCurveNodes:function(){var t=e.Objects.AnimationCurveNode,n=new Map;for(var r in t){var i=t[r];if(null!==i.attrName.match(/S|R|T|DeformPercent/)){var o={id:i.id,attr:i.attrName,curves:{}};n.set(o.id,o)}}return n},parseAnimationCurves:function(n){var r=e.Objects.AnimationCurve;for(var i in r){var o={id:r[i].id,times:r[i].KeyTime.a.map(p),values:r[i].KeyValueFloat.a},a=t.get(o.id);if(void 0!==a){var s=a.parents[0].ID,u=a.parents[0].relationship;u.match(/X/)?n.get(s).curves.x=o:u.match(/Y/)?n.get(s).curves.y=o:u.match(/Z/)?n.get(s).curves.z=o:u.match(/d|DeformPercent/)&&n.has(s)&&(n.get(s).curves.morph=o)}}},parseAnimationLayers:function(i){var o=e.Objects.AnimationLayer,a=new Map;for(var s in o){var u=[],l=t.get(parseInt(s));if(void 0!==l)l.children.forEach((function(o,a){if(i.has(o.ID)){var s=i.get(o.ID);if(void 0!==s.curves.x||void 0!==s.curves.y||void 0!==s.curves.z){if(void 0===u[a])if(void 0!==(f=t.get(o.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID)){var l=e.Objects.Model[f.toString()],_={modelName:r.V.sanitizeNodeName(l.attrName),ID:l.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};n.traverse((function(e){e.ID===l.id&&(_.transform=e.matrix,e.userData.transformData&&(_.eulerOrder=e.userData.transformData.eulerOrder))})),_.transform||(_.transform=new r.I),"PreRotation"in l&&(_.preRotation=l.PreRotation.value),"PostRotation"in l&&(_.postRotation=l.PostRotation.value),u[a]=_}u[a]&&(u[a][s.attr]=s)}else if(void 0!==s.curves.morph){if(void 0===u[a]){var c=t.get(o.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID,d=t.get(c).parents[0].ID,p=t.get(d).parents[0].ID,f=t.get(p).parents[0].ID;l=e.Objects.Model[f],_={modelName:r.V.sanitizeNodeName(l.attrName),morphName:e.Objects.Deformer[c].attrName};u[a]=_}u[a][s.attr]=s}}})),a.set(parseInt(s),u)}return a},parseAnimStacks:function(n){var r=e.Objects.AnimationStack,i={};for(var o in r){var a=t.get(parseInt(o)).children;a.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var s=n.get(a[0].ID);i[o]={name:r[o].attrName,layer:s}}return i},addClip:function(e){var t=[],n=this;return e.layer.forEach((function(e){t=t.concat(n.generateTracks(e))})),new r.c(e.name,-1,t)},generateTracks:function(e){var t=[],n=new r.ub,i=new r.W,o=new r.ub;if(e.transform&&e.transform.decompose(n,i,o),n=n.toArray(),i=(new r.p).setFromQuaternion(i,e.eulerOrder).toArray(),o=o.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){var a=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");void 0!==a&&t.push(a)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){var s=this.generateRotationTrack(e.modelName,e.R.curves,i,e.preRotation,e.postRotation,e.eulerOrder);void 0!==s&&t.push(s)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){var u=this.generateVectorTrack(e.modelName,e.S.curves,o,"scale");void 0!==u&&t.push(u)}if(void 0!==e.DeformPercent){var l=this.generateMorphTrack(e);void 0!==l&&t.push(l)}return t},generateVectorTrack:function(e,t,n,i){var o=this.getTimesForAllAxes(t),a=this.getKeyframeTrackValues(o,t,n);return new r.wb(e+"."+i,o,a)},generateRotationTrack:function(e,t,n,i,o,a){void 0!==t.x&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(r.G.degToRad)),void 0!==t.y&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(r.G.degToRad)),void 0!==t.z&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(r.G.degToRad));var s=this.getTimesForAllAxes(t),u=this.getKeyframeTrackValues(s,t,n);void 0!==i&&((i=i.map(r.G.degToRad)).push(a),i=(new r.p).fromArray(i),i=(new r.W).setFromEuler(i)),void 0!==o&&((o=o.map(r.G.degToRad)).push(a),o=(new r.p).fromArray(o),o=(new r.W).setFromEuler(o).inverse());for(var l=new r.W,_=new r.p,c=[],d=0;d<u.length;d+=3)_.set(u[d],u[d+1],u[d+2],a),l.setFromEuler(_),void 0!==i&&l.premultiply(i),void 0!==o&&l.multiply(o),l.toArray(c,d/3*4);return new r.X(e+".quaternion",s,c)},generateMorphTrack:function(e){var t=e.DeformPercent.curves.morph,i=t.values.map((function(e){return e/100})),o=n.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new r.P(e.modelName+".morphTargetInfluences["+o+"]",t.times,i)},getTimesForAllAxes:function(e){var t=[];return void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort((function(e,t){return e-t})).filter((function(e,t,n){return n.indexOf(e)==t}))},getKeyframeTrackValues:function(e,t,n){var r=n,i=[],o=-1,a=-1,s=-1;return e.forEach((function(e){if(t.x&&(o=t.x.times.indexOf(e)),t.y&&(a=t.y.times.indexOf(e)),t.z&&(s=t.z.times.indexOf(e)),-1!==o){var n=t.x.values[o];i.push(n),r[0]=n}else i.push(r[0]);if(-1!==a){var u=t.y.values[a];i.push(u),r[1]=u}else i.push(r[1]);if(-1!==s){var l=t.z.values[s];i.push(l),r[2]=l}else i.push(r[2])})),i},interpolateRotations:function(e){for(var t=1;t<e.values.length;t++){var n=e.values[t-1],r=e.values[t]-n,i=Math.abs(r);if(i>=180){for(var o=i/180,a=r/o,s=n+a,u=e.times[t-1],l=(e.times[t]-u)/o,_=u+l,c=[],d=[];_<e.times[t];)c.push(_),_+=l,d.push(s),s+=a;e.times=E(e.times,t,c),e.values=E(e.values,t,d)}}}},u.prototype={constructor:u,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(e){this.nodeStack.push(e),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(e,t){this.currentProp=e,this.currentPropName=t},parse:function(e){this.currentIndent=0,this.allNodes=new c,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var t=this,n=e.split(/[\r\n]+/);return n.forEach((function(e,r){var i=e.match(/^[\s\t]*;/),o=e.match(/^[\s\t]*$/);if(!i&&!o){var a=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),s=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),u=e.match("^\\t{"+(t.currentIndent-1)+"}}");a?t.parseNodeBegin(e,a):s?t.parseNodeProperty(e,s,n[++r]):u?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)}})),this.allNodes},parseNodeBegin:function(e,t){var n=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map((function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")})),i={name:n},o=this.parseNodeAttr(r),a=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(n,i):n in a?("PoseNode"===n?a.PoseNode.push(i):void 0!==a[n].id&&(a[n]={},a[n][a[n].id]=a[n]),""!==o.id&&(a[n][o.id]=i)):"number"==typeof o.id?(a[n]={},a[n][o.id]=i):"Properties70"!==n&&(a[n]="PoseNode"===n?[i]:i),"number"==typeof o.id&&(i.id=o.id),""!==o.name&&(i.attrName=o.name),""!==o.type&&(i.attrType=o.type),this.pushStack(i)},parseNodeAttr:function(e){var t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));var n="",r="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:n,type:r}},parseNodeProperty:function(e,t,n){var r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),i=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===r&&","===i&&(i=n.replace(/"/g,"").replace(/,$/,"").trim());var o=this.getCurrentNode();if("Properties70"!==o.name){if("C"===r){var a=i.split(",").slice(1),s=parseInt(a[0]),u=parseInt(a[1]),l=i.split(",").slice(3);r="connections",function(e,t){for(var n=0,r=e.length,i=t.length;n<i;n++,r++)e[r]=t[n]}(i=[s,u],l=l.map((function(e){return e.trim().replace(/^"/,"")}))),void 0===o[r]&&(o[r]=[])}"Node"===r&&(o.id=i),r in o&&Array.isArray(o[r])?o[r].push(i):"a"!==r?o[r]=i:o.a=i,this.setCurrentProp(o,r),"a"===r&&","!==i.slice(-1)&&(o.a=v(i))}else this.parseNodeSpecialProperty(e,r,i)},parseNodePropertyContinued:function(e){var t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=v(t.a))},parseNodeSpecialProperty:function(e,t,n){var r=n.split('",').map((function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")})),i=r[0],o=r[1],a=r[2],s=r[3],u=r[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":u=parseFloat(u);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":u=v(u)}this.getPrevNode()[i]={type:o,type2:a,flag:s,value:u},this.setCurrentProp(this.getPrevNode(),i)}},l.prototype={constructor:l,parse:function(e){var t=new _(e);t.skip(23);var n=t.getUint32();console.log("THREE.FBXLoader: FBX binary version: "+n);for(var r=new c;!this.endOfContent(t);){var i=this.parseNode(t,n);null!==i&&r.add(i.name,i)}return r},endOfContent:function(e){return e.size()%16==0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()},parseNode:function(e,t){var n={},r=t>=7500?e.getUint64():e.getUint32(),i=t>=7500?e.getUint64():e.getUint32(),o=(t>=7500?e.getUint64():e.getUint32(),e.getUint8()),a=e.getString(o);if(0===r)return null;for(var s=[],u=0;u<i;u++)s.push(this.parseProperty(e));var l=s.length>0?s[0]:"",_=s.length>1?s[1]:"",c=s.length>2?s[2]:"";for(n.singleProperty=1===i&&e.getOffset()===r;r>e.getOffset();){var d=this.parseNode(e,t);null!==d&&this.parseSubNode(a,n,d)}return n.propertyList=s,"number"==typeof l&&(n.id=l),""!==_&&(n.attrName=_),""!==c&&(n.attrType=c),""!==a&&(n.name=a),n},parseSubNode:function(e,t,n){if(!0===n.singleProperty){var r=n.propertyList[0];Array.isArray(r)?(t[n.name]=n,n.a=r):t[n.name]=r}else if("Connections"===e&&"C"===n.name){var i=[];n.propertyList.forEach((function(e,t){0!==t&&i.push(e)})),void 0===t.connections&&(t.connections=[]),t.connections.push(i)}else if("Properties70"===n.name){Object.keys(n).forEach((function(e){t[e]=n[e]}))}else if("Properties70"===e&&"P"===n.name){var o,a=n.propertyList[0],s=n.propertyList[1],u=n.propertyList[2],l=n.propertyList[3];0===a.indexOf("Lcl ")&&(a=a.replace("Lcl ","Lcl_")),0===s.indexOf("Lcl ")&&(s=s.replace("Lcl ","Lcl_")),o="Color"===s||"ColorRGB"===s||"Vector"===s||"Vector3D"===s||0===s.indexOf("Lcl_")?[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:n.propertyList[4],t[a]={type:s,type2:u,flag:l,value:o}}else void 0===t[n.name]?"number"==typeof n.id?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:"PoseNode"===n.name?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):void 0===t[n.name][n.id]&&(t[n.name][n.id]=n)},parseProperty:function(e){var t=e.getString(1);switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":var n=e.getUint32();return e.getArrayBuffer(n);case"S":n=e.getUint32();return e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var r=e.getUint32(),i=e.getUint32(),o=e.getUint32();if(0===i)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}void 0===j&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var a=new _(new j.Inflate(new Uint8Array(e.getArrayBuffer(o))).decompress().buffer);switch(t){case"b":case"c":return a.getBooleanArray(r);case"d":return a.getFloat64Array(r);case"f":return a.getFloat32Array(r);case"i":return a.getInt32Array(r);case"l":return a.getInt64Array(r)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}},_.prototype={constructor:_,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(e){this.offset+=e},getBoolean:function(){return 1==(1&this.getUint8())},getBooleanArray:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getBoolean());return t},getUint8:function(){var e=this.dv.getUint8(this.offset);return this.offset+=1,e},getInt16:function(){var e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e},getInt32:function(){var e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e},getInt32Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getInt32());return t},getUint32:function(){var e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e},getInt64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,4294967295===(e=4294967295&~e)&&(t=t+1&4294967295),-(4294967296*t+(e=e+1&4294967295))):4294967296*t+e},getInt64Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getInt64());return t},getUint64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e},getFloat32:function(){var e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e},getFloat32Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getFloat32());return t},getFloat64:function(){var e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e},getFloat64Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getFloat64());return t},getArrayBuffer:function(e){var t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t},getString:function(e){for(var t=[],n=0;n<e;n++)t[n]=this.getUint8();var i=t.indexOf(0);return i>=0&&(t=t.slice(0,i)),r.E.decodeText(new Uint8Array(t))}},c.prototype={constructor:c,add:function(e,t){this[e]=t}};var f=[];function h(e,t,n,r){var i;switch(r.mappingType){case"ByPolygonVertex":i=e;break;case"ByPolygon":i=t;break;case"ByVertice":i=n;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}"IndexToDirect"===r.referenceType&&(i=r.indices[i]);var o=i*r.dataSize,a=o+r.dataSize;return function(e,t,n,r){for(var i=n,o=0;i<r;i++,o++)e[o]=t[i];return e}(f,r.buffer,o,a)}var m=new r.p,A=new r.ub;function y(e){var t,n=new r.I,i=new r.I,o=new r.I,a=new r.I,s=new r.I,u=new r.I,l=new r.I,_=new r.I,c=new r.I,d=new r.I,p=new r.I,f=e.inheritType?e.inheritType:0;(e.translation&&n.setPosition(A.fromArray(e.translation)),e.preRotation)&&((t=e.preRotation.map(r.G.degToRad)).push(e.eulerOrder),i.makeRotationFromEuler(m.fromArray(t)));e.rotation&&((t=e.rotation.map(r.G.degToRad)).push(e.eulerOrder),o.makeRotationFromEuler(m.fromArray(t)));e.postRotation&&((t=e.postRotation.map(r.G.degToRad)).push(e.eulerOrder),a.makeRotationFromEuler(m.fromArray(t)));e.scale&&s.scale(A.fromArray(e.scale)),e.scalingOffset&&l.setPosition(A.fromArray(e.scalingOffset)),e.scalingPivot&&u.setPosition(A.fromArray(e.scalingPivot)),e.rotationOffset&&_.setPosition(A.fromArray(e.rotationOffset)),e.rotationPivot&&c.setPosition(A.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(d=e.parentMatrixWorld);var h=i.multiply(o).multiply(a),y=new r.I;d.extractRotation(y);var b,v,g,E,F=new r.I;if(F.copyPosition(d),g=F.getInverse(F).multiply(d),v=y.getInverse(y).multiply(g),b=s,0===f)E=y.multiply(h).multiply(v).multiply(b);else if(1===f)E=y.multiply(v).multiply(h).multiply(b);else{var T=(new r.I).copy(s),x=v.multiply(T.getInverse(T));E=y.multiply(h).multiply(x).multiply(b)}var P=n.multiply(_).multiply(c).multiply(i).multiply(o).multiply(a).multiply(c.getInverse(c)).multiply(l).multiply(u).multiply(s).multiply(u.getInverse(u)),D=(new r.I).copyPosition(P),C=d.multiply(D);return p.copyPosition(C),P=p.multiply(E)}function b(e){var t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(e=e||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function v(e){return e.split(",").map((function(e){return parseFloat(e)}))}function g(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=e.byteLength),r.E.decodeText(new Uint8Array(e,t,n))}function E(e,t,n){return e.slice(0,t).concat(n).concat(e.slice(t))}return i}()},151:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(31),n(26),n(50);var r=n(0),i=n(53),o=n(63),a=(n(29),n(11)),s=function(e,t){a.a.call(this),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1};s.prototype=Object.assign(Object.create(a.a.prototype),{constructor:s,render:function(e,t,n){var r,i,o=e.context,a=e.state;a.buffers.color.setMask(!1),a.buffers.depth.setMask(!1),a.buffers.color.setLocked(!0),a.buffers.depth.setLocked(!0),this.inverse?(r=0,i=1):(r=1,i=0),a.buffers.stencil.setTest(!0),a.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),a.buffers.stencil.setFunc(o.ALWAYS,r,4294967295),a.buffers.stencil.setClear(i),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),a.buffers.color.setLocked(!1),a.buffers.depth.setLocked(!1),a.buffers.stencil.setFunc(o.EQUAL,1,4294967295),a.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP)}});var u=function(){a.a.call(this),this.needsSwap=!1};u.prototype=Object.create(a.a.prototype),Object.assign(u.prototype,{render:function(e){e.state.buffers.stencil.setTest(!1)}});var l=function(e,t){if(this.renderer=e,void 0===t){var n={minFilter:r.C,magFilter:r.C,format:r.Z,stencilBuffer:!1,antialias:!0,alpha:!0},a=e.getSize(new r.tb);this._pixelRatio=e.getPixelRatio(),this._width=a.width,this._height=a.height,(t=new r.zb(this._width*this._pixelRatio,this._height*this._pixelRatio,n)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===i.a&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===o.a&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new o.a(i.a),this.clock=new r.i};Object.assign(l.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e);var t=this.renderer.getDrawingBufferSize(new r.tb);e.setSize(t.width,t.height)},insertPass:function(e,t){this.passes.splice(t,0,e)},isLastEnabledPass:function(e){for(var t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0},render:function(e){void 0===e&&(e=this.clock.getDelta());var t,n,r=this.renderer.getRenderTarget(),i=!1,o=this.passes.length;for(n=0;n<o;n++)if(!1!==(t=this.passes[n]).enabled){if(t.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),t.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),t.needsSwap){if(i){var a=this.renderer.context;a.stencilFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),a.stencilFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==s&&(t instanceof s?i=!0:t instanceof u&&(i=!1))}this.renderer.setRenderTarget(r)},reset:function(e){if(void 0===e){var t=this.renderer.getSize(new r.tb);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this._width=e,this._height=t;var n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(var i=0;i<this.passes.length;i++)this.passes[i].setSize(n,r)},setPixelRatio:function(e){this._pixelRatio=e,this.setSize(this._width,this._height)}});var _,c,d,p=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1};Object.assign(p.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),p.FullScreenQuad=(_=new r.R(-1,1,1,-1,0,1),c=new r.T(2,2),d=function(e){this._mesh=new r.J(c,e)},Object.defineProperty(d.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(d.prototype,{render:function(e){e.render(this._mesh,_)}}),d)},152:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));n(31),n(38),n(74),n(40),n(41),n(20);var r=n(0),i=["A5AF8CD54D229E189B25C159BA9F611D912D5851CDCF4EE58D4008E8EE0EDA86","5F44A178E4A1E0AA6D2EFACACBE151216ACFC2D991C0F587B20E7EA73BE2C1BD","AED47C053B9B9B51CE9FB37441AE816E40369E414CA116A86673A4667849B746","C5EA2960C848361C3ED9D397A915BFE1","B95A696913F930899AC9217D2A3F3EF0","B07B7741DDFCB8BC242F16D58FBF2F6F0A0D1E4A4DFB8160868C336BA7394B27B2C8FD982046D1DAD2181DFBEADE4364","00BA28404950D7066827129AC07D0B4F","C6966EB32AF847DC6D1FE51B867114E34CAA8D2C2AA6721675DCA095568847AC8D62C856A015FAB6C9CF889EB519E9414496079D488CB33F0AE4E4CAFD651933","FB9A9A7FAD32AD97F1D46087F6F4E139"],o=["C304CD361D1E7C93B5ADE6013CA916CB9081C2D35BBD9EBFE928ABEAA6AF3349","7D85353EDA1F0637B3252A0AB041AE42E43E1962ECE617B3BA25D7659E081785","F2D8696C8B7B53260B301CF9C3021261AD165443FF3A1332A27A8BC60BC4FB88","F2D8696C8B7B53260B301CF9C3021261E774D1C79467003B36BFD880D5E98525B102D96C3AFB2D94F700137224AEF12F","5F44A178E4A1E0AA6D2EFACACBE151216ACFC2D991C0F587B20E7EA73BE2C1BD","A5AF8CD54D229E189B25C159BA9F611D912D5851CDCF4EE58D4008E8EE0EDA86","AED47C053B9B9B51CE9FB37441AE816E40369E414CA116A86673A4667849B746","9CA262667664C6B5DC7B4A1B16F43DB7BDAC6856AEFE6CF349789520D845515F4BC844DC67C1E93D51A5730F5B6EFF83","A3AE93A35AC1324A20C8E4E0A4A2055B318BACDEC9BCC0C65BED0D95BDA47562797C50C93930228BAE60908A8A60A3E8","ECAB7232551EADD14C7DF5889B83BF5D371AC8EE3D44994B76FC4AE8B7B9FA38","16D59890EC31C37064B0DB9AABCB7DEF69FEF87876A7523D36E217F65B8ED59D7E4D7CE045694E1BCB05D1E3DABCA875","FB9A9A7FAD32AD97F1D46087F6F4E139","0422E0D580D193FDD6A996A059224B1F64945106EE7E1F8770721559240E10934F24BB2082C681B4CD4B274130DBD63F","C29A084FE9E28BDA0340738557BE687D2452141D8F0E1ABA75F673AC1EE887BC","2CB64FE4DC46E70E281FD943A8D93BDAD4028FA23F3AEDB8D65B7918460CFAED","5BE637759BD285AC3A406F151BA8ACCC7652A8707B05975303C570C38722C1C496D59181734A1BAEA4267BE347EBCFE5","FB9A9A7FAD32AD97F1D46087F6F4E139","C5EA2960C848361C3ED9D397A915BFE1","7F84E31C3D5C4689361C1377EF7264CDADD6F76FC9E6B61EA2C2E6961272B9FB","3852E9EA7A28B7EC61163E670C4B31D0","F3CE802CC895BB73C7270F80A49B80F5CD4B95F364BC3CC143453B2CFCBECAAAF4E6B11B6BD99FA316DE3E53FA15B6692A17847ECE10C73EADEA25D0956D9910","5B3F1FE837F9803A08AE780D9CDD54014FFE42A25E8286E988592959F068CD2461FA75B01DDD8B9E1A31880CB3F177E1BEFD66FF9565F997E83CDC60BF837CA0","E32AC0FE4F84B2C5D0E16BF59D364147D78307563354BAFE86FAE751F7FEBA25","8D0BD66928DEB32F2670B842F63BA9DEDE1B4F84BF74033D414BFED4210BB2AA873BD073EB7F198F32C2B83246BE6F47","A8F1EB139C2A0644CA4F6566BA76FC446104EA5C53C1A269642347137548D20A35B96C529F167CA603197F7CFDC3221700FA2822C5347BC53FC27CA1257F04C0","AAD33366DEFA9DA9F8A4751531C3EC738599015371C562ECD0FEE07E536BDCB008055353928A593096F8653EEBF491F38166CF40C4E6269E39D61106734462EB","D3A9F91B51FAF422FD67E0670B8321884FAED8A513A9C43648A0CAE0CE4B52BD8F1D8BACE5B3CDE948D11C050A6FCCA284AD4DED6C318E2925FC12F4B1AA2415C26848EE56CF6882AC0A5EA87BB4C4FADA53800840EE357D005C43BF6666AB0395EA66AB8F435EC893B534DA5418FB4A","B56806557F1115C50BD2542EFDAC3F80C7D3FDAD396A00A4E54B574D10BD57C6093981495C49184C6470BD1F42DDE770FE27342ADB7295DD37D539BC853339A7","AE7C45B6DE13AFA02AAAFE50D90D61C0B4E61101CB1B1EC97AE0032AE9C8DC7551DFE944E31262DB1FEA4882B0F3B307FCA6F4EABF9BB3D7C4A5B5F4A44FF66F","3F5ECD38CDF91191AC8FCF4AE394DA315F9559CED443897C339436F7AC4D7468F1A0CDE3108A23C7D9E52CA19F0E91CE0342C2D141CB63FFD7F33238054BB626","A8472142D22773E7E33E8F15360AEA8CEAE3010F5B1ACB94346CDF6F1B62AE2A464D9C3C150214B676E093931490CE3F6E3D89065B771CB2C966678671DBCEA3","7EC10A86967699F5DE5BADDBD5877EB9E363BE06F9B5253D60CCF2B861676AB47CC2019D6D7FAFC55A841B687F7D21A0CD708CFF872401407ED757AC4D342D93","E3132DFF1067A95C4A7192A080BD48BDC5422078030488FA764A567589BBFF89590631FF278C7FA0AB2A4F8971F44F54F7254CB828B19C9EE751AF52F4E8274A","4E859A76F82AAC25904269CB5769A0839A70887C5E55C712752FDA19C9F2C63AA69B339F4C56D4E8D7A1ACCED6A85FE2F19695EDDDADBC88C52568F938E10C28E3399B8AC049C36F83E52585D6C9BBEFBAEFCA046C3FB5E83B097EE998A2B7FA","D769300E224DB503682E97B268327F583A4713972DFDB02E86BF54163C4C7D13FC3D31CA40A1E8221C343A4F3470110E","7FB61B855E8C9322FE4DDFC835BE6574DAF462B2307CE181312F7777F44CC48E91108301066705CEB99556B9F3434D189D5D9698292288A37753F42451383C1B5FA7C5F3B69C932FD609A97549E829B5","7FB61B855E8C9322FE4DDFC835BE6574DA3EE69AA19EF8200BADC63C8BEAA38D4D2064F14308EEE032E9409CA9F70BA8748BDB271E054CF62A407A9452934402","7FB61B855E8C9322FE4DDFC835BE6574712A42456497648389C3255B2933B866D4EC155E92DCDDAC469371A280AEADB8F776B2AF785752AAB42CC88738D0015C","3602FB3BCF3835C7773A8501D9DFAFFF1A1A687AD119DC9ABBB1BDBC9AEA40E96D8B066AAC4F31B6714166B6E2A18291710AFD279E26EEB2AEC00566AC85658761D5F32E6F7AFA43429BBF95615E2E809DAF80D1B7D8346C2E978F47D6AC5A27","7FB61B855E8C9322FE4DDFC835BE65743696235461635B3A59004FBAA01B0782C5F2E797CF3C1B8E3399E12DD6FDA073559F857B14D404FD442210AD8C56386A","7FB61B855E8C9322FE4DDFC835BE6574F9AB0C73BF1FA30F6765A171C26A4C3F3FAF10CFF8698C431BD9FA9FCC2B83442FB4BBA4D5F3B946F215852ADB2562A2","3602FB3BCF3835C7773A8501D9DFAFFF2862E827DC0AF91081DBAB9D2E24BF5AFE19B3F033C4D90B865536041DDC552A9E25C20E480AD60C67ECE334AF713C993DBE8C830131299C8EE187A8596AF64D5637C218C5A0C86AA4DF7A822C48DE1F","EA491E6233A94DE6644340DBFC5E72B51766ACC1CA5EABC12F9CE8D3D535683F","15F59E694494682F88B0463F6B1FC0E7D8F0296D478FE8C78EA359B452F6250CC405B6DE829AD25939D578BFBF29F990BA18C9CF127EF6D421106D3333C4524E","D769300E224DB503682E97B268327F586AA131E5ABBCAC0C979DF0E2A521E8C319B5A9BE40F970F980C48C0F2C670DB28D7CF4814D189BDCBC1E565B052E7708","D769300E224DB503682E97B268327F58A4F56189A56FC19C7BDA8647A9FFFB8013C5CD575703F81C4758CC61B5230B7814582EB44143EC992CF1E55250E97C48","D769300E224DB503682E97B268327F58A703A23DD77136846E241781FCA9D3F1932F90DB1739F688090BC8416F041B9E","D769300E224DB503682E97B268327F58E3826F2F93BAF60CD6EAADEE6B1268DE5A3800052AFDA254670D5772E59F0B45","D769300E224DB503682E97B268327F58C2AB77A39253E57B9EA1FA66A6E3F6F53277B3E44E227600561212F9D7326525","D769300E224DB503682E97B268327F5821D56F823FE9E8C74858F35196A9BE075498A8F2C729906BE4AC8D7BCA05159220E0F075EC3001B8D154CA260664189F","D769300E224DB503682E97B268327F58289ADED705BACF9CF247E36B43526282A85046AB6E504EF86240FB2D422675B24C4534B4E34C8E1FA7F1ED8CB249C30E","D769300E224DB503682E97B268327F5821D56F823FE9E8C74858F35196A9BE072FB7DBA8A1A7A808D2425ABBC97BFCDF63E15FD9DFD2A99225404205E0764DE6","D769300E224DB503682E97B268327F58184B71B57C7911B6D7A32115355BFB83","D769300E224DB503682E97B268327F582649D2DFD039344F0A9DC74CD2333639","D769300E224DB503682E97B268327F582649D2DFD039344F0A9DC74CD2333639","D769300E224DB503682E97B268327F585CD32BEEA763D23531F948B7E09AFFD5B0216A6F163BB948B3919DC7BC162AE83C0F63BFBE0D0BD83E050A0CD9D7AB3532C028F1EB42A0090C8CBE874CE0512E633BD684B4EEDDE18A64ED5F757435266BAB0459A61BB74BDBBB35B110BBDC646BB8BA0A65D8757FDA79BEAEF0FCF541","D769300E224DB503682E97B268327F58044F953DB9BFD78FFD9E1BA43696CF5EF826E20EACD3A193295C476E9693923B82A74488C5D3FBDE71935E7D0E031B0A5B89492BEF54D9388B52A3BBDE0EB3EE","D769300E224DB503682E97B268327F582649D2DFD039344F0A9DC74CD2333639","D769300E224DB503682E97B268327F58390CB0473829944EA947CD9CEDB0B338","98C1A2D38554539125C0F83C0A7C9FFA","C565CC428F05001EC06AA7E14B3CB6B2","2BC40ADBEE7B72D3D7C1F117BFC248E7","FB9A9A7FAD32AD97F1D46087F6F4E139"];function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=n(188),u=s.enc.Utf8.parse("REdlbmU="),l=s.enc.Utf8.parse("aHVhbmdodWE="),_=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.resArr=[],this.frustRatio=16/9,this.frustPlane=20,this.frustumHelper=null,this.frustPointsList=[],this.frustumHelperList=[],this.camLookat=[],this.baseTextureS=t,this.videoTextureArr=n,this.scene=r}var t,n,_;return t=e,(n=[{key:"Decrypt",value:function(e){var t=s.enc.Hex.parse(e),n=s.enc.Base64.stringify(t);return s.AES.decrypt(n,u,{iv:l,mode:s.mode.CBC,padding:s.pad.Pkcs7}).toString(s.enc.Utf8).toString()}},{key:"de",value:function(e){var t=[],n=this;return e.forEach((function(e){t.push(n.Decrypt(e))})),t.join("\n")}},{key:"spaceCalculate",value:function(e){return new Promise((function(t,n){e.forEach((function(e,t){resArr[e]=transform(data.tex_video_data[e].intrinsic,data.tex_video_data[e].pose)})),t()}))}},{key:"transform",value:function(e,t){var n,i,o;return new Promise((function(a,s){n=2*Math.atan(parseFloat(e[1][2])/parseFloat(e[1][1]))*180/Math.PI;var u=t;i=[parseFloat(u[0][3]),parseFloat(u[1][3]),parseFloat(u[2][3])],o=(new r.I).set(u[0][0],u[0][1],u[0][2],u[0][3],u[1][0],u[1][1],u[1][2],u[1][3],u[2][0],u[2][1],u[2][2],u[2][3],0,0,0,1),a(n,i,o)}))}},{key:"generateFrustumHelper",value:function(e,t,n,i){var o=this.frustRatio,a=this.frustPlane,s=this.frustPointsList,u=e,l=a*Math.tan(r.G.degToRad(.5*u)),_=l*o,c=[new r.ub,new r.ub(-_,-l,a),new r.ub(_,-l,a),new r.ub(-_,l,a),new r.ub(_,l,a)];s[i]=[],s[i].push(c);var d=(new r.g).setFromPoints(c);d.setIndex([0,1,0,2,0,3,0,4,1,2,2,4,4,3,3,1]);var p=new r.B(d,new r.A({color:16711680,transparent:!0}));p.position.set(t.x,t.y,t.z);var f=(new r.I).set(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15]);return p.setRotationFromMatrix(f),p.updateMatrixWorld(),p}},{key:"initFrustum",value:function(e,t){this.frustPointsList;var n=this.frustumHelperList,i=this.frustumHelper,o=this;return new Promise((function(a,s){e.forEach((function(e,a){n[e]=[],i=o.generateFrustumHelper(t.fov,t.position,t.poseMat4,e),n[e].push(i);var s=[new r.ub,new r.ub,new r.ub,new r.ub,new r.ub];o.frustPointsList[e][0].forEach((function(t,r){n[e][0].localToWorld(s[r].copy(t))}));var u=new r.ub(0,0,0);for(a=1;a<5;a++)u=(new r.ub).addVectors(u,s[a]);u.multiplyScalar(.25),o.camLookat.push({x:u.x,y:u.y,z:u.z})})),a()}))}},{key:"returnFuseMaterital",value:function(e,t){this.frustPointsList;var n=this.frustumHelperList,a=this.baseTextureS,s=this.videoTextureArr,u=this.de(i),l=this.de(o),_={baseColor:{value:new r.j(16777215)},frustum:{value:[new r.ub,new r.ub,new r.ub,new r.ub,new r.ub]},baseTexture:{value:a[e]},videoTexture:{value:[s[t]]}};return this.frustPointsList[t][0].forEach((function(e,r){n[t][0].localToWorld(_.frustum.value[r].copy(e))})),new r.db({uniforms:_,vertexShader:u,fragmentShader:l,vertexColors:r.xb,side:r.t,depthTest:!0})}}])&&a(t.prototype,n),_&&a(t,_),e}()},161:function(e,t,n){},164:function(e){e.exports=JSON.parse('{"name":"fusion-platform","version":"5.0.5","title":"5.0.5","main":"./src/entry.js","sideEffects":["*.css","*.less","*.scss"],"description":"","scripts":{"dll":"webpack --config build/dll.config.js","dev":"webpack-dev-server --open --progress --config build/webpack.dev.js --disable-host-check","build":"webpack --config build/webpack.prod.js"},"author":{"name":"demon","email":"hh_demon@163.com","github":"https://github.com/infiniteDemon"},"license":"ISC","dependencies":{"@babel/polyfill":"^7.2.5","@tweenjs/tween.js":"^17.2.0","axios":"^0.19.0","crypto-js":"^3.1.9-1","flv.js":"^1.5.0","jquery":"^3.4.1","js-base64":"^2.5.1","lodash":"^4.17.11","three":"^0.106.2","to-regex-range":"^5.0.1"},"devDependencies":{"@babel/core":"^7.4.5","@babel/preset-env":"^7.4.5","babel-loader":"^8.0.6","clean-webpack-plugin":"^2.0.1","copy-webpack-plugin":"^4.6.0","css-loader":"^1.0.1","cssnano":"^4.1.10","eslint":"^5.15.1","eslint-config-airbnb-base":"^13.1.0","eslint-import-resolver-webpack":"^0.11.0","eslint-loader":"^2.1.2","eslint-plugin-import":"^2.16.0","file-loader":"^2.0.0","html-loader":"^0.5.5","html-webpack-plugin":"^4.0.0-beta.5","less":"^3.9.0","less-loader":"^4.1.0","mini-css-extract-plugin":"^0.5.0","optimize-css-assets-webpack-plugin":"^5.0.1","postcss-import":"^12.0.1","postcss-loader":"^3.0.0","postcss-preset-env":"^6.6.0","style-loader":"^0.23.1","terser-webpack-plugin":"^1.2.3","url-loader":"^1.1.2","webpack":"^4.26.1","webpack-cli":"^3.1.2","webpack-dev-server":"^3.11.0","webpack-merge":"^4.1.4"},"browserslist":["defaults"]}')},18:function(e,t,n){"use strict";n(38),n(39),n(28),n(70),n(40),n(41),n(20);var r=n(1),i=n(25),o=n(62),a={importJs:function(e,t,n){var r=document.createElement(t);r.defer=!0,r.src=e,document.body.appendChild(r),n&&n()},returnType:function(e){return{}.toString.call(e)},returnDgene:function(){console.log("".concat(r.a.error).concat(r.a.ENTRY_INITIALIZE_ERROR)),setTimeout((function(){window.open("https://www.dgene.com/","_self")}),5e3)},initMode:function(e,t,n){var a=this,s={};null==t&&(t=null),n?console.log("".concat(r.a.info,"local mode")):console.log("".concat(r.a.info,"network mode")),(n?Promise.all([Object(i.b)("".concat(e.api.apiBase).concat(e.api.scene,".json")),Object(i.b)("".concat(e.api.apiBase).concat(e.api.file,".json")),Object(i.b)("".concat(e.api.apiBase).concat(e.api.fusion,".json"))]):Promise.all([Object(i.a)("GET","".concat(e.url).concat(e.api.apiBase).concat(e.api.scene),null,null),Object(i.a)("GET","".concat(e.url).concat(e.api.apiBase).concat(e.api.file),null,null),Object(i.a)("GET","".concat(e.url).concat(e.api.apiBase).concat(e.api.fusion),null,null)])).then((function(n){0==n[0].code?a.returnType(n[0].data)==a.Object?s.scene=n[0].data:console.error("".concat(r.a.error).concat(r.a.ENTRY_SCENE_INITIALIZE_ERROR)):console.error("".concat(r.a.error).concat(r.a.ENTRY_SCENE_REQUEST_ERROR)),0==n[1].code&&a.returnType(n[1].data)==a.Array?s.file=n[1].data:console.error("".concat(r.a.error).concat(r.a.ENTRY_FILE_INITIALIZE_ERROR)),0==n[2].code&&a.returnType(n[2].data)==a.Object?s.fusion=n[2].data:console.error("".concat(r.a.error).concat(r.a.ENTRY_FUSION_INITIALIZE_ERROR)),(t=new o.a(e,s)).init(),t.render()}))},String:"[object String]",Object:"[object Object]",Array:"[object Array]",Number:"[object Number]"};t.a=a},21:function(e,t,n){"use strict";var r=n(127);function i(e,t,n){new r.Tween(e.position).to({x:t.x,y:t.y,z:t.z},n).easing(r.Easing.Exponential.InOut).start()}function o(e,t,n){new r.Tween(e.target).to({x:t.x,y:t.y,z:t.z},n).easing(r.Easing.Exponential.InOut).start()}function a(e,t,n){new r.Tween(e).to({zoom:t},n).onUpdate((function(){e.updateProjectionMatrix()})).start()}function s(e,t,n){new r.Tween(e).to({fov:t},n).onUpdate((function(){e.updateProjectionMatrix()})).start()}var u={setTargetPosTwo:function(e,t,n,i){var o=new r.Tween(e.position).to({x:t.x,y:t.y,z:t.z},i).easing(r.Easing.Exponential.InOut),a=new r.Tween(e.position).to({x:n.x,y:n.y,z:n.z},i).easing(r.Easing.Exponential.InOut);a.chain(o),a.start()},setTargetPos:i,setLookAt:o,setTargetRot:function(e,t,n,r,i){TweenMax.to(e.rotation,i,{x:t,y:n,z:r,ease:Expo.easeInOut})},setTargetZoom:a,setTargetFov:s,setTargetOpacity:function(e,t,n){material.transparent=!0,new r.Tween(e).to({opacity:t},n).onUpdate((function(){e.needsUpdate=!0})).start()},changeToTarget:function(e,t,n,u,l,_,c){r.removeAll(),l=l||27,_=_||1,i(e,n,c=c||2e3),o(t,u,c),s(e,l,c),a(e,_,c)}};t.a=u},221:function(e,t,n){"use strict";n.r(t);n(31),n(26),n(38),n(39),n(28),n(20),n(70),n(161);var r,i=n(6),o=n.n(i),a=(n(162),n(18)),s=n(0),u=n(1),l=n(62),_=["U","2","F","s","d","G","V","k","X","1","/","k","0","5","u","I","T","A","B","y","D","2","m","R","f","D","m","D","X","Y","X","P","H","/","r","P","N","R","z","l","H","s","M","="].join("");function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onLoad=n,this.onProgress=t,this.onClick=i,this.options=r,this.resTemp=null,this.initSetting={},this.init()}var t,n,i;return t=e,(n=[{key:"init",value:function(){var e,t,n,r,i,o=this;e=document,t=window,n=e.documentElement,r="orientationchange"in window?"orientationchange":"resize",i=function(){var e=n.clientWidth;e&&(n.style.fontSize=e/3840*100+"px")},e.addEventListener&&(t.addEventListener(r,i,!1),e.addEventListener("DOMContentLoaded",i,!1)),o.initScene(),s.l.onProgress=function(e,t,n){return o.onProgress(e,t,n)},s.l.onLoad=function(){return o.onLoad()}}},{key:"initScene",value:function(){var e=this;e.options.isLocal?console.log("".concat(u.a.info,"local mode")):console.log("".concat(u.a.info,"network mode")),e.options.isLocal?e.resTemp=Promise.all([this.$json("".concat(e.options.api.apiBase).concat(e.options.api.scene,".json")),this.$json("".concat(e.options.api.apiBase).concat(e.options.api.file,".json")),this.$json("".concat(e.options.api.apiBase).concat(e.options.api.fusion,".json"))]):e.resTemp=Promise.all([this.$ajax("GET","".concat(e.options.url).concat(e.options.api.apiBase).concat(e.options.api.scene),null,null),this.$ajax("GET","".concat(e.options.url).concat(e.options.api.apiBase).concat(e.options.api.file),null,null),this.$ajax("GET","".concat(e.options.url).concat(e.options.api.apiBase).concat(e.options.api.fusion),null,null)]),e.resTemp.then((function(t){0==t[0].code?a.a.returnType(t[0].data)==a.a.Object?e.initSetting.scene=t[0].data:console.error("".concat(u.a.error).concat(u.a.ENTRY_SCENE_INITIALIZE_ERROR)):console.error("".concat(u.a.error).concat(u.a.ENTRY_SCENE_REQUEST_ERROR)),0==t[1].code&&a.a.returnType(t[1].data)==a.a.Array?e.initSetting.file=t[1].data:console.error("".concat(u.a.error).concat(u.a.ENTRY_FILE_INITIALIZE_ERROR)),0==t[2].code&&a.a.returnType(t[2].data)==a.a.Object?e.initSetting.fusion=t[2].data:console.error("".concat(u.a.error).concat(u.a.ENTRY_FUSION_INITIALIZE_ERROR)),e.options.development==_?(e.dgeneScene=new l.a(e.options,e.initSetting,e.onClick),e.dgeneScene.init(),e.dgeneScene.render()):(r=new l.a(e.options,e.initSetting,e.onClick),console.log("".concat(u.a.log).concat(u.a.ENTRY_Developer_CLOSE)),r.init(),r.render())}))}},{key:"$ajax",value:function(){var e=arguments,t=this,n=null,r={"Access-Control-Allow-Origin":"*","Content-Type":"application/json"};return"POST"==arguments[0]?(n="POST",r=Object.assign(r,{"Content-Type":"application/x-www-form-urlencoded"})):"GET"==arguments[0]&&(n="GET"),new Promise((function(i,a){o.a.ajax({type:n,url:e[1],dataType:"json",data:e[2],xhrFields:r,beforeSend:function(e){e.setRequestHeader("Authorization","Bearer ".concat(t.options.publicKey))},success:function(e){i(e)},error:function(e,t){return console.error("Dgene error:request:  "+t),i(t),!1}})}))}},{key:"$json",value:function(){var e=arguments;return new Promise((function(t,n){o.a.getJSON(e[0],(function(e){t(e)}))}))}},{key:"callIndex",value:function(){return this.options.development==_?this.dgeneScene.callModelIndex():r.callModelIndex()}},{key:"Fkey",value:function(e){var t=o.a.Event("keydown");t.keyCode=e,o()("body").trigger(t)}},{key:"getCameraY",value:function(){return this.options.development==_?this.dgeneScene.getCameraY():r.getCameraY()}},{key:"debugLog",value:function(){return this.options.development==_?this.dgeneScene.debugLog():r.debugLog()}},{key:"restCamera",value:function(){return this.options.development==_?this.dgeneScene.restCamera():r.restCamera()}},{key:"camFlyTo",value:function(e,t){return this.options.development==_?this.dgeneScene.camFlyTo(e,t):r.camFlyTo(e,t)}},{key:"getCameraPosition",value:function(){return this.options.development==_?this.dgeneScene.getCameraPosition():r.getCameraPosition()}},{key:"getControl",value:function(){return this.options.development==_?this.dgeneScene.getControl():r.getControl()}},{key:"activeFuse",value:function(e){return this.options.development==_?this.dgeneScene.activeFuse(e):r.activeFuse(e)}},{key:"activeInit",value:function(){return this.options.development==_?this.dgeneScene.activeInit():r.activeInit()}},{key:"loadMapSprite",value:function(e,t,n,i){return this.options.development==_?this.dgeneScene.loadMapSprite(e,t,n,i):r.loadMapSprite(e,t,n,i)}},{key:"showMapSprite",value:function(){return this.options.development==_?this.dgeneScene.showMapSprite():r.showMapSprite()}},{key:"hideMapSprite",value:function(){return this.options.development==_?this.dgeneScene.hideMapSprite():r.hideMapSprite()}},{key:"showOut",value:function(){return this.options.development==_?this.dgeneScene.showOut():r.showOut()}},{key:"hideOut",value:function(){return this.options.development==_?this.dgeneScene.hideOut():r.hideOut()}},{key:"autoRotate",value:function(){return this.options.development==_?this.dgeneScene.autoRotate():r.autoRotate()}},{key:"stopAutoRotate",value:function(){return this.options.development==_?this.dgeneScene.stopAutoRotate():r.stopAutoRotate()}},{key:"showVideoDom",value:function(e){return this.options.development==_?this.dgeneScene.showVideoDom(e):r.showVideoDom(e)}},{key:"hideVideoDom",value:function(e){return this.options.development==_?this.dgeneScene.hideVideoDom(e):r.hideVideoDom(e)}},{key:"newHideOut",value:function(e,t,n){return this.options.development==_?this.dgeneScene.newHideOut(e,t,n):r.newHideOut(e,t,n)}},{key:"newShowOut",value:function(e,t,n){return this.options.development==_?this.dgeneScene.newShowOut(e,t,n):r.newShowOut(e,t,n)}},{key:"setCanvasSize",value:function(e,t){return this.options.development==_?this.dgeneScene.setCanvasSize(e,t):r.setCanvasSize(e,t)}}])&&c(t.prototype,n),i&&c(t,i),e}();window.Dgene=d},25:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));n(38),n(20),n(26);var r=n(6),i=n.n(r);function o(){var e=arguments,t=null,n={"Access-Control-Allow-Origin":"*","Content-Type":"application/json"};return"POST"==arguments[0]?(t="POST",n=Object.assign(n,{"Content-Type":"application/x-www-form-urlencoded"})):"GET"==arguments[0]&&(t="GET"),new Promise((function(r,o){i.a.ajax({type:t,url:e[1],dataType:"json",data:e[2],xhrFields:n,beforeSend:function(e){e.setRequestHeader("Authorization","Bearer ".concat(setting.publicKey))},success:function(e){r(e)},error:function(e,t){return console.error("Dgene error:request:  "+t),r(t),!1}})}))}function a(){var e=arguments;return new Promise((function(t,n){i.a.getJSON(e[0],(function(e){t(e)}))}))}},53:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")}},62:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DgeneScene}));var core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(38),core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(39),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_array_is_array__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(89),core_js_modules_es6_array_is_array__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_array_is_array__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(58),core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(59),core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(70),core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es6_array_from__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(167),core_js_modules_es6_array_from__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es6_array_from__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(40),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es6_date_to_string__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(41),core_js_modules_es6_date_to_string__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es6_date_to_string__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es6_object_to_string__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(20),core_js_modules_es6_object_to_string__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es6_object_to_string__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es6_object_define_property__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(31),core_js_modules_es6_object_define_property__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es6_object_define_property__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(123),core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_11__),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(170),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es6_array_map__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(126),core_js_modules_es6_array_map__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es6_array_map__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es6_array_for_each__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(74),core_js_modules_es6_array_for_each__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es6_array_for_each__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(50),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_15__),core_js_modules_es6_function_bind__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(75),core_js_modules_es6_function_bind__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(core_js_modules_es6_function_bind__WEBPACK_IMPORTED_MODULE_16__),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(93),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_17__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(60),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_18__),three__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(0),jquery__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(6),jquery__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_20__),_jsm_loaders_DRACOLoader__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(143),_jsm_loaders_FBXLoader__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(150),_jsm_controls_MapControls__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(142),_jsm_libs_dat_gui_module__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(145),_baseFusion_DgeneFlv__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(107),_baseFusion_DgeneFuse__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(152),_baseJS_globalFun__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(18),_libs_$ajax__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(25),_locales_en_us__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(1),_DgeneTween__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(21),_jsm_postprocessing_EffectComposer_js__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(151),_jsm_postprocessing_RenderPass_js__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(146),_jsm_postprocessing_ShaderPass_js__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(63),_jsm_postprocessing_OutlinePass_js__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(147),_jsm_shaders_FXAAShader_js__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(148);function asyncGeneratorStep(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){asyncGeneratorStep(o,r,i,a,s,"next",e)}function s(e){asyncGeneratorStep(o,r,i,a,s,"throw",e)}a(void 0)}))}}function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var TWEEN=__webpack_require__(127),DgeneScene=function(){function DgeneScene(e,t,n){_classCallCheck(this,DgeneScene),e?this.option=e:_baseJS_globalFun__WEBPACK_IMPORTED_MODULE_27__.a.returnDgene(),t?console.log("".concat(_locales_en_us__WEBPACK_IMPORTED_MODULE_29__.a.log).concat(_locales_en_us__WEBPACK_IMPORTED_MODULE_29__.a.ENTRY_INITIALIZE_Vesion)):_baseJS_globalFun__WEBPACK_IMPORTED_MODULE_27__.a.returnDgene(),this.onClick=n,this.dom=document.getElementById(this.option.appendDomID),this.style=this.dom.getAttribute("style");var r=this.style.match(/(height:\s*\d*)px/gi)[0].split(":")[1];this.H=r.substr(0,r.length-2);var i=this.style.match(/(width:\s*\d*)px/gi)[0].split(":")[1];this.W=i.substr(0,i.length-2),console.log(this.style,this.H,this.W),this.scene=new three__WEBPACK_IMPORTED_MODULE_19__.cb,this.camera=new three__WEBPACK_IMPORTED_MODULE_19__.S(this.fov,this.W/this.H,t.scene.camera.near||1e-4,t.scene.camera.far||4e3),this.light=new three__WEBPACK_IMPORTED_MODULE_19__.b(16777215),this.renderer=new three__WEBPACK_IMPORTED_MODULE_19__.Ab({antialias:!0,alpha:!0,preserveDrawingBuffer:!0}),this.initRenVal=t.scene.renderer;var o=document.createElement("ul");o.id="videoList",this.appendDomChild(o),this.controls=new _jsm_controls_MapControls__WEBPACK_IMPORTED_MODULE_23__.a(this.camera,this.renderer.domElement),this.initConVal=t.scene.controls,this.mixers=[],this.initInfo={initFov:t.scene.camera.fov||45,initCameraPos:t.scene.camera.position||{x:400,y:400,z:400},initCameraLookAt:t.scene.camera.lookAt||{x:0,y:0,z:0}},this.models=t.file||[],this.modelLoad=new _jsm_loaders_DRACOLoader__WEBPACK_IMPORTED_MODULE_21__.a,this.imgLoad=new three__WEBPACK_IMPORTED_MODULE_19__.mb,this.baseModels=[],this.baseTextureS=[],this.videoTextureArr=[],this.renderOrderNum=0,this.rayGroup=new three__WEBPACK_IMPORTED_MODULE_19__.v,this.isGui=e.isGui||!1,this.gui=e.isGui?new _jsm_libs_dat_gui_module__WEBPACK_IMPORTED_MODULE_24__.a:null,this.camPoint=null,this.intersection=null,this.raycaster=new three__WEBPACK_IMPORTED_MODULE_19__.ab,this.mouse=new three__WEBPACK_IMPORTED_MODULE_19__.tb,this.guiParams=new function(){this[""]=!1,this.fov=!1,this.scale=1,this.x=0,this.y=0,this.z=0},this._frustum=new three__WEBPACK_IMPORTED_MODULE_19__.u,this._projScreenMatrix=new three__WEBPACK_IMPORTED_MODULE_19__.I,this.godChosen=[],this.isGod=!0,this.isCcam=!1,this.dgeneFuse=[],this.dgeneFlv=null,this.flvObj={},this.runFlvObj=[],this.fusiedArr=[],this.fuseObj={index:"monitoring",camJson:{},flv:{type:"mp4",viedoStearm:null},modelIndex:[],isGlobalView:!1},this.fuseTime=null,this.result=t.fusion,this.CusGroup=new three__WEBPACK_IMPORTED_MODULE_19__.v,this.CusModels=[],this.selectedObjects=[],this.composer=null,this.effectFXAA=null,this.outlinePass=null,this.outlinePassParams={edgeStrength:8.3,edgeGlow:1,edgeThickness:1,pulsePeriod:3,rotate:!1,usePatternTexture:!1,visibleEdgeColor:1696767,hiddenEdgeColor:1640965},this.spriteGroup=new three__WEBPACK_IMPORTED_MODULE_19__.v,this.fbx=null,this.showNum=0,this.FlvTime=null}var _loadMapSprite,_deleteFlv,_deleteFuse,_applyFuse,_spere;return _createClass(DgeneScene,[{key:"init",value:function(){this.camera.position.set(this.initInfo.initCameraPos.x,this.initInfo.initCameraPos.y,this.initInfo.initCameraPos.z),this.camera.up.set(0,1,0),this.camera.lookAt(this.initInfo.initCameraLookAt.x,this.initInfo.initCameraLookAt.y,this.initInfo.initCameraLookAt.z),this.scene.add(this.rayGroup),this.scene.add(this.CusGroup),this.scene.add(this.camera),this.scene.add(this.light),this.scene.add(this.spriteGroup);new three__WEBPACK_IMPORTED_MODULE_19__.d(1e4);if(this.models.length>=1)for(var e=0;e<this.models.length;e++)this.load(this.models[e]);else console.warn("Dgene warn:No model data was detected");if(this.loadOutSideModel(),this.renderer.setPixelRatio(this.dom.devicePixelRatio),this.renderer.setSize(this.W,this.H),this.renderer.domElement.id="DgeneFusion",this.appendDomChild(this.renderer.domElement),this.initRenVal)for(var t in this.initRenVal)if(this.initRenVal.hasOwnProperty(t)){if("style"==t)continue;this.renderer[t]=this.initRenVal[t]}if(this.initRenVal.style)for(var n in this.initRenVal.style)this.initRenVal.style.hasOwnProperty(n)&&(this.renderer.domElement.style[n]=this.initRenVal.style[n]);this.option.isDown&&this.renderer.domElement.addEventListener("mousedown",this.onDocumentMouseMove.bind(this),!1),this.initControls(),this.initKey(),this.option.isOutLine&&(this.composer=new _jsm_postprocessing_EffectComposer_js__WEBPACK_IMPORTED_MODULE_31__.a(this.renderer),this.renderPass=new _jsm_postprocessing_RenderPass_js__WEBPACK_IMPORTED_MODULE_32__.a(this.scene,this.camera),this.composer.addPass(this.renderPass),this.outlinePass=new _jsm_postprocessing_OutlinePass_js__WEBPACK_IMPORTED_MODULE_34__.a(new three__WEBPACK_IMPORTED_MODULE_19__.tb(this.W,this.H),this.scene,this.camera),this.outlinePass.edgeStrength=this.outlinePassParams.edgeStrength,this.outlinePass.edgeGlow=this.outlinePassParams.edgeGlow,this.outlinePass.edgeThickness=this.outlinePassParams.edgeThickness,this.outlinePass.pulsePeriod=this.outlinePassParams.pulsePeriod,this.outlinePass.usePatternTexture=this.outlinePassParams.usePatternTexture,this.outlinePass.visibleEdgeColor.set(this.outlinePassParams.visibleEdgeColor),this.composer.addPass(this.outlinePass),this.effectFXAA=new _jsm_postprocessing_ShaderPass_js__WEBPACK_IMPORTED_MODULE_33__.a(_jsm_shaders_FXAAShader_js__WEBPACK_IMPORTED_MODULE_35__.a),this.effectFXAA.uniforms.resolution.value.set(1/this.W,1/this.H),this.effectFXAA.renderToScreen=!0,this.composer.addPass(this.effectFXAA)),this.dgeneFlv=new _baseFusion_DgeneFlv__WEBPACK_IMPORTED_MODULE_25__.a(this.flvObj,this.videoTextureArr),this.isGui?this.initGUI():console.info("Dgene info:test mode is close")}},{key:"appendDomChild",value:function(e){var t=this.option.appendDomID;t&&jquery__WEBPACK_IMPORTED_MODULE_20___default()("#".concat(t)).length>0?jquery__WEBPACK_IMPORTED_MODULE_20___default()("#".concat(t)).append(e):document.body.appendChild(e)}},{key:"initControls",value:function(){if(this.initConVal)for(var e in this.initConVal)this.initConVal.hasOwnProperty(e)&&(this.controls[e]=this.initConVal[e])}},{key:"onWindowResize",value:function(){this.camera.aspect=this.dom.offsetWidth/this.dom.offsetHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.dom.offsetWidth,this.dom.offsetHeight)}},{key:"callModelIndex",value:function(e){var t=this;return t.isGod&&(t.godChosen=[],t.godChosen.length=0,t._projScreenMatrix.multiplyMatrices(t.camera.projectionMatrix,t.camera.matrixWorldInverse),t._frustum.setFromMatrix(t._projScreenMatrix),t.scene.traverse((function(e){e instanceof three__WEBPACK_IMPORTED_MODULE_19__.J&&t._frustum.intersectsObject(e)&&t.godChosen.push(e.name)}))),e&&e(JSON.stringify(t.godChosen)),JSON.stringify(t.godChosen)}},{key:"render",value:function(){var e=this;TWEEN.update(),this.controls.update(),this.renderer.render(this.scene,this.camera),this.option.isOutLine&&this.composer.render(),this.isCcam&&console.info("Dgene info:",this.camera);var t,n=_createForOfIteratorHelper(this.mixers);try{for(n.s();!(t=n.n()).done;){t.value.update(this.clock.getDelta())}}catch(e){n.e(e)}finally{n.f()}window.requestAnimationFrame((function(){e.render()}))}},{key:"clean",value:function(){this.scene.traverse((function(e){e instanceof three__WEBPACK_IMPORTED_MODULE_19__.J&&(e.geometry&&e.geometry.dispose(),e.material&&(e.material.materials?(e.material.materials.forEach((function(e){e.map&&e.map.dispose(),e.dispose()})),e.material.materials.length=0):(e.material.map&&e.material.map.dispose(),e.material.dispose())))}))}},{key:"initGUI",value:function(){var e=this,t=this.guiParams;console.error("Dgene error:Your current version permissions are insufficient, please contact the administrator to open permissions");var n=this.gui.addFolder("camera");n.add(t,"scale",-200,200).step(.01).onChange((function(t){e.baseModels.huaweimesh.scale.set(t,t,t)})).listen(),n.add(t,"x",-200,200).step(1).onChange((function(t){e.baseModels.huaweimesh.position.x=t})).listen(),n.add(t,"y",-200,200).step(1).onChange((function(t){e.baseModels.huaweimesh.position.y=t})).listen(),n.add(t,"z",-200,200).step(1).onChange((function(t){e.baseModels.huaweimesh.position.z=t})).listen(),n.open()}},{key:"load",value:function(e){var t=this;return t.baseTextureS[e.index]=t.imgLoad.load(e.texture[0][t.option.loadType]),t.baseModels[e.index]=t.modelLoad.load(e.model[t.option.loadType],function(){var n=_asyncToGenerator(regeneratorRuntime.mark((function n(r){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r.computeVertexNormals(),i=new three__WEBPACK_IMPORTED_MODULE_19__.K({map:t.baseTextureS[e.index],side:three__WEBPACK_IMPORTED_MODULE_19__.t,depthTest:!0}),t.baseModels[e.index]=new three__WEBPACK_IMPORTED_MODULE_19__.J(r,i),1,t.baseModels[e.index].scale.set(1,1,1),t.renderOrderNum++,t.baseModels[e.index].renderOrder=2*t.renderOrderNum,t.baseModels[e.index].name=e.index,t.rayGroup.add(t.baseModels[e.index]);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),t.CusModels[e.index]}},{key:"spere",value:(_spere=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.guiParams,n=new three__WEBPACK_IMPORTED_MODULE_19__.gb(1,40,40),r=new three__WEBPACK_IMPORTED_MODULE_19__.K({color:16711680}),this.camPoint=new three__WEBPACK_IMPORTED_MODULE_19__.J(n,r),this.scene.add(this.camPoint),this.camPoint.position.set(t.pointX,t.pointY,t.pointZ);case 6:case"end":return e.stop()}}),e,this)}))),function(){return _spere.apply(this,arguments)})},{key:"onDocumentMouseMove",value:function(){if(event.preventDefault(),0===event.button){this.mouse.x=event.clientX/this.W*2-1,this.mouse.y=-event.clientY/this.H*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);var e=this.raycaster.intersectObject(this.spriteGroup,!0);if(e.length>0)try{this.onClick(e[0].object.name)}catch(e){console.error(e)}}}},{key:"Fkey",value:function(e){var t=jquery__WEBPACK_IMPORTED_MODULE_20___default.a.Event("keydown");t.keyCode=e,jquery__WEBPACK_IMPORTED_MODULE_20___default()("body").trigger(t)}},{key:"initKey",value:function initKey(){var _this=this;!function(){console.info("Dgene info:The initialization registration event has been injected"),jquery__WEBPACK_IMPORTED_MODULE_20___default()(document).keydown((function(event){var switchFront="switch (event.keyCode) {\n\t\t\t\t\t\t\tcase 32:\n\t\t\t\t\t\t\t\t_this.activeInit()\n\t\t\t\t\t\t\t\tbreak;",switchBack="default:\n\t\t\t\t\t\t\t\tbreak;}",str="";for(var key in _this.result)if(_this.result.hasOwnProperty(key)){var index=[];for(var j in _this.result)if(_this.result.hasOwnProperty(j)){if(_this.result[key].keyCode!=_this.result[j].keyCode)continue;index.push(_this.result[j].index)}str+="\n\t\t\t\t\t\tcase ".concat(Number(_this.result[key].keyCode),": _this.activeFuse('").concat(index,"')\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t")}eval(switchFront+str+switchBack)}))}()}},{key:"activeInit",value:function(){console.log("Dgene log:space"),this.deleteFuse(),_DgeneTween__WEBPACK_IMPORTED_MODULE_30__.a.changeToTarget(this.camera,this.controls,{x:this.initInfo.initCameraPos.x,y:this.initInfo.initCameraPos.y,z:this.initInfo.initCameraPos.z},{x:0,y:0,z:0},45*this.option.fovWinScale),this.camera.updateProjectionMatrix(),this.scene.traverse((function(e){e instanceof three__WEBPACK_IMPORTED_MODULE_19__.J&&(e.visible=!0)}))}},{key:"activeFuse",value:function(e){this.deleteFuse(),e=e.split(","),this.applyFuse(e),this.result[e[e.length-1]].isreal?_DgeneTween__WEBPACK_IMPORTED_MODULE_30__.a.changeToTarget(this.camera,this.controls,this.result[e[e.length-1]].realposition,this.result[e[e.length-1]].realtar,this.result[e[e.length-1]].camJson.fov*this.option.fovWinScale,null,this.option.animateDuringTime):_DgeneTween__WEBPACK_IMPORTED_MODULE_30__.a.changeToTarget(this.camera,this.controls,this.result[e[e.length-1]].camJson.position,this.result[e[e.length-1]].camJson.lookAt,this.result[e[e.length-1]].camJson.fov*this.option.fovWinScale,null,this.option.animateDuringTime),this.camera.updateProjectionMatrix()}},{key:"applyFuse",value:(_applyFuse=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this).fusiedArr=[],n.option.fusConEnable||(n.controls.enabled=!1),t.forEach((function(e){var t=n.result[e];console.info("".concat(_locales_en_us__WEBPACK_IMPORTED_MODULE_29__.a.log).concat(_locales_en_us__WEBPACK_IMPORTED_MODULE_29__.a.SCENE_FUSION_OK)),n.dgeneFlv.createFlv(t.index,t.flv.type,t.flv[n.option.videoSource]).play(),n.runFlvObj.push(t.index),n.dgeneFuse[t.index]=new _baseFusion_DgeneFuse__WEBPACK_IMPORTED_MODULE_26__.a(n.baseTextureS,n.videoTextureArr,n.scene),n.dgeneFuse[t.index].initFrustum([t.index],t.camJson),setTimeout((function(){t.modelIndex.forEach((function(e,r){n.baseModels[e].material=n.dgeneFuse[t.index].returnFuseMaterital(e,t.index),n.fusiedArr.push(e)})),t.isInside&&(n.option.isshowVideo?(jquery__WEBPACK_IMPORTED_MODULE_20___default()("#".concat(t.index)).show(),jquery__WEBPACK_IMPORTED_MODULE_20___default()("#".concat(t.index)).css({width:"100%"})):jquery__WEBPACK_IMPORTED_MODULE_20___default()("#".concat(t.index)).hide())}),n.option.animateDuringTime+n.option.fusionTime)})),e.abrupt("return");case 5:case"end":return e.stop()}}),e,this)}))),function(e){return _applyFuse.apply(this,arguments)})},{key:"fadeOut",value:function(e){var t=this;if(t.fusiedArr.length>=1){var n=.01;t.fuseTime=setInterval((function(){if(!(n<.99))return e&&(t.deleteFlv(),e()),void clearInterval(t.fuseTime);n+=.01;var r,i=_createForOfIteratorHelper(t.fusiedArr);try{for(i.s();!(r=i.n()).done;){var o=r.value;t.baseModels[o].material.uniforms.opacity.value=n}}catch(e){i.e(e)}finally{i.f()}}),10)}e&&e()}},{key:"deleteFuse",value:(_deleteFuse=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=this).controls.enabled=!0,jquery__WEBPACK_IMPORTED_MODULE_20___default()("#videoList li").remove(),t.fusiedArr.forEach((function(e){t.baseModels[e].material=new three__WEBPACK_IMPORTED_MODULE_19__.K({map:t.baseTextureS[e],side:three__WEBPACK_IMPORTED_MODULE_19__.t,depthTest:!0})})),t.runFlvObj.forEach((function(e){t.dgeneFlv.destroy(e)}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return _deleteFuse.apply(this,arguments)})},{key:"deleteFlv",value:(_deleteFlv=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=this).runFlvObj.length>=1&&(t.runFlvObj.forEach((function(e){t.dgeneFlv.destroy(e)})),t.runFlvObj=[]);case 2:case"end":return e.stop()}}),e,this)}))),function(){return _deleteFlv.apply(this,arguments)})},{key:"craeteVideo",value:function(e){var t=this;_baseJS_globalFun__WEBPACK_IMPORTED_MODULE_27__.a.returnType(e)==_baseJS_globalFun__WEBPACK_IMPORTED_MODULE_27__.a.String&&Object(_libs_$ajax__WEBPACK_IMPORTED_MODULE_28__.a)("GET",apiConfig.flv,{index:e},null).then((function(e){new _baseFusion_DgeneFlv__WEBPACK_IMPORTED_MODULE_25__.a(t.flvObj,t.videoTextureArr).createFlv(e.index,e.flv.type,e.flv.viedoStearm).play(),t.runFlvObj.push(e.index)}))}},{key:"getCameraY",value:function(){return this.camera.position.y}},{key:"debugLog",value:function(){return this.controls}},{key:"restCamera",value:function(){this.controls.reset(),this.camera.position.set(this.initInfo.initCameraPos.x,this.initInfo.initCameraPos.y,this.initInfo.initCameraPos.z),this.camera.up.set(0,1,0),this.camera.lookAt(this.initInfo.initCameraLookAt.x,this.initInfo.initCameraLookAt.y,this.initInfo.initCameraLookAt.z)}},{key:"camFlyTo",value:function(e,t){new TWEEN.Tween(this.camera.position).to({x:e.x,y:e.y,z:e.z},t).easing(TWEEN.Easing.Exponential.InOut).start()}},{key:"getCameraPosition",value:function(){return this.camera.position}},{key:"getControl",value:function(){return this.controls}},{key:"loadMapSprite",value:(_loadMapSprite=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,r,i){var o,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this,e.t0=three__WEBPACK_IMPORTED_MODULE_19__.kb,e.next=4,o.imgLoad.load(t);case 4:return e.t1=e.sent,e.t2={map:e.t1,color:16777215},e.next=8,new e.t0(e.t2);case 8:return a=e.sent,e.next=11,new three__WEBPACK_IMPORTED_MODULE_19__.jb(a);case 11:(s=e.sent).position.set(r.x,r.y,r.z),s.name=n,s.renderOrder=1e4*this.renderOrderNum,s.scale.multiplyScalar(i),o.spriteGroup.add(s);case 17:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r){return _loadMapSprite.apply(this,arguments)})},{key:"showMapSprite",value:function(){this.spriteGroup.visible=!0}},{key:"showMapSprite",value:function(){this.spriteGroup.visible=!1}},{key:"loadOutSideModel",value:function(){var e=this;(new _jsm_loaders_FBXLoader__WEBPACK_IMPORTED_MODULE_22__.a).load("./static/HQ_Out.FBX",(function(t){e.fbx=t,e.fbx.traverse((function(t){t instanceof three__WEBPACK_IMPORTED_MODULE_19__.J&&(e.renderOrderNum++,t.renderOrder=2*e.renderOrderNum)})),e.scene.add(e.fbx)}),(function(e){console.log(e.loaded/e.total*100+"% loaded")}),(function(e){console.log("An error happened",e)}))}},{key:"showOut",value:function(){var e=this,t=0,n=setInterval((function(){console.log(t),(t+=.1)>=1?clearInterval(n):(e.fbx.visible=!0,e.fbx.traverse((function(e){console.log(e.material),e instanceof three__WEBPACK_IMPORTED_MODULE_19__.J&&(e.material.length>=1?e.material.forEach((function(n,r){e.material[r].opacity=t})):e.material.opacity=t)})))}),200)}},{key:"hideOut",value:function(){var e=this,t=1,n=setInterval((function(){if(console.log(t),t-=.1,console.log(t),t<=0)return e.fbx.visible=!1,void clearInterval(n);e.fbx.traverse((function(e){e instanceof three__WEBPACK_IMPORTED_MODULE_19__.J&&(e.material.length>=1?e.material.forEach((function(n,r){e.material[r].opacity=t})):e.material.opacity=t)}))}),200)}},{key:"newHideOut",value:function(e,t,n){var r=this;r.deleteFuse(),r.showNum=0,r.showNum=r.showNum+1,r.controls.autoRotate=!1;clearInterval(r.FlvTime),r.FlvTime=setInterval((function(){r.fbx.position.y+=1*r.showNum,r.fbx.position.y>=n&&(r.controls.autoRotate=!0,clearInterval(r.FlvTime))}),20),_DgeneTween__WEBPACK_IMPORTED_MODULE_30__.a.changeToTarget(r.camera,r.controls,e,t,25*r.option.fovWinScale,null,r.option.animateDuringTime),r.camera.updateProjectionMatrix()}},{key:"newShowOut",value:function(e,t,n){var r=this;r.deleteFuse(),r.showNum=100,r.showNum=r.showNum-1,r.controls.autoRotate=!1,clearInterval(r.FlvTime),r.FlvTime=setInterval((function(){r.fbx.position.y<0&&(r.controls.autoRotate=!0,clearInterval(r.FlvTime)),r.fbx.position.y-=r.showNum*n}),20),_DgeneTween__WEBPACK_IMPORTED_MODULE_30__.a.changeToTarget(r.camera,r.controls,e,t,25*r.option.fovWinScale,null,r.option.animateDuringTime),r.camera.updateProjectionMatrix()}},{key:"autoRotate",value:function(){this.controls.autoRotate=!0}},{key:"stopAutoRotate",value:function(){this.controls.autoRotate=!1}},{key:"showVideoDom",value:function(e){this.deleteFuse(),e=e.split(","),setTimeout((function(){console.log("#".concat(e[e.length-1])),jquery__WEBPACK_IMPORTED_MODULE_20___default()("#".concat(e[e.length-1])).fadeIn()}),this.option.animateDuringTime+this.option.fusionTime),this.result[e[e.length-1]].isreal?_DgeneTween__WEBPACK_IMPORTED_MODULE_30__.a.changeToTarget(this.camera,this.controls,this.result[e[e.length-1]].realposition,this.result[e[e.length-1]].realtar,this.result[e[e.length-1]].camJson.fov*this.option.fovWinScale,null,this.option.animateDuringTime):_DgeneTween__WEBPACK_IMPORTED_MODULE_30__.a.changeToTarget(this.camera,this.controls,this.result[e[e.length-1]].camJson.position,this.result[e[e.length-1]].camJson.lookAt,this.result[e[e.length-1]].camJson.fov*this.option.fovWinScale,null,this.option.animateDuringTime),this.dgeneFlv.createFlv(this.result[e[e.length-1]].index,this.result[e[e.length-1]].flv.type,this.result[e[e.length-1]].flv[this.option.videoSource]).play(),this.runFlvObj.push(e),this.camera.updateProjectionMatrix()}},{key:"hideVideoDom",value:function(e){this.deleteFuse(),e=e.split(","),this.result[e[e.length-1]].isreal?_DgeneTween__WEBPACK_IMPORTED_MODULE_30__.a.changeToTarget(this.camera,this.controls,this.result[e[e.length-1]].realposition,this.result[e[e.length-1]].realtar,this.result[e[e.length-1]].camJson.fov*this.option.fovWinScale,null,this.option.animateDuringTime):_DgeneTween__WEBPACK_IMPORTED_MODULE_30__.a.changeToTarget(this.camera,this.controls,this.result[e[e.length-1]].camJson.position,this.result[e[e.length-1]].camJson.lookAt,this.result[e[e.length-1]].camJson.fov*this.option.fovWinScale,null,this.option.animateDuringTime),this.camera.updateProjectionMatrix(),setTimeout((function(){jquery__WEBPACK_IMPORTED_MODULE_20___default()("#".concat(e[e.length-1])).fadeOut()}),this.option.animateDuringTime+this.option.fusionTime)}},{key:"setCanvasSize",value:function(e,t){this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t)}}]),DgeneScene}()},63:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(29),n(26);var r=n(0),i=n(11),o=function(e,t){i.a.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof r.db?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=r.sb.clone(e.uniforms),this.material=new r.db({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new i.a.FullScreenQuad(this.material)};o.prototype=Object.assign(Object.create(i.a.prototype),{constructor:o,render:function(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}})}},[[221,1,2]]]);